{"version":3,"sources":["assets\\scripts\\ui\\GameUI.js"],"names":["Utils","require","cc","Class","Component","properties","joystick","type","Node","tooltip","btnArr","soundNode","gameUIPanel","shootBtn","reloadBtnNode","amoUI","Label","allRoleNumUI","weaponBtnNode","mipmapNode","prepareTopNode","countDownSpGroup","SpriteFrame","rankGroup","_shootFlag","_shootTimer","_reloadFlag","_reloadTimer","_theGameBegin","_protectTimeCountDown","_onceCountDownAnim","_onceGasCountDownAnim","gasNodeUI","safeNode","gasNode","boomNode","_gasState","_gasCountDownTimer","_gasCountDownInterval","safeCircle","_boxCountDownTimer","_boxCountDownInterval","_dropTime","_boomCountDownTimer","_boomCountDownInterval","tipNode","flashBtn","flashCDUI","healthBtn","healthCDUI","_flashTimer","_flashInCD","_healthTimer","_healthInCD","mipNode","_mipBoxGroup","boxAttrNodeGroup","equipAttrNodeGroup","onLoad","GameApp","eventManager","on","EventNames","EVENT_UPDATE_AMO_SHOW","updateAmoShow","bind","EVENT_SHOW_GUN_UI","updateGunUIShow","EVENT_SHOW_RELOAD_UI","updateReloadUIShow","EVENT_SHOW_ALLROLENUM_UI","updateAllRoleNumUIShow","EVENT_GAME_BEGIN","gameBegin","EVENT_UPDATE_MIPMAP_PLAYER","updateMipmapPlayer","EVENT_UPDATE_RANK_SHOW","updateRankShow","EVENT_NOTYFY_BOX_DISMISS","notifyBoxDismiss","EVENT_NOTYFY_BOOM_DISMISS","notifyBoomDismiss","EVENT_SHOW_BOXITEM","showBoxItemUI","EventType","TOUCH_START","onTouchBegin","TOUCH_END","onTouchLeave","TOUCH_CANCEL","children","runAction","rotateBy","repeatForever","dataManager","userData","isFirstPlay","active","sequence","moveTo","v2","updateSoundBtnShow","onDestroy","removeListener","init","_chooseType","_bili","_speedUpJump","uiManager","showGame","node","getComponent","showToast","update","dt","globalData","shootInterval","shoot","reloadAmo","gasCountDown","boxCountDown","boomCountDown","duleFlash","duleHealth","protectCcountDown","string","Math","floor","protectCcountDownAnim","Sprite","spriteFrame","emit","EVENT_THEGAMESTART","audioManager","playEffect","seq","scaleTo","delayTime","callFunc","quietGasState","refreshCircleAndCD","reduceCircleAndTip","RichText","width","height","theWidth","setPosition","position","Tools","pointOfRandom","spawn","fadeIn","fadeOut","repeat","EVENT_UPDATE_GAS_SHOW","safePosition","isIntersect","abs","k","y","x","x_off","parseFloat","sqrt","dropBox","dropBoom","theNumArr","i","showGameObject","push","thePos","paramPos","convertToNodeSpaceAR","convertToWorldSpaceAR","EVENT_DROP_BOX","EVENT_DROP_BOOM","_index","parseInt","destroy","forEach","element","arr","randNum","randomNum","randArr","getRandomAmountElementUnRepeat","nodeArr","_rank","getItemAttrArr","rank","param","item","ItemAttr","des","boxItemUIBtnClick","eventTouch","customEventData","_selectIndex","equipBoxItem","updateEquipShowUI","getEquipShowAttr","event","EVENT_AIM","EVENT_PLAYER_SHOOT","curAmoNum","EVENT_UPDATE_TOPBAR_SHOW","_gunData","commonAtlas","getSpriteFrame","weaponid","name","theRank","allRoleArr","length","theRole","_pbc","tag","Tags","player","getPopup","showPopup","updateMipmapBox","theArr","inGameKillNum","concat","sort","a","b","_killNum","theName","_belongName","playerName","reloadBtnClick","reloadInterval","EVENT_PLAYER_RELOAD","weaponBtnClick","EVENT_PICKUP_WEAPON","flashBtnClick","EVENT_FLASH","getSkillCD","healthBtnClick","EVENT_RESUME_HEALTH","backBtnClick","showUI","soundBtnClick","onoff","_effectOn","setEffect","updateRecordBtnShow","recordState","RecordState","RECORD","PAUSE","READY","recordBtnClick","self","pauseRecord","changeRecordState","resumeRecord","console","log"],"mappings":"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","sourceRoot":"/","sourcesContent":["const Utils = require(\"Utils\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        joystick: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '摇杆的脚本'\r\n        },\r\n        btnArr: {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        soundNode: cc.Node,\r\n        gameUIPanel: cc.Node,\r\n        shootBtn: cc.Node,\r\n        reloadBtnNode: cc.Node,\r\n        amoUI: cc.Label,\r\n        allRoleNumUI: cc.Label,\r\n        weaponBtnNode: cc.Node,\r\n        mipmapNode: cc.Node,\r\n\r\n        prepareTopNode: cc.Node,\r\n        // readActSp: cc.SpriteFrame,\r\n        countDownSpGroup: [cc.SpriteFrame],\r\n        rankGroup: [cc.Node],\r\n        _shootFlag: false,\r\n        _shootTimer: 0,\r\n        _reloadFlag: false,\r\n        _reloadTimer: 0,\r\n\r\n        _theGameBegin: false,\r\n        _protectTimeCountDown: 8,\r\n        _onceCountDownAnim: false,\r\n        _onceGasCountDownAnim: false,\r\n        gasNodeUI: cc.Node,\r\n        safeNode: cc.Node,\r\n        gasNode: cc.Node,\r\n        boomNode: cc.Node,\r\n        _gasState: 0,//0是不动圈,不现时。1是画圈,倒计时。2是缩圈,提示字。\r\n        _gasCountDownTimer: 40,\r\n        _gasCountDownInterval: 20,\r\n        safeCircle: 150,\r\n        _boxCountDownTimer: 20,\r\n        _boxCountDownInterval: 50,\r\n        _dropTime: 0,\r\n        _boomCountDownTimer: 30,\r\n        _boomCountDownInterval: 50,\r\n        tipNode: cc.Node,\r\n        flashBtn: cc.Node,\r\n        flashCDUI: cc.Label,\r\n        healthBtn: cc.Node,\r\n        healthCDUI: cc.Label,\r\n        _flashTimer: 0,\r\n        _flashInCD: false,\r\n        _healthTimer: 0,\r\n        _healthInCD: false,\r\n\r\n        mipNode: cc.Node,\r\n        _mipBoxGroup: [],\r\n        boxAttrNodeGroup: [cc.Node],\r\n        equipAttrNodeGroup: [cc.Node],\r\n    },\r\n\r\n    onLoad() {\r\n        this._gasState = 0\r\n        this._gasCountDownTimer = 40\r\n        this._gasCountDownInterval = 20\r\n        this.safeCircle = 150\r\n        this._boxCountDownTimer = 20\r\n        this._boxCountDownInterval = 50\r\n\r\n        this._boomCountDownTimer = 30\r\n        this._boomCountDownInterval = 50\r\n\r\n        GameApp.eventManager.on(EventNames.EVENT_UPDATE_AMO_SHOW, this.updateAmoShow.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_SHOW_GUN_UI, this.updateGunUIShow.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_SHOW_RELOAD_UI, this.updateReloadUIShow.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_SHOW_ALLROLENUM_UI, this.updateAllRoleNumUIShow.bind(this))\r\n\r\n        GameApp.eventManager.on(EventNames.EVENT_GAME_BEGIN, this.gameBegin.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_UPDATE_MIPMAP_PLAYER, this.updateMipmapPlayer.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_UPDATE_RANK_SHOW, this.updateRankShow.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_NOTYFY_BOX_DISMISS, this.notifyBoxDismiss.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_NOTYFY_BOOM_DISMISS, this.notifyBoomDismiss.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_SHOW_BOXITEM, this.showBoxItemUI.bind(this))\r\n        this.shootBtn.on(cc.Node.EventType.TOUCH_START, this.onTouchBegin, this);\r\n        this.shootBtn.on(cc.Node.EventType.TOUCH_END, this.onTouchLeave, this);\r\n        this.shootBtn.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchLeave, this);\r\n        this.weaponBtnNode.children[0].runAction(cc.rotateBy(0.2, 90).repeatForever())\r\n        if (GameApp.dataManager.userData.isFirstPlay) {\r\n            this.tipNode.active = true\r\n            this.tipNode.children[0].runAction(cc.sequence(cc.moveTo(0.5, cc.v2(0, 10)), cc.moveTo(0.5, cc.v2(0, -10))).repeatForever())\r\n        }\r\n        this.updateSoundBtnShow()\r\n    },\r\n    onDestroy() {\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_AMO_SHOW)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_GUN_UI)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_RELOAD_UI)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_ALLROLENUM_UI)\r\n\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_GAME_BEGIN)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_MIPMAP_PLAYER)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_RANK_SHOW)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_NOTYFY_BOX_DISMISS)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_NOTYFY_BOOM_DISMISS)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_BOXITEM)\r\n\r\n    },\r\n    init(_chooseType, _bili, _speedUpJump) {\r\n        GameApp.uiManager.showGame('GameMap', (node) => {\r\n            node.getComponent(\"GameMap\").init(_chooseType, _bili, _speedUpJump)\r\n        })\r\n        GameApp.uiManager.showToast(\"落地后请尽快寻找枪械\")\r\n\r\n    },\r\n\r\n    gameBegin() {\r\n        this._theGameBegin = true\r\n        this.gameUIPanel.active = true\r\n    },\r\n    update(dt) {\r\n        this._shootTimer -= dt\r\n        if (this._shootFlag && this._shootTimer < 0 && !this._reloadFlag) {\r\n            this._shootTimer = GameApp.dataManager.globalData.shootInterval\r\n            this.shoot()\r\n        }\r\n        if (this._reloadFlag) {\r\n            this._reloadTimer -= dt\r\n            if (this._reloadFlag && this._reloadTimer < 0) {\r\n                this._reloadFlag = false\r\n                GameApp.dataManager.reloadAmo()\r\n            }\r\n        }\r\n        this.gasCountDown(dt)\r\n        this.boxCountDown(dt)\r\n        this.boomCountDown(dt)\r\n        this.duleFlash(dt)\r\n        this.duleHealth(dt)\r\n\r\n        if (!this._theGameBegin) return\r\n        this.protectCcountDown(dt)\r\n    },\r\n    duleFlash(dt) {\r\n        this._flashTimer -= dt\r\n        if (this._flashTimer < 0) {\r\n            this._flashInCD = false\r\n            this.flashBtn.children[0].active = true\r\n            this.flashBtn.children[1].active = false\r\n        }\r\n        if (this._flashInCD) {\r\n            this.flashCDUI.string = Math.floor(this._flashTimer)\r\n        } else {\r\n            this.flashCDUI.string = \"\"\r\n        }\r\n    },\r\n    duleHealth(dt) {\r\n        this._healthTimer -= dt\r\n        if (this._healthTimer < 0) {\r\n            this._healthInCD = false\r\n            this.healthBtn.children[0].active = true\r\n            this.healthBtn.children[1].active = false\r\n        }\r\n        if (this._healthInCD) {\r\n            this.healthCDUI.string = Math.floor(this._healthTimer)\r\n        } else {\r\n            this.healthCDUI.string = \"\"\r\n        }\r\n    },\r\n    protectCcountDown(dt) {\r\n        this._protectTimeCountDown -= dt\r\n        if (this._protectTimeCountDown < 6) {\r\n            this.prepareTopNode.children[1].active = true\r\n            this.protectCcountDownAnim()\r\n            this.prepareTopNode.children[1].getComponent(cc.Sprite).spriteFrame = this.countDownSpGroup[Math.floor(this._protectTimeCountDown - 1)]\r\n        }\r\n        if (Math.floor(this._protectTimeCountDown) <= 0) {\r\n            GameApp.eventManager.emit(EventNames.EVENT_THEGAMESTART)\r\n            this.prepareTopNode.active = false\r\n            this._theGameBegin = false\r\n        }\r\n    },\r\n    protectCcountDownAnim() {\r\n        if (this._onceCountDownAnim) return\r\n        this._onceCountDownAnim = true\r\n        GameApp.audioManager.playEffect('waitSceneCutDown')\r\n        var seq = cc.sequence(cc.scaleTo(0.2, 1.5), cc.scaleTo(0.3, 1), cc.delayTime(0.5), cc.callFunc(() => {\r\n            this._onceCountDownAnim = false\r\n        }))\r\n        this.prepareTopNode.children[1].runAction(seq)\r\n    },\r\n    gasCountDown(dt) {\r\n        this._gasCountDownTimer -= dt\r\n        //0是不动圈,不现时。1是画圈,倒计时。2是缩圈,提示字。\r\n        switch (this._gasState) {\r\n            case 0: this.quietGasState(); break;\r\n            case 1: this.refreshCircleAndCD(dt); break;\r\n            case 2: this.reduceCircleAndTip(dt); break;\r\n        }\r\n    },\r\n\r\n    quietGasState() {\r\n        if (this._gasCountDownTimer < 16) {\r\n            this.gasNodeUI.children[0].active = true\r\n            this.gasNodeUI.children[1].active = true\r\n            this.gasNodeUI.children[2].active = false\r\n            this.gasNodeUI.children[3].getComponent(cc.RichText).string = \"毒气倒计时\"\r\n            this.gasNodeUI.active = true\r\n            this.safeNode.children[0].active = true\r\n            this.safeNode.children[0].width = this.safeNode.children[0].height = this.safeCircle + 5\r\n            var theWidth = this.gasNode.width\r\n            if (theWidth == 300) {\r\n                theWidth = 204\r\n            }\r\n            if (this.safeCircle == 0) {\r\n                this.safeNode.setPosition(this.gasNode.position)\r\n            } else {\r\n                this.safeNode.setPosition(Tools.pointOfRandom(this.safeNode.position, theWidth / 2, this.safeCircle / 2))\r\n            }\r\n            this.safeNode.width = this.safeNode.height = this.safeCircle\r\n            GameApp.audioManager.playEffect('gasAlert')\r\n            GameApp.audioManager.playEffect('noticeGasComing')\r\n            this.safeNode.children[0].runAction(cc.sequence(cc.spawn(cc.scaleTo(0, 1), cc.fadeIn(0)), cc.spawn(cc.scaleTo(1, 1.3), cc.fadeOut(1))).repeat(2))\r\n            this._gasState = 1\r\n            // GameApp.eventManager.emit(EventNames.EVENT_UPDATE_GAS_SHOW, 1, this.safeCircle)\r\n        }\r\n    },\r\n    refreshCircleAndCD(dt) {\r\n        this.gasNodeUI.children[0].getComponent(cc.RichText).string = Math.floor(this._gasCountDownTimer) + \"秒\"\r\n        if (this._gasCountDownTimer < 0) {\r\n\r\n            this.gasNodeUI.children[0].active = false\r\n            this.gasNodeUI.children[1].active = false\r\n            this.gasNodeUI.children[2].active = true\r\n            this.gasNodeUI.children[3].getComponent(cc.RichText).string = \"<color=#0fffff>毒气正在扩散</color>\"\r\n            GameApp.audioManager.playEffect('noticeGasDiffusion')\r\n            this.gasNodeUI.children[2].runAction(cc.sequence(cc.fadeOut(0.3), cc.fadeIn(0.5)).repeatForever())\r\n            this._gasState = 2\r\n\r\n            GameApp.eventManager.emit(EventNames.EVENT_UPDATE_GAS_SHOW, 2, { safeCircle: this.safeCircle, safePosition: this.safeNode.position })\r\n\r\n        }\r\n    },\r\n    reduceCircleAndTip(dt) {\r\n        if (this.safeCircle < 0) {\r\n            return\r\n        }\r\n        if (this.gasNode.width <= this.safeCircle) {\r\n            this._gasCountDownTimer = this._gasCountDownInterval\r\n            this.gasNode.width = this.gasNode.height = this.safeCircle\r\n            this.safeCircle -= 50\r\n            this.gasNodeUI.active = false\r\n            if (this.safeCircle < 0) {\r\n                GameApp.audioManager.playEffect('noticeGasNoWay')\r\n                return\r\n            }\r\n            this._gasState = 0\r\n            return\r\n        }\r\n        this.gasNode.width -= dt * 10\r\n        this.gasNode.height -= dt * 10\r\n        if (this.safeCircle == 0) return\r\n        if (!Tools.isIntersect(this.gasNode.position, this.gasNode.width / 2, this.safeNode.position, this.safeCircle / 2)) {\r\n\r\n        } else {\r\n            if (Math.abs(this.gasNode.width - this.safeCircle) > 0.05)  //外圈和内圈圆心重合,半径相同\r\n            {\r\n                // k = y/x\r\n                // y = kx\r\n                // x^2+y^2 = 1\r\n                // x^2 = 1/(k^2+1)\r\n                var k = (this.gasNode.y - this.safeNode.y) / (this.gasNode.x - this.safeNode.x);\r\n\r\n                var x_off = dt * 10 * parseFloat(Math.sqrt(1 / (k * k + 1)))\r\n\r\n                // 通过mPoint_outer和mPoint_inner的x坐标来判断此时外圆圆心要移动的是该 + x_off（x轴偏移量）还是 -x_off\r\n                this.gasNode.x += 1 * (this.gasNode.x < this.safeNode.x ? 1 : -1) * x_off;\r\n                // 知道变化后的外圈圆心的x坐标，和直线方程来求对应的y坐标\r\n                this.gasNode.y = k * (this.gasNode.x - this.safeNode.x) + this.safeNode.y;\r\n\r\n            }\r\n        }\r\n    },\r\n    boxCountDown(dt) {\r\n        if (this._dropTime >= 2) return;\r\n        this._boxCountDownTimer -= dt\r\n        if (this._boxCountDownTimer < 0) {\r\n            this._boxCountDownTimer = this._boxCountDownInterval\r\n            this.dropBox()\r\n        }\r\n    },\r\n    boomCountDown(dt) {\r\n        if (this._dropTime >= 2) return;\r\n        this._boomCountDownTimer -= dt\r\n        if (this._boomCountDownTimer < 0) {\r\n            this._boomCountDownTimer = this._boomCountDownInterval\r\n            this.dropBoom()\r\n        }\r\n    },\r\n    dropBox() {\r\n        GameApp.audioManager.playEffect('noticeExpShow')\r\n        var theNumArr = [10, 6, 3, 2]\r\n        for (let i = 0; i < theNumArr[this._dropTime]; i++) {\r\n            GameApp.uiManager.showGameObject(\"MipBox\", (node) => {\r\n                this._mipBoxGroup.push(node)\r\n                var thePos = Tools.pointOfRandom(this.safeNode.position, this.safeCircle / 2, 0)\r\n                node.setPosition(thePos)\r\n                let paramPos = this.mipNode.convertToNodeSpaceAR(node.convertToWorldSpaceAR(cc.v2(0.5, 0.5)))\r\n                GameApp.eventManager.emit(EventNames.EVENT_DROP_BOX, paramPos, this._dropTime + \"\" + i)\r\n                node.children[0].runAction(cc.sequence(cc.scaleTo(1, 4), cc.scaleTo(0, 1), cc.fadeOut(0)).repeat(2))\r\n                // node.getComponent(\"DropBox\").init()\r\n            }, this.mipNode)\r\n        }\r\n        this._dropTime++\r\n        // GameApp.eventManager.emit(EventNames.EVENT_DROP_BOX, this.safeCircle)\r\n    },\r\n    dropBoom() {\r\n        if (this.safeCircle <= 0) return\r\n        GameApp.audioManager.playEffect('noticeBoomComing')\r\n        this.boomNode.active = true\r\n        this.boomNode.setPosition(Tools.pointOfRandom(this.safeNode.position, this.safeCircle / 2, this.boomNode.width / 2))\r\n        GameApp.eventManager.emit(EventNames.EVENT_DROP_BOOM, this.mipNode.convertToNodeSpaceAR(this.boomNode.convertToWorldSpaceAR(cc.v2(0.5, 0.5))), this.boomNode.width)\r\n    },\r\n    notifyBoxDismiss(_index) {\r\n        this._mipBoxGroup[parseInt(_index)].destroy()\r\n    },\r\n    notifyBoomDismiss(_index) {\r\n        this.boomNode.active = false\r\n    },\r\n    showBoxItemUI() {\r\n        this.boxAttrNodeGroup.forEach(element => {\r\n            element.active = false\r\n        });\r\n        var arr = [0, 1, 2, 3]\r\n        var randNum = Tools.randomNum(3, 4)\r\n        var randArr = Tools.getRandomAmountElementUnRepeat(arr, randNum).nodeArr\r\n        // console.log(randArr)\r\n        randArr.forEach(element => {\r\n            var _rank = GameApp.dataManager.globalData.getItemAttrArr[element].rank\r\n            if (_rank == 3) {\r\n                // console.log(element + \"号关闭了\")\r\n                this.boxAttrNodeGroup[element].active = false\r\n            } else {\r\n                var param = {\r\n                    rank: _rank + 1,\r\n                    item: ItemAttr[element][_rank],\r\n                }\r\n                this.boxAttrNodeGroup[element].children[0].getComponent(cc.Label).string = param.rank + \"级\"\r\n                this.boxAttrNodeGroup[element].children[1].getComponent(cc.Label).string = param.item.des\r\n                this.boxAttrNodeGroup[element].children[2].runAction(cc.rotateBy(0.2, 90).repeatForever())\r\n                this.boxAttrNodeGroup[element].active = true\r\n                // console.log(element + \"号打开了\")\r\n            }\r\n        });\r\n    },\r\n    boxItemUIBtnClick(eventTouch, customEventData) {\r\n        var _selectIndex = parseInt(customEventData) - 1\r\n        // console.log(\"选择了\" + _selectIndex + \"号装备\")\r\n        GameApp.dataManager.equipBoxItem(_selectIndex)\r\n        this.boxAttrNodeGroup.forEach(element => {\r\n            element.active = false\r\n        });\r\n        this.updateEquipShowUI()\r\n    },\r\n    updateEquipShowUI() {\r\n        var arr = GameApp.dataManager.getEquipShowAttr()\r\n        for (var i in this.equipAttrNodeGroup) {\r\n            if (arr[i] == null) {\r\n                this.equipAttrNodeGroup[i].active = false\r\n            } else {\r\n                this.equipAttrNodeGroup[i].children[0].getComponent(cc.Label).string = arr[i].rank + \"级\"\r\n                this.equipAttrNodeGroup[i].children[1].getComponent(cc.Label).string = arr[i].item.des\r\n                this.equipAttrNodeGroup[i].active = true\r\n            }\r\n        }\r\n    },\r\n    // gasCountDownAnim() {\r\n    //     if (this._onceGasCountDownAnim) return\r\n    //     this._onceGasCountDownAnim = true\r\n\r\n    // },\r\n    onTouchBegin(event) {\r\n        this._shootFlag = true\r\n\r\n    },\r\n    onTouchLeave(event) {\r\n        this._shootFlag = false\r\n        GameApp.eventManager.emit(EventNames.EVENT_AIM, false)\r\n    },\r\n    shoot() {\r\n        GameApp.eventManager.emit(EventNames.EVENT_AIM, true)\r\n        GameApp.eventManager.emit(EventNames.EVENT_PLAYER_SHOOT)\r\n    },\r\n    updateAmoShow() {\r\n        this.amoUI.string = GameApp.dataManager.globalData.curAmoNum\r\n        GameApp.eventManager.emit(EventNames.EVENT_UPDATE_TOPBAR_SHOW)\r\n    },\r\n    updateGunUIShow(event, _gunData) {\r\n        if (_gunData) {\r\n            this.weaponBtnNode.getComponent(cc.Sprite).spriteFrame = GameApp.uiManager.commonAtlas.getSpriteFrame(\"ui_weapon_\" + _gunData.weaponid)\r\n            this.weaponBtnNode.children[1].children[0].getComponent(cc.Label).string = _gunData.name\r\n        }\r\n        this.weaponBtnNode.active = event\r\n    },\r\n    updateReloadUIShow(event) {\r\n        this.reloadBtnNode.active = event\r\n    },\r\n    updateAllRoleNumUIShow() {\r\n        var theRank = GameApp.dataManager.globalData.allRoleArr.length\r\n        if (theRank == 1) {\r\n            var theRole = GameApp.dataManager.globalData.allRoleArr[0]\r\n            if (theRole._pbc.tag == Tags.player) {\r\n                GameApp.uiManager.getPopup(\"OverPopup\") == null && GameApp.uiManager.showPopup(\"OverPopup\", (node) => {\r\n                    node.getComponent(\"OverPopup\").init(true, theRank)\r\n                })\r\n            }\r\n        }\r\n        this.allRoleNumUI.string = theRank + \"人存活\"\r\n    },\r\n    updateMipmapPlayer(event) {\r\n        this.mipmapNode.children[2].setPosition(event)\r\n    },\r\n    updateMipmapBox(event) {\r\n\r\n    },\r\n    updateRankShow() {\r\n        var theArr = GameApp.dataManager.globalData.inGameKillNum.concat()\r\n        theArr.sort((a, b) => b._killNum - a._killNum)\r\n        for (let i = 0; i < 5; i++) {\r\n            var theName = theArr[i]._belongName\r\n            if (theName == GameApp.dataManager.userData.playerName) {\r\n                theName = \"<color=#0fffff>\" + theArr[i]._belongName + \"</color>\"\r\n            }\r\n            this.rankGroup[i].children[0].getComponent(cc.RichText).string = theName\r\n            this.rankGroup[i].children[1].getComponent(cc.Label).string = theArr[i]._killNum\r\n        }\r\n    },\r\n    reloadBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        if (this._reloadFlag) return;\r\n        this._reloadTimer = GameApp.dataManager.globalData.reloadInterval\r\n        this._reloadFlag = true\r\n        GameApp.eventManager.emit(EventNames.EVENT_PLAYER_RELOAD)\r\n    },\r\n    weaponBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.eventManager.emit(EventNames.EVENT_PICKUP_WEAPON)\r\n    },\r\n    flashBtnClick() {\r\n        if (this._flashInCD) {\r\n            GameApp.uiManager.showToast(\"技能正在冷却中\")\r\n        } else {\r\n            this.tipNode.active = false\r\n            GameApp.eventManager.emit(EventNames.EVENT_FLASH)\r\n            this.flashBtn.children[0].active = false\r\n            this.flashBtn.children[1].active = true\r\n            this._flashTimer = GameApp.dataManager.getSkillCD()\r\n            this._flashInCD = true\r\n        }\r\n    },\r\n    healthBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        if (this._healthInCD) {\r\n            GameApp.uiManager.showToast(\"技能正在冷却中\")\r\n        } else {\r\n            GameApp.eventManager.emit(EventNames.EVENT_RESUME_HEALTH)\r\n            this.healthBtn.children[0].active = false\r\n            this.healthBtn.children[1].active = true\r\n            this._healthTimer = GameApp.dataManager.getSkillCD()\r\n            this._healthInCD = true\r\n        }\r\n    },\r\n    backBtnClick() {\r\n        GameApp.uiManager.showUI('LoginUI')\r\n    },\r\n    soundBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        var onoff = !GameApp.audioManager._effectOn\r\n        GameApp.audioManager.setEffect(onoff)\r\n        // GameApp.audioManager.setEffect(onoff)\r\n        this.updateSoundBtnShow()\r\n    },\r\n    updateSoundBtnShow() {\r\n        this.soundNode.children[0].active = GameApp.audioManager._effectOn\r\n        this.soundNode.children[1].active = !GameApp.audioManager._effectOn\r\n    },\r\n    updateRecordBtnShow() {\r\n        this.btnArr[0].active = (GameApp.dataManager.globalData.recordState == RecordState.RECORD)\r\n        this.btnArr[1].active = (GameApp.dataManager.globalData.recordState == RecordState.PAUSE || GameApp.dataManager.globalData.recordState == RecordState.READY)\r\n    },\r\n    recordBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        let self = this\r\n        switch (GameApp.dataManager.globalData.recordState) {\r\n            case RecordState.RECORD: Utils.pauseRecord(function () {\r\n                GameApp.dataManager.changeRecordState(RecordState.PAUSE)\r\n                self.updateRecordBtnShow()\r\n            }); break;\r\n            case RecordState.PAUSE: Utils.resumeRecord(function () {\r\n                GameApp.dataManager.changeRecordState(RecordState.RECORD)\r\n                self.updateRecordBtnShow()\r\n            }); break;\r\n            //预备bug情况\r\n            case RecordState.READY: console.log(\"录屏bug了\"); break;\r\n        }\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}