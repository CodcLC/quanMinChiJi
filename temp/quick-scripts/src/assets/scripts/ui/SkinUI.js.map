{"version":3,"sources":["assets\\scripts\\ui\\SkinUI.js"],"names":["Utils","require","cc","Class","Component","properties","scrollView","ScrollView","itemPrefab","Prefab","coinUI","Label","onceClick","visible","onLoad","GameApp","eventManager","on","EventNames","EVENT_UPDATE_COIN_SHOW","updateCoinShow","bind","initData","onDestroy","removeListener","content","removeAllChildren","i","dataManager","jsonData","SkinsData","forEach","skinData","scheduleOnce","item","instantiate","addChild","getComponent","init","string","userData","coinNum","coinBtnClick","window","wx","uiManager","showToast","audioManager","playEffect","self","tt","addVideo","addCoin","_info","backBtnClick","showUI"],"mappings":"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","sourceRoot":"/","sourcesContent":["const Utils = require(\"Utils\")\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        scrollView: cc.ScrollView,\r\n        itemPrefab: cc.Prefab,\r\n        coinUI: cc.Label,\r\n        onceClick: {\r\n            default: true,\r\n            visible: false\r\n        }\r\n    },\r\n\r\n\r\n    onLoad() {\r\n        GameApp.eventManager.on(EventNames.EVENT_UPDATE_COIN_SHOW, this.updateCoinShow.bind(this))\r\n        this.initData()\r\n        this.updateCoinShow()\r\n\r\n    },\r\n    onDestroy() {\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_COIN_SHOW)\r\n    },\r\n    initData() {\r\n        this.scrollView.content.removeAllChildren()\r\n        var i = 0\r\n        GameApp.dataManager.jsonData.SkinsData.forEach(skinData => {\r\n            this.scheduleOnce(() => {\r\n                var item = cc.instantiate(this.itemPrefab)\r\n                this.scrollView.content.addChild(item)\r\n                item.getComponent(\"SkinItem\").init(skinData)\r\n            }, i += 0.05)\r\n        });\r\n    },\r\n    updateCoinShow() {\r\n        this.coinUI.string = GameApp.dataManager.userData.coinNum\r\n    },\r\n    coinBtnClick() {\r\n        if (window.wx) {\r\n            GameApp.uiManager.showToast(\"暂未开放！\")\r\n            return\r\n        }\r\n        if (!this.onceClick) return;\r\n        this.onceClick = false\r\n        GameApp.audioManager.playEffect('click')\r\n        var self = this\r\n\r\n        if (window.tt) {\r\n            Utils.addVideo(\"addVideo\", function () { //看完了\r\n                self.onceClick = true\r\n                GameApp.uiManager.showToast(\"获得500金币\")\r\n                GameApp.dataManager.addCoin(500)\r\n                self.updateCoinShow()\r\n            }, function (_info) { //没看完\r\n                self.onceClick = true\r\n                _info ? GameApp.uiManager.showToast(_info) : GameApp.uiManager.showToast(\"未看完视频！\")\r\n            })\r\n        } else {\r\n            self.onceClick = true\r\n            GameApp.uiManager.showToast(\"非真机,获得500金币\")\r\n            GameApp.dataManager.addCoin(500)\r\n            self.updateCoinShow()\r\n        }\r\n\r\n    },\r\n    backBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.uiManager.showUI('LoginUI')\r\n    },\r\n\r\n});\r\n"]}