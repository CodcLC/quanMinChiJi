{"version":3,"sources":["assets\\scripts\\ui\\GiftPopup.js"],"names":["Utils","require","cc","Class","Component","properties","closeBtnNode","Node","sureBtnNode","nextUIName","_popupType","titleUI","Label","coinSp","coinInfo","speedSp","speedInfo","onceClick","visible","onLoad","node","runAction","sequence","delayTime","callFunc","active","Tools","scaleUpAndDowm","init","_name","_type","string","sureBtnClick","GameApp","audioManager","playEffect","self","window","tt","addVideo","uiManager","showToast","dataManager","addCoin","closeBtnClick","closeBtnClick2","_info","wx","closePopup","showUI","_speedUp","getUI","getComponent","showPlaneUI"],"mappings":"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","sourceRoot":"/","sourcesContent":["const Utils = require(\"Utils\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        closeBtnNode: cc.Node,\r\n        sureBtnNode: cc.Node,\r\n        nextUIName: \"\",\r\n        _popupType: 1,\r\n\r\n        titleUI: cc.Label,\r\n        coinSp: cc.Node,\r\n        coinInfo: cc.Node,\r\n        speedSp: cc.Node,\r\n        speedInfo: cc.Node,\r\n        onceClick: {\r\n            default: true,\r\n            visible: false\r\n        }\r\n    },\r\n\r\n\r\n    onLoad() {\r\n        this.node.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(() => {\r\n            this.closeBtnNode.active = true\r\n        })))\r\n        Tools.scaleUpAndDowm(this.sureBtnNode)\r\n    },\r\n    init(_name, _type) {\r\n        this.nextUIName = _name\r\n        this._popupType = _type\r\n        if (_type == 1) {\r\n            this.titleUI.string = \"金币大礼包\"\r\n            this.coinSp.active = true\r\n            this.coinInfo.active = true\r\n        } else if (_type == 2) {\r\n            this.titleUI.string = \"加速大礼包\"\r\n            this.speedSp.active = true\r\n            this.speedInfo.active = true\r\n        }\r\n\r\n    },\r\n\r\n    sureBtnClick() {\r\n        if (!this.onceClick) return;\r\n        this.onceClick = false\r\n        GameApp.audioManager.playEffect('click')\r\n        var self = this\r\n\r\n        if (window.tt) {\r\n            Utils.addVideo(\"addVideo\", function () { //看完了\r\n                self.onceClick = true\r\n                if (self._popupType == 1) {\r\n                    GameApp.uiManager.showToast(\"获得500金币\")\r\n                    GameApp.dataManager.addCoin(500)\r\n                    self.closeBtnClick()\r\n                } else if (self._popupType == 2) {\r\n                    GameApp.uiManager.showToast(\"获得加速\")\r\n                    self.closeBtnClick2(true)\r\n                }\r\n\r\n            }, function (_info) { //没看完\r\n                self.onceClick = true\r\n                _info ? GameApp.uiManager.showToast(_info) : GameApp.uiManager.showToast(\"未看完视频！\")\r\n            })\r\n        } else {\r\n            if (self._popupType == 1) {\r\n                if (window.wx) {\r\n                    GameApp.uiManager.showToast(\"暂未开放！\")\r\n                    self.closeBtnClick()\r\n                    return\r\n                }\r\n                GameApp.uiManager.showToast(\"福利,获得500金币\")\r\n                GameApp.dataManager.addCoin(500)\r\n                self.closeBtnClick()\r\n            } else if (self._popupType == 2) {\r\n                if (window.wx) {\r\n                    GameApp.uiManager.showToast(\"暂未开放！\")\r\n                    self.closeBtnClick2(true)\r\n                    return\r\n                }\r\n                GameApp.uiManager.showToast(\"福利,获得加速\")\r\n                self.closeBtnClick2(true)\r\n            }\r\n        }\r\n\r\n    },\r\n    closeBtnClick() {\r\n        if (this._popupType == 1) {\r\n            GameApp.audioManager.playEffect('click')\r\n            GameApp.uiManager.closePopup(\"GiftPopup\")\r\n            GameApp.uiManager.showUI(this.nextUIName)\r\n        } else if (this._popupType == 2) {\r\n            this.closeBtnClick2(false)\r\n        }\r\n    },\r\n    closeBtnClick2(_speedUp) {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.uiManager.closePopup(\"GiftPopup\")\r\n        GameApp.uiManager.getUI(\"PrepareUI\").getComponent(\"PrepareUI\").showPlaneUI(_speedUp)\r\n    }\r\n});\r\n"]}