{"version":3,"sources":["assets\\scripts\\ui\\DailyPopup.js"],"names":["Utils","require","cc","Class","Component","properties","dailyGroup","Node","dailyGotNum","type","number","visible","closeBtn","onceClick","onLoad","sys","localStorage","getItem","undefined","setItem","parseInt","initShow","show","sequence","delayTime","scaleTo","runAction","GameApp","dataManager","globalData","curDailyGot","children","getComponent","Button","interactable","active","i","easing","easeBackOut","getBtnClick","eventTouch","customEventData","selectId","audioManager","playEffect","self","callFunc","arr1","arr2","uiManager","showToast","addCoin","getSkinDataById","name","addPieceNum","bind","closeBtnClick","node","destroy"],"mappings":";;;;;;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAEJ,EAAE,CAACK,IADP;AAERC,IAAAA,WAAW,EAAE;AACT,iBAAS,CADA;AAETC,MAAAA,IAAI,EAAEP,EAAE,CAACQ,MAFA;AAGTC,MAAAA,OAAO,EAAE;AAHA,KAFL;AAORC,IAAAA,QAAQ,EAAEV,EAAE,CAACK,IAPL;AASRM,IAAAA,SAAS,EAAE;AATH,GAHP;AAeLC,EAAAA,MAfK,oBAeI;AACL,SAAKN,WAAL,GAAmBN,EAAE,CAACa,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,wBAA5B,CAAnB;;AACA,QAAI,KAAKT,WAAL,IAAoB,IAApB,IAA4B,KAAKA,WAAL,IAAoBU,SAAhD,IAA6D,KAAKV,WAAL,IAAoB,EAArF,EAAyF;AACrF,WAAKA,WAAL,GAAmB,CAAnB;AACAN,MAAAA,EAAE,CAACa,GAAH,CAAOC,YAAP,CAAoBG,OAApB,CAA4B,wBAA5B,EAAsD,CAAtD;AACH,KAHD,MAGO;AACH,WAAKX,WAAL,GAAmBY,QAAQ,CAAC,KAAKZ,WAAN,CAA3B;AACH;;AACD,SAAKa,QAAL;AAEA,QAAIC,IAAI,GAAGpB,EAAE,CAACqB,QAAH,CAAYrB,EAAE,CAACsB,SAAH,CAAa,CAAb,CAAZ,EAA6BtB,EAAE,CAACuB,OAAH,CAAW,GAAX,EAAgB,CAAhB,CAA7B,CAAX;AACA,SAAKb,QAAL,CAAcc,SAAd,CAAwBJ,IAAxB;;AACA,QAAIK,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+BC,WAAnC,EAAgD;AAC5C,WAAKxB,UAAL,CAAgByB,QAAhB,CAAyB,KAAKvB,WAAL,GAAmB,CAA5C,EAA+CwB,YAA/C,CAA4D9B,EAAE,CAAC+B,MAA/D,EAAuEC,YAAvE,GAAsF,KAAtF;AACA,WAAK5B,UAAL,CAAgByB,QAAhB,CAAyB,KAAKvB,WAAL,GAAmB,CAA5C,EAA+CuB,QAA/C,CAAwD,CAAxD,EAA2DI,MAA3D,GAAoE,IAApE;AACH,KAHD,MAGO;AACH,WAAK7B,UAAL,CAAgByB,QAAhB,CAAyB,KAAKvB,WAA9B,EAA2CuB,QAA3C,CAAoD,CAApD,EAAuDI,MAAvD,GAAgE,IAAhE;AACH;AAEJ,GAlCI;AAmCLd,EAAAA,QAnCK,sBAmCM;AACP,QAAI,KAAKb,WAAL,GAAmB,CAAvB,EAA0B;AACtB,WAAK,IAAI4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5B,WAAzB,EAAsC4B,CAAC,EAAvC,EAA2C;AACvC,aAAK9B,UAAL,CAAgByB,QAAhB,CAAyBK,CAAzB,EAA4BL,QAA5B,CAAqC,CAArC,EAAwCL,SAAxC,CAAkDxB,EAAE,CAACuB,OAAH,CAAW,GAAX,EAAgB,CAAhB,EAAmBY,MAAnB,CAA0BnC,EAAE,CAACoC,WAAH,EAA1B,CAAlD;AACH;AACJ;AACJ,GAzCI;AA0CL;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACAC,EAAAA,WA1GK,uBA0GOC,UA1GP,EA0GmBC,eA1GnB,EA0GoC;AACrC,QAAIC,QAAQ,GAAGtB,QAAQ,CAACqB,eAAD,CAAvB;AACA,QAAId,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+BC,WAAnC,EAAgD;AAChD,QAAI,KAAKtB,WAAL,IAAqBkC,QAAQ,GAAG,CAApC,EAAwC;AACxCf,IAAAA,OAAO,CAACgB,YAAR,CAAqBC,UAArB,CAAgC,OAAhC;AACA,QAAIC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAChC,SAAL,GAAiB,IAAjB;AACA,SAAKP,UAAL,CAAgByB,QAAhB,CAAyB,KAAKvB,WAA9B,EAA2CwB,YAA3C,CAAwD9B,EAAE,CAAC+B,MAA3D,EAAmEC,YAAnE,GAAkF,KAAlF;AACAP,IAAAA,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+BC,WAA/B,GAA6C,IAA7C;AACA5B,IAAAA,EAAE,CAACa,GAAH,CAAOC,YAAP,CAAoBG,OAApB,CAA4B,0BAA5B,EAAwD,IAAxD;AACA,SAAKb,UAAL,CAAgByB,QAAhB,CAAyB,KAAKvB,WAA9B,EAA2CuB,QAA3C,CAAoD,CAApD,EAAuDL,SAAvD,CAAiExB,EAAE,CAACqB,QAAH,CAAYrB,EAAE,CAACuB,OAAH,CAAW,GAAX,EAAgB,CAAhB,EAAmBY,MAAnB,CAA0BnC,EAAE,CAACoC,WAAH,EAA1B,CAAZ,EAAyDpC,EAAE,CAAC4C,QAAH,CAAY,YAAY;AAC9I,UAAIC,IAAI,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAX,CAD8I,CAC7G;;AACjC,UAAIC,IAAI,GAAG,CAAC,EAAD,EAAK,CAAL,EAAQ,EAAR,EAAY,CAAZ,EAAe,GAAf,EAAoB,CAApB,EAAuB,GAAvB,CAAX,CAF8I,CAEvG;;AACvC,UAAID,IAAI,CAAC,KAAKvC,WAAN,CAAJ,IAA0B,CAA9B,EAAiC;AAC7BmB,QAAAA,OAAO,CAACsB,SAAR,CAAkBC,SAAlB,CAA4B,UAAUF,IAAI,CAAC,KAAKxC,WAAN,CAA1C;AACAmB,QAAAA,OAAO,CAACC,WAAR,CAAoBuB,OAApB,CAA4BH,IAAI,CAAC,KAAKxC,WAAN,CAAhC;AACH,OAHD,MAGO,IAAIuC,IAAI,CAAC,KAAKvC,WAAN,CAAJ,IAA0B,CAA9B,EAAiC;AACpCmB,QAAAA,OAAO,CAACsB,SAAR,CAAkBC,SAAlB,CAA4B,sBAAsBvB,OAAO,CAACC,WAAR,CAAoBwB,eAApB,CAAoC,EAApC,EAAwCC,IAA9D,GAAqE,cAArE,GAAsFL,IAAI,CAAC,KAAKxC,WAAN,CAAtH;AACAmB,QAAAA,OAAO,CAACC,WAAR,CAAoB0B,WAApB,CAAgC,EAAhC,EAAoCN,IAAI,CAAC,KAAKxC,WAAN,CAAxC;AACH;;AAED,WAAKA,WAAL;;AACA,UAAI,KAAKA,WAAL,IAAoB,CAAxB,EAA2B;AACvB,aAAKA,WAAL,GAAmB,CAAnB;AACH;;AACDN,MAAAA,EAAE,CAACa,GAAH,CAAOC,YAAP,CAAoBG,OAApB,CAA4B,wBAA5B,EAAsD,KAAKX,WAA3D;AAEH,KAjBqI,CAiBpI+C,IAjBoI,CAiB/H,IAjB+H,CAAZ,EAiB5G,IAjB4G,CAAzD,CAAjE;AAkBH,GAtII;AAuILC,EAAAA,aAvIK,2BAuIW;AACZ7B,IAAAA,OAAO,CAACgB,YAAR,CAAqBC,UAArB,CAAgC,OAAhC;AACA,SAAKa,IAAL,CAAUC,OAAV;AACH,GA1II,CA6IL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAxJK,CAAT","sourceRoot":"/","sourcesContent":["const Utils = require(\"Utils\")\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        dailyGroup: cc.Node,\r\n        dailyGotNum: {\r\n            default: 0,\r\n            type: cc.number,\r\n            visible: false\r\n        },\r\n        closeBtn: cc.Node,\r\n\r\n        onceClick: true\r\n    },\r\n\r\n    onLoad() {\r\n        this.dailyGotNum = cc.sys.localStorage.getItem(\"EatChicken_dailyGotNum\")\r\n        if (this.dailyGotNum == null || this.dailyGotNum == undefined || this.dailyGotNum == \"\") {\r\n            this.dailyGotNum = 0\r\n            cc.sys.localStorage.setItem(\"EatChicken_dailyGotNum\", 0)\r\n        } else {\r\n            this.dailyGotNum = parseInt(this.dailyGotNum)\r\n        }\r\n        this.initShow()\r\n\r\n        var show = cc.sequence(cc.delayTime(3), cc.scaleTo(0.3, 1))\r\n        this.closeBtn.runAction(show)\r\n        if (GameApp.dataManager.globalData.curDailyGot) {\r\n            this.dailyGroup.children[this.dailyGotNum - 1].getComponent(cc.Button).interactable = false\r\n            this.dailyGroup.children[this.dailyGotNum - 1].children[0].active = true\r\n        } else {\r\n            this.dailyGroup.children[this.dailyGotNum].children[0].active = true\r\n        }\r\n\r\n    },\r\n    initShow() {\r\n        if (this.dailyGotNum > 0) {\r\n            for (var i = 0; i < this.dailyGotNum; i++) {\r\n                this.dailyGroup.children[i].children[1].runAction(cc.scaleTo(0.5, 1).easing(cc.easeBackOut()))\r\n            }\r\n        }\r\n    },\r\n    // sureBtnClick() {\r\n    //     if (!this.onceClick) return\r\n    //     this.onceClick = false\r\n    //     GameApp.audioManager.playEffect('btn_press')\r\n\r\n    //     var self = this\r\n    //     if (window.tt) {\r\n    //         Utils.addVideo(\"addVideo\", function () { //看完了\r\n    //             self.onceClick = true\r\n    //             self.getBtn.interactable = false\r\n    //             self.skipBtn.interactable = false\r\n    //             self.getBtn.node.stopAllActions()\r\n    //             GameApp.dataManager.globalData.curDailyGot = true\r\n    //             cc.sys.localStorage.setItem(\"EatChicken_dailyGotState\", true);\r\n    //             self.dailyGroup.children[self.dailyGotNum].children[2].runAction(cc.sequence(cc.scaleTo(0.5, 0.5).easing(cc.easeBackOut()), cc.callFunc(function () {\r\n    //                 var arr1 = [1, 2, 1, 2, 1, 2, 2] //物品表\r\n    //                 var arr2 = [1, 1, 2, 2, 3, 3, 4] //数量表\r\n    //                 if (arr1[self.dailyGotNum] == 1) {\r\n    //                     GameApp.uiManager.showToast(\"获取 <color=#0fffff>体力x\" + arr2[self.dailyGotNum] * 2 + \" </color>\")\r\n    //                     GameApp.dataManager.addHealthNum(arr2[self.dailyGotNum] * 2)\r\n    //                 } else if (arr1[self.dailyGotNum] == 2) {\r\n    //                     GameApp.uiManager.showToast(\"获取 <color=#0fffff>提示卡x\" + arr2[self.dailyGotNum] * 2 + \" </color>\")\r\n    //                     GameApp.dataManager.addTipNum(arr2[self.dailyGotNum] * 2)\r\n    //                 }\r\n    //                 self.dailyGotNum++\r\n    //                 if (self.dailyGotNum > 7) {\r\n    //                     self.dailyGotNum = 0\r\n    //                 }\r\n    //                 cc.sys.localStorage.setItem(\"EatChicken_dailyGotNum\", self.dailyGotNum)\r\n\r\n    //             }.bind(self), self)))\r\n\r\n    //         }, function (_info) { //没看完\r\n    //             self.onceClick = true\r\n    //             _info ? GameApp.uiManager.showToast(_info) : GameApp.uiManager.showToast(\"未看完视频\")\r\n    //         })\r\n    //     } else {\r\n    //         self.onceClick = true\r\n    //         this.getBtn.interactable = false\r\n    //         this.skipBtn.interactable = false\r\n    //         this.getBtn.node.stopAllActions()\r\n    //         GameApp.dataManager.globalData.curDailyGot = true\r\n    //         cc.sys.localStorage.setItem(\"EatChicken_dailyGotState\", true);\r\n    //         this.dailyGroup.children[this.dailyGotNum].children[2].runAction(cc.sequence(cc.scaleTo(0.5, 0.5).easing(cc.easeBackOut()), cc.callFunc(function () {\r\n    //             var arr1 = [1, 2, 1, 2, 1, 2, 2] //物品表\r\n    //             var arr2 = [1, 1, 2, 2, 3, 3, 4] //数量表\r\n    //             if (arr1[this.dailyGotNum] == 1) {\r\n    //                 GameApp.uiManager.showToast(\"获取 <color=#0fffff>体力x\" + arr2[this.dailyGotNum] * 2 + \" </color>\")\r\n    //                 GameApp.dataManager.addHealthNum(arr2[this.dailyGotNum] * 2)\r\n    //             } else if (arr1[this.dailyGotNum] == 2) {\r\n    //                 GameApp.uiManager.showToast(\"获取 <color=#0fffff>提示卡x\" + arr2[this.dailyGotNum] * 2 + \" </color>\")\r\n    //                 GameApp.dataManager.addTipNum(arr2[this.dailyGotNum] * 2)\r\n    //             }\r\n\r\n    //             this.dailyGotNum++\r\n    //             if (this.dailyGotNum == 7) {\r\n    //                 this.dailyGotNum = 0\r\n    //             }\r\n    //             cc.sys.localStorage.setItem(\"EatChicken_dailyGotNum\", this.dailyGotNum)\r\n\r\n    //         }.bind(this), this)))\r\n\r\n    //     }\r\n    // },\r\n    getBtnClick(eventTouch, customEventData) {\r\n        var selectId = parseInt(customEventData)\r\n        if (GameApp.dataManager.globalData.curDailyGot) return\r\n        if (this.dailyGotNum != (selectId - 1)) return\r\n        GameApp.audioManager.playEffect('click')\r\n        var self = this\r\n        self.onceClick = true\r\n        this.dailyGroup.children[this.dailyGotNum].getComponent(cc.Button).interactable = false\r\n        GameApp.dataManager.globalData.curDailyGot = true\r\n        cc.sys.localStorage.setItem(\"EatChicken_dailyGotState\", true);\r\n        this.dailyGroup.children[this.dailyGotNum].children[1].runAction(cc.sequence(cc.scaleTo(0.5, 1).easing(cc.easeBackOut()), cc.callFunc(function () {\r\n            var arr1 = [1, 2, 1, 2, 1, 2, 1] //物品表\r\n            var arr2 = [50, 5, 50, 5, 100, 5, 500] //数量表\r\n            if (arr1[this.dailyGotNum] == 1) {\r\n                GameApp.uiManager.showToast(\"获得金币*\" + arr2[this.dailyGotNum])\r\n                GameApp.dataManager.addCoin(arr2[this.dailyGotNum])\r\n            } else if (arr1[this.dailyGotNum] == 2) {\r\n                GameApp.uiManager.showToast(\"获得<color=#faf80d>\" + GameApp.dataManager.getSkinDataById(27).name + \"</color> 碎片*\" + arr2[this.dailyGotNum]);\r\n                GameApp.dataManager.addPieceNum(27, arr2[this.dailyGotNum])\r\n            }\r\n\r\n            this.dailyGotNum++\r\n            if (this.dailyGotNum == 7) {\r\n                this.dailyGotNum = 0\r\n            }\r\n            cc.sys.localStorage.setItem(\"EatChicken_dailyGotNum\", this.dailyGotNum)\r\n\r\n        }.bind(this), this)))\r\n    },\r\n    closeBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        this.node.destroy()\r\n    },\r\n\r\n\r\n    // var delay = cc.delayTime(0.01)\r\n    //     var act = cc.callFunc(function () {\r\n    //     this.winSprite.fillRange += 0.01\r\n    //     if (this.winSprite.fillRange >= 1) {\r\n    //         this.winSprite.node.stopAllActions()\r\n    //         GameApp.uiManager.showPopup('ResultPopup', function (node) {\r\n    //             var popup = node.getComponent('ResultPopup')\r\n    //             popup.init(true)\r\n    //         }.bind(this))\r\n    //     }\r\n    // }.bind(this), this)\r\n    //     this.winSprite.node.runAction(cc.sequence(delay, act).repeatForever())\r\n});\r\n"]}