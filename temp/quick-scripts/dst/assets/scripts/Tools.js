
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Tools.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '22582a+jCBHjZflQ11fhZCr', 'Tools');
// scripts/Tools.js

"use strict";

window.Tools = {
  addClickEvent: function addClickEvent(node, target, component, handler, customEventData) {
    // console.log(component + ":" + handler);
    var eventHandler = new cc.Component.EventHandler();
    eventHandler.target = target;
    eventHandler.component = component;
    eventHandler.handler = handler;

    if (customEventData) {
      eventHandler.customEventData = customEventData;
    }

    node.getComponent(cc.Button).clickEvents = [];
    node.getComponent(cc.Button).clickEvents.push(eventHandler);
  },
  //生成从minNum到maxNum的随机数(包含上限)
  randomNum: function randomNum(minNum, maxNum, _float) {
    if (_float) {
      return Math.random() * (maxNum - minNum + 1) + minNum;
    }

    return Math.floor(Math.random() * (maxNum - minNum + 1) + minNum);
  },
  //从数组arr内获取随机1个元素(可重复)
  getRandomElement: function getRandomElement(arr) {
    var num = arr.length;

    if (num > 0) {
      var i = Math.floor(Math.random() * num);
      if (i == num) i = num - 1;
      return arr[i];
    } else return null;
  },
  //获取数组arr内随机amount个元素且不会重复(返回对象新增了所有随机元素的下标数组)
  getRandomAmountElementUnRepeat: function getRandomAmountElementUnRepeat(arr, amount) {
    var arrLength = arr.length;

    if (amount >= arrLength) {
      var desArr = {
        nodeArr: arr,
        indexArr: []
      };

      for (var i = 0; i < arr.length; i++) {
        desArr.indexArr.push(i);
      }

      return desArr;
    } else if (amount <= 0) {
      return null;
    } else {
      //这里对于此项目做了特化处理
      var desArr = {
        nodeArr: [],
        indexArr: []
      };
      var tempArr = [];
      var temp = null;

      for (var i = 0; i < amount; i++) {
        do {
          temp = Math.floor(Math.random() * arrLength);
        } while (tempArr.indexOf(temp) > -1);

        tempArr.push(temp);
        desArr.nodeArr.push(arr[temp]);
        desArr.indexArr.push(temp);
      }

      return desArr;
    }
  },
  isCrit: function isCrit(_num) {
    var arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
    var result = this.getRandomAmountElementUnRepeat(arr, _num);

    if (result == null) {
      return false;
    } else {
      if (result.nodeArr.indexOf(7) != -1) {
        return true;
      } else {
        return false;
      }
    }
  },
  getIndex: function getIndex(_arr, _obj) {
    var len = _arr.length;

    for (var i = 0; i < len; i++) {
      if (_arr[i] == _obj) {
        return parseInt(i);
      }
    }

    return -1;
  },
  removeArray: function removeArray(_arr, _obj) {
    var length = _arr.length;

    for (var i = 0; i < length; i++) {
      if (_arr[i] == _obj) {
        if (i == 0) {
          _arr.shift(); //删除并返回数组的第一个元素


          return _arr;
        } else if (i == length - 1) {
          _arr.pop(); //删除并返回数组的最后一个元素


          return _arr;
        } else {
          _arr.splice(i, 1); //删除下标为i的元素


          return _arr;
        }
      }
    }
  },
  /// <summary>
  /// 在圆心为point，半径为radius的圆内，产生一个半径为radius_inner的圆的圆心
  /// </summary>
  /// <param name="point">外圆圆心</param>
  /// <param name="radius_outer">外圆半径</param>
  /// <param name="radius_inner">内圆半径</param>
  /// <returns>内圆圆心</returns>
  pointOfRandom: function pointOfRandom(point, radius_outer, radius_inner) {
    var x = Tools.randomNum(Math.floor(point.x - (radius_outer - radius_inner)), Math.floor(point.x + (radius_outer - radius_inner)));
    var y = Tools.randomNum(Math.floor(point.y - (radius_outer - radius_inner)), Math.floor(point.y + (radius_outer - radius_inner)));

    while (!this.isInRegion(x - point.x, y - point.y, radius_outer - radius_inner)) {
      x = Tools.randomNum(Math.floor(point.x - (radius_outer - radius_inner)), Math.floor(point.x + (radius_outer - radius_inner)));
      y = Tools.randomNum(Math.floor(point.y - (radius_outer - radius_inner)), Math.floor(point.y + (radius_outer - radius_inner)));
    }

    var p = cc.v2(x, y);
    return p;
  },
  /// <param name="x_off">与大圆圆心的x方向偏移量</param>
  /// <param name="y_off">与大圆圆心的y方向偏移量</param>
  /// <param name="distance">大圆与小圆半径的差</param>
  /// <returns>判断点是否在范围内</returns>
  isInRegion: function isInRegion(x_off, y_off, distance) {
    if (x_off * x_off + y_off * y_off <= distance * distance) {
      return true;
    }

    return false;
  },
  /// <summary>
  /// 判断两个圆是否重合，或者是相内切
  /// </summary>
  /// <param name="p_outer">外圆圆心</param>
  /// <param name="r_outer">外圆半径</param>
  /// <param name="p_inner">内圆圆心</param>
  /// <param name="r_inner">内圆半径</param>
  /// <returns>是否相内切</returns>
  isIntersect: function isIntersect(p_outer, r_outer, p_inner, r_inner) {
    //判定条件：两圆心的距离 + r_inner = r_outer
    var distance = parseFloat(Math.sqrt((p_outer.x - p_inner.x) * (p_outer.x - p_inner.x) + (p_outer.y - p_inner.y) * (p_outer.y - p_inner.y)));

    if (distance + r_inner >= r_outer) {
      return true;
    }

    return false;
  },
  scaleUpAndDowm: function scaleUpAndDowm(target, isShining, light) {
    target.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(0.3, 1.1).easing(cc.easeIn(2)), cc.scaleTo(0.6, 0.9).easing(cc.easeIn(2)), cc.scaleTo(0.6, 1.1).easing(cc.easeIn(2)), cc.scaleTo(0.6, 0.9).easing(cc.easeIn(2)))));

    if (isShining) {
      light.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(0.3).easing(cc.easeIn(2)), cc.fadeOut(0.6).easing(cc.easeIn(2)), cc.fadeIn(0.6).easing(cc.easeIn(2)), cc.fadeOut(0.6).easing(cc.easeIn(2)))));
    }
  },
  shake: function shake(target) {
    target.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(0.1, 5).easing(cc.easeIn(2)), cc.rotateTo(0.2, -5).easing(cc.easeIn(2)), cc.rotateTo(0.2, 5).easing(cc.easeIn(2)), cc.rotateTo(0.1, 0).easing(cc.easeIn(2)), cc.delayTime(0.5))));
  },
  // 0   , 0.2 , 0.2 , 0.6
  //     0.2, 0.2 , 0.2 , 0.4
  //     0.4, 0.2 , 0.2 , 0.2
  //     0.6, 0.2 , 0.2 , 0
  jumpOneByOne: function jumpOneByOne(target) {
    var nodeNum = target.childrenCount;

    for (var i = 0; i < nodeNum; i++) {
      target.children[i].runAction(cc.sequence(cc.delayTime(i * 0.2), cc.scaleTo(0.2, 1.3).easing(cc.easeBackOut()), cc.scaleTo(0.2, 1), cc.delayTime((nodeNum - 1 - i) * 0.2 + 1)).repeatForever());
    }
  },
  // 本地时间戳->2018/8/8
  toDateFormat: function toDateFormat() {
    var date = new Date();
    date = new Date(date.getTime());
    return {
      year: date.getFullYear(),
      month: date.getMonth() + 1,
      day: date.getDate()
    };
  },
  // 秒->08:08:08
  toTimeString2: function toTimeString2(s) {
    if (s <= 0) {
      return "00:00:00";
    }

    s = Math.floor(s);
    var hour = Math.floor(s / (60 * 60));
    s -= hour * (60 * 60);
    var minute = Math.floor(s / 60);
    s -= minute * 60;
    var ret = '';

    if (hour > 0) {
      ret += hour < 10 ? '0' + hour : hour;
    } else {
      ret += '00';
    }

    ret += ':';

    if (minute > 0) {
      ret += minute < 10 ? '0' + minute : minute;
    } else {
      ret += '00';
    }

    ret += ':';

    if (s > 0) {
      ret += s < 10 ? '0' + s : s;
    } else {
      ret += '00';
    } //return ret;


    return {
      hour: hour,
      minute: minute,
      s: s
    };
  },
  // 秒->08:08:08
  toTimeString: function toTimeString(s) {
    if (s <= 0) {
      return "00:00";
    }

    s = Math.floor(s);
    var hour = Math.floor(s / (60 * 60));
    s -= hour * (60 * 60);
    var minute = Math.floor(s / 60);
    s -= minute * 60;
    var ret = ''; // if (hour > 0) {
    //     ret += hour < 10 ? '0' + hour : hour
    // } else {
    //     ret += '00'
    // }
    // ret += ':'

    if (minute > 0) {
      ret += minute < 10 ? '0' + minute : minute;
    } else {
      ret += '00';
    }

    ret += ':';

    if (s > 0) {
      ret += s < 10 ? '0' + s : s;
    } else {
      ret += '00';
    }

    return ret; // return {
    //     hour: hour,
    //     minute: minute,
    //     s: s,
    // }
  },
  addNegativeCaculation: function addNegativeCaculation(isNegative, num, rate, strName) {
    return isNegative ? "-" + this.calculation(num, rate, strName) : this.calculation(num, rate, strName);
  },
  // calculation number
  calculation: function calculation(num, rate, strName) {
    var n1 = Math.floor(num / rate);
    var n2 = Math.floor(num % rate / rate * 10);

    if (n2 === 0) {
      return n1 + strName;
    } else {
      return n1 + "." + n2 + strName;
    }
  }
};

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcVG9vbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiVG9vbHMiLCJhZGRDbGlja0V2ZW50Iiwibm9kZSIsInRhcmdldCIsImNvbXBvbmVudCIsImhhbmRsZXIiLCJjdXN0b21FdmVudERhdGEiLCJldmVudEhhbmRsZXIiLCJjYyIsIkNvbXBvbmVudCIsIkV2ZW50SGFuZGxlciIsImdldENvbXBvbmVudCIsIkJ1dHRvbiIsImNsaWNrRXZlbnRzIiwicHVzaCIsInJhbmRvbU51bSIsIm1pbk51bSIsIm1heE51bSIsIl9mbG9hdCIsIk1hdGgiLCJyYW5kb20iLCJmbG9vciIsImdldFJhbmRvbUVsZW1lbnQiLCJhcnIiLCJudW0iLCJsZW5ndGgiLCJpIiwiZ2V0UmFuZG9tQW1vdW50RWxlbWVudFVuUmVwZWF0IiwiYW1vdW50IiwiYXJyTGVuZ3RoIiwiZGVzQXJyIiwibm9kZUFyciIsImluZGV4QXJyIiwidGVtcEFyciIsInRlbXAiLCJpbmRleE9mIiwiaXNDcml0IiwiX251bSIsInJlc3VsdCIsImdldEluZGV4IiwiX2FyciIsIl9vYmoiLCJsZW4iLCJwYXJzZUludCIsInJlbW92ZUFycmF5Iiwic2hpZnQiLCJwb3AiLCJzcGxpY2UiLCJwb2ludE9mUmFuZG9tIiwicG9pbnQiLCJyYWRpdXNfb3V0ZXIiLCJyYWRpdXNfaW5uZXIiLCJ4IiwieSIsImlzSW5SZWdpb24iLCJwIiwidjIiLCJ4X29mZiIsInlfb2ZmIiwiZGlzdGFuY2UiLCJpc0ludGVyc2VjdCIsInBfb3V0ZXIiLCJyX291dGVyIiwicF9pbm5lciIsInJfaW5uZXIiLCJwYXJzZUZsb2F0Iiwic3FydCIsInNjYWxlVXBBbmREb3dtIiwiaXNTaGluaW5nIiwibGlnaHQiLCJydW5BY3Rpb24iLCJyZXBlYXRGb3JldmVyIiwic2VxdWVuY2UiLCJzY2FsZVRvIiwiZWFzaW5nIiwiZWFzZUluIiwiZmFkZUluIiwiZmFkZU91dCIsInNoYWtlIiwicm90YXRlVG8iLCJkZWxheVRpbWUiLCJqdW1wT25lQnlPbmUiLCJub2RlTnVtIiwiY2hpbGRyZW5Db3VudCIsImNoaWxkcmVuIiwiZWFzZUJhY2tPdXQiLCJ0b0RhdGVGb3JtYXQiLCJkYXRlIiwiRGF0ZSIsImdldFRpbWUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsImdldE1vbnRoIiwiZGF5IiwiZ2V0RGF0ZSIsInRvVGltZVN0cmluZzIiLCJzIiwiaG91ciIsIm1pbnV0ZSIsInJldCIsInRvVGltZVN0cmluZyIsImFkZE5lZ2F0aXZlQ2FjdWxhdGlvbiIsImlzTmVnYXRpdmUiLCJyYXRlIiwic3RyTmFtZSIsImNhbGN1bGF0aW9uIiwibjEiLCJuMiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQUEsTUFBTSxDQUFDQyxLQUFQLEdBQWU7QUFDWEMsRUFBQUEsYUFBYSxFQUFFLHVCQUFVQyxJQUFWLEVBQWdCQyxNQUFoQixFQUF3QkMsU0FBeEIsRUFBbUNDLE9BQW5DLEVBQTRDQyxlQUE1QyxFQUE2RDtBQUN4RTtBQUNBLFFBQUlDLFlBQVksR0FBRyxJQUFJQyxFQUFFLENBQUNDLFNBQUgsQ0FBYUMsWUFBakIsRUFBbkI7QUFDQUgsSUFBQUEsWUFBWSxDQUFDSixNQUFiLEdBQXNCQSxNQUF0QjtBQUNBSSxJQUFBQSxZQUFZLENBQUNILFNBQWIsR0FBeUJBLFNBQXpCO0FBQ0FHLElBQUFBLFlBQVksQ0FBQ0YsT0FBYixHQUF1QkEsT0FBdkI7O0FBQ0EsUUFBSUMsZUFBSixFQUFxQjtBQUNqQkMsTUFBQUEsWUFBWSxDQUFDRCxlQUFiLEdBQStCQSxlQUEvQjtBQUNIOztBQUVESixJQUFBQSxJQUFJLENBQUNTLFlBQUwsQ0FBa0JILEVBQUUsQ0FBQ0ksTUFBckIsRUFBNkJDLFdBQTdCLEdBQTJDLEVBQTNDO0FBQ0FYLElBQUFBLElBQUksQ0FBQ1MsWUFBTCxDQUFrQkgsRUFBRSxDQUFDSSxNQUFyQixFQUE2QkMsV0FBN0IsQ0FBeUNDLElBQXpDLENBQThDUCxZQUE5QztBQUNILEdBYlU7QUFlWDtBQUNBUSxF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c291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG53aW5kb3cuVG9vbHMgPSB7XHJcbiAgICBhZGRDbGlja0V2ZW50OiBmdW5jdGlvbiAobm9kZSwgdGFyZ2V0LCBjb21wb25lbnQsIGhhbmRsZXIsIGN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNvbXBvbmVudCArIFwiOlwiICsgaGFuZGxlcik7XHJcbiAgICAgICAgdmFyIGV2ZW50SGFuZGxlciA9IG5ldyBjYy5Db21wb25lbnQuRXZlbnRIYW5kbGVyKCk7XHJcbiAgICAgICAgZXZlbnRIYW5kbGVyLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICBldmVudEhhbmRsZXIuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIGV2ZW50SGFuZGxlci5oYW5kbGVyID0gaGFuZGxlcjtcclxuICAgICAgICBpZiAoY3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgICAgIGV2ZW50SGFuZGxlci5jdXN0b21FdmVudERhdGEgPSBjdXN0b21FdmVudERhdGFcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5vZGUuZ2V0Q29tcG9uZW50KGNjLkJ1dHRvbikuY2xpY2tFdmVudHMgPSBbXTtcclxuICAgICAgICBub2RlLmdldENvbXBvbmVudChjYy5CdXR0b24pLmNsaWNrRXZlbnRzLnB1c2goZXZlbnRIYW5kbGVyKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/nlJ/miJDku45taW5OdW3liLBtYXhOdW3nmoTpmo/mnLrmlbAo5YyF5ZCr5LiK6ZmQKVxyXG4gICAgcmFuZG9tTnVtOiBmdW5jdGlvbiAobWluTnVtLCBtYXhOdW0sIF9mbG9hdCkge1xyXG4gICAgICAgIGlmIChfZmxvYXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4TnVtIC0gbWluTnVtICsgMSkgKyBtaW5OdW1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXhOdW0gLSBtaW5OdW0gKyAxKSArIG1pbk51bSk7XHJcbiAgICB9LFxyXG4gICAgLy/ku47mlbDnu4RhcnLlhoXojrflj5bpmo/mnLox5Liq5YWD57SgKOWPr+mHjeWkjSlcclxuICAgIGdldFJhbmRvbUVsZW1lbnQ6IGZ1bmN0aW9uIChhcnIpIHtcclxuICAgICAgICBsZXQgbnVtID0gYXJyLmxlbmd0aFxyXG4gICAgICAgIGlmIChudW0gPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtKVxyXG4gICAgICAgICAgICBpZiAoaSA9PSBudW0pIGkgPSBudW0gLSAxXHJcbiAgICAgICAgICAgIHJldHVybiBhcnJbaV1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5pWw57uEYXJy5YaF6ZqP5py6YW1vdW505Liq5YWD57Sg5LiU5LiN5Lya6YeN5aSNKOi/lOWbnuWvueixoeaWsOWinuS6huaJgOaciemaj+acuuWFg+e0oOeahOS4i+agh+aVsOe7hClcclxuICAgIGdldFJhbmRvbUFtb3VudEVsZW1lbnRVblJlcGVhdDogZnVuY3Rpb24gKGFyciwgYW1vdW50KSB7XHJcbiAgICAgICAgbGV0IGFyckxlbmd0aCA9IGFyci5sZW5ndGhcclxuICAgICAgICBpZiAoYW1vdW50ID49IGFyckxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgZGVzQXJyID0ge1xyXG4gICAgICAgICAgICAgICAgbm9kZUFycjogYXJyLFxyXG4gICAgICAgICAgICAgICAgaW5kZXhBcnI6IFtdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkZXNBcnIuaW5kZXhBcnIucHVzaChpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkZXNBcnJcclxuICAgICAgICB9IGVsc2UgaWYgKGFtb3VudCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8v6L+Z6YeM5a+55LqO5q2k6aG555uu5YGa5LqG54m55YyW5aSE55CGXHJcbiAgICAgICAgICAgIHZhciBkZXNBcnIgPSB7XHJcbiAgICAgICAgICAgICAgICBub2RlQXJyOiBbXSxcclxuICAgICAgICAgICAgICAgIGluZGV4QXJyOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgdGVtcEFyciA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgdGVtcCA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgfSB3aGlsZSAodGVtcEFyci5pbmRleE9mKHRlbXApID4gLTEpXHJcbiAgICAgICAgICAgICAgICB0ZW1wQXJyLnB1c2godGVtcClcclxuICAgICAgICAgICAgICAgIGRlc0Fyci5ub2RlQXJyLnB1c2goYXJyW3RlbXBdKVxyXG4gICAgICAgICAgICAgICAgZGVzQXJyLmluZGV4QXJyLnB1c2godGVtcClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGVzQXJyXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGlzQ3JpdChfbnVtKSB7XHJcbiAgICAgICAgdmFyIGFyciA9IFswLCAxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5XVxyXG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmdldFJhbmRvbUFtb3VudEVsZW1lbnRVblJlcGVhdChhcnIsIF9udW0pXHJcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQubm9kZUFyci5pbmRleE9mKDcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZ2V0SW5kZXg6IGZ1bmN0aW9uIChfYXJyLCBfb2JqKSB7XHJcbiAgICAgICAgdmFyIGxlbiA9IF9hcnIubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKF9hcnJbaV0gPT0gX29iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVBcnJheTogZnVuY3Rpb24gKF9hcnIsIF9vYmopIHtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gX2Fyci5sZW5ndGg7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoX2FycltpXSA9PSBfb2JqKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fyci5zaGlmdCgpOyAvL+WIoOmZpOW5tui/lOWbnuaVsOe7hOeahOesrOS4gOS4quWFg+e0oFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfYXJyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSBsZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fyci5wb3AoKTsgIC8v5Yig6Zmk5bm26L+U5Zue5pWw57uE55qE5pyA5ZCO5LiA5Liq5YWD57SgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hcnI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfYXJyLnNwbGljZShpLCAxKTsgLy/liKDpmaTkuIvmoIfkuLpp55qE5YWD57SgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hcnI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vLyA8c3VtbWFyeT5cclxuICAgIC8vLyDlnKjlnIblv4PkuLpwb2ludO+8jOWNiuW+hOS4unJhZGl1c+eahOWchuWGhe+8jOS6p+eUn+S4gOS4quWNiuW+hOS4unJhZGl1c19pbm5lcueahOWchueahOWchuW/g1xyXG4gICAgLy8vIDwvc3VtbWFyeT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInBvaW50XCI+5aSW5ZyG5ZyG5b+DPC9wYXJhbT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInJhZGl1c19vdXRlclwiPuWkluWchuWNiuW+hDwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJyYWRpdXNfaW5uZXJcIj7lhoXlnIbljYrlvoQ8L3BhcmFtPlxyXG4gICAgLy8vIDxyZXR1cm5zPuWGheWchuWchuW/gzwvcmV0dXJucz5cclxuICAgIHBvaW50T2ZSYW5kb20ocG9pbnQsIHJhZGl1c19vdXRlciwgcmFkaXVzX2lubmVyKSB7XHJcbiAgICAgICAgdmFyIHggPSBUb29scy5yYW5kb21OdW0oTWF0aC5mbG9vcihwb2ludC54IC0gKHJhZGl1c19vdXRlciAtIHJhZGl1c19pbm5lcikpLCBNYXRoLmZsb29yKHBvaW50LnggKyAocmFkaXVzX291dGVyIC0gcmFkaXVzX2lubmVyKSkpO1xyXG4gICAgICAgIHZhciB5ID0gVG9vbHMucmFuZG9tTnVtKE1hdGguZmxvb3IocG9pbnQueSAtIChyYWRpdXNfb3V0ZXIgLSByYWRpdXNfaW5uZXIpKSwgTWF0aC5mbG9vcihwb2ludC55ICsgKHJhZGl1c19vdXRlciAtIHJhZGl1c19pbm5lcikpKTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCF0aGlzLmlzSW5SZWdpb24oeCAtIHBvaW50LngsIHkgLSBwb2ludC55LCByYWRpdXNfb3V0ZXIgLSByYWRpdXNfaW5uZXIpKSB7XHJcbiAgICAgICAgICAgIHggPSBUb29scy5yYW5kb21OdW0oTWF0aC5mbG9vcihwb2ludC54IC0gKHJhZGl1c19vdXRlciAtIHJhZGl1c19pbm5lcikpLCBNYXRoLmZsb29yKHBvaW50LnggKyAocmFkaXVzX291dGVyIC0gcmFkaXVzX2lubmVyKSkpO1xyXG4gICAgICAgICAgICB5ID0gVG9vbHMucmFuZG9tTnVtKE1hdGguZmxvb3IocG9pbnQueSAtIChyYWRpdXNfb3V0ZXIgLSByYWRpdXNfaW5uZXIpKSwgTWF0aC5mbG9vcihwb2ludC55ICsgKHJhZGl1c19vdXRlciAtIHJhZGl1c19pbm5lcikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwID0gY2MudjIoeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9LFxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwieF9vZmZcIj7kuI7lpKflnIblnIblv4PnmoR45pa55ZCR5YGP56e76YePPC9wYXJhbT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInlfb2ZmXCI+5LiO5aSn5ZyG5ZyG5b+D55qEeeaWueWQkeWBj+enu+mHjzwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJkaXN0YW5jZVwiPuWkp+WchuS4juWwj+WchuWNiuW+hOeahOW3rjwvcGFyYW0+XHJcbiAgICAvLy8gPHJldHVybnM+5Yik5pat54K55piv5ZCm5Zyo6IyD5Zu05YaFPC9yZXR1cm5zPlxyXG4gICAgaXNJblJlZ2lvbih4X29mZiwgeV9vZmYsIGRpc3RhbmNlKSB7XHJcbiAgICAgICAgaWYgKHhfb2ZmICogeF9vZmYgKyB5X29mZiAqIHlfb2ZmIDw9IGRpc3RhbmNlICogZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAvLy8g5Yik5pat5Lik5Liq5ZyG5piv5ZCm6YeN5ZCI77yM5oiW6ICF5piv55u45YaF5YiHXHJcbiAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwicF9vdXRlclwiPuWkluWchuWchuW/gzwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJyX291dGVyXCI+5aSW5ZyG5Y2K5b6EPC9wYXJhbT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInBfaW5uZXJcIj7lhoXlnIblnIblv4M8L3BhcmFtPlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwicl9pbm5lclwiPuWGheWchuWNiuW+hDwvcGFyYW0+XHJcbiAgICAvLy8gPHJldHVybnM+5piv5ZCm55u45YaF5YiHPC9yZXR1cm5zPlxyXG4gICAgaXNJbnRlcnNlY3QocF9vdXRlciwgcl9vdXRlciwgcF9pbm5lciwgcl9pbm5lcikge1xyXG4gICAgICAgIC8v5Yik5a6a5p2h5Lu277ya5Lik5ZyG5b+D55qE6Led56a7ICsgcl9pbm5lciA9IHJfb3V0ZXJcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSBwYXJzZUZsb2F0KE1hdGguc3FydCgocF9vdXRlci54IC0gcF9pbm5lci54KSAqIChwX291dGVyLnggLSBwX2lubmVyLngpICsgKHBfb3V0ZXIueSAtIHBfaW5uZXIueSkgKiAocF9vdXRlci55IC0gcF9pbm5lci55KSkpXHJcbiAgICAgICAgaWYgKGRpc3RhbmNlICsgcl9pbm5lciA+PSByX291dGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIHNjYWxlVXBBbmREb3dtOiBmdW5jdGlvbiAodGFyZ2V0LCBpc1NoaW5pbmcsIGxpZ2h0KSB7XHJcbiAgICAgICAgdGFyZ2V0LnJ1bkFjdGlvbihjYy5yZXBlYXRGb3JldmVyKGNjLnNlcXVlbmNlKFxyXG4gICAgICAgICAgICBjYy5zY2FsZVRvKDAuMywgMS4xKS5lYXNpbmcoY2MuZWFzZUluKDIpKSxcclxuICAgICAgICAgICAgY2Muc2NhbGVUbygwLjYsIDAuOSkuZWFzaW5nKGNjLmVhc2VJbigyKSksXHJcbiAgICAgICAgICAgIGNjLnNjYWxlVG8oMC42LCAxLjEpLmVhc2luZyhjYy5lYXNlSW4oMikpLFxyXG4gICAgICAgICAgICBjYy5zY2FsZVRvKDAuNiwgMC45KS5lYXNpbmcoY2MuZWFzZUluKDIpKSxcclxuICAgICAgICApKSk7XHJcbiAgICAgICAgaWYgKGlzU2hpbmluZykge1xyXG4gICAgICAgICAgICBsaWdodC5ydW5BY3Rpb24oY2MucmVwZWF0Rm9yZXZlcihjYy5zZXF1ZW5jZShcclxuICAgICAgICAgICAgICAgIGNjLmZhZGVJbigwLjMpLmVhc2luZyhjYy5lYXNlSW4oMikpLFxyXG4gICAgICAgICAgICAgICAgY2MuZmFkZU91dCgwLjYpLmVhc2luZyhjYy5lYXNlSW4oMikpLFxyXG4gICAgICAgICAgICAgICAgY2MuZmFkZUluKDAuNikuZWFzaW5nKGNjLmVhc2VJbigyKSksXHJcbiAgICAgICAgICAgICAgICBjYy5mYWRlT3V0KDAuNikuZWFzaW5nKGNjLmVhc2VJbigyKSksXHJcbiAgICAgICAgICAgICkpKVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzaGFrZTogZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHRhcmdldC5ydW5BY3Rpb24oY2MucmVwZWF0Rm9yZXZlcihjYy5zZXF1ZW5jZShcclxuICAgICAgICAgICAgY2Mucm90YXRlVG8oMC4xLCA1KS5lYXNpbmcoY2MuZWFzZUluKDIpKSxcclxuICAgICAgICAgICAgY2Mucm90YXRlVG8oMC4yLCAtNSkuZWFzaW5nKGNjLmVhc2VJbigyKSksXHJcbiAgICAgICAgICAgIGNjLnJvdGF0ZVRvKDAuMiwgNSkuZWFzaW5nKGNjLmVhc2VJbigyKSksXHJcbiAgICAgICAgICAgIGNjLnJvdGF0ZVRvKDAuMSwgMCkuZWFzaW5nKGNjLmVhc2VJbigyKSksXHJcbiAgICAgICAgICAgIGNjLmRlbGF5VGltZSgwLjUpXHJcbiAgICAgICAgKSkpO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy8gMCAgICwgMC4yICwgMC4yICwgMC42XHJcbiAgICAvLyAgICAgMC4yLCAwLjIgLCAwLjIgLCAwLjRcclxuICAgIC8vICAgICAwLjQsIDAuMiAsIDAuMiAsIDAuMlxyXG4gICAgLy8gICAgIDAuNiwgMC4yICwgMC4yICwgMFxyXG5cclxuXHJcbiAgICBqdW1wT25lQnlPbmU6IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuXHJcbiAgICAgICAgdmFyIG5vZGVOdW0gPSB0YXJnZXQuY2hpbGRyZW5Db3VudFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZU51bTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5jaGlsZHJlbltpXS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKGkgKiAwLjIpLCBjYy5zY2FsZVRvKDAuMiwgMS4zKS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoKSksIGNjLnNjYWxlVG8oMC4yLCAxKSwgY2MuZGVsYXlUaW1lKChub2RlTnVtIC0gMSAtIGkpICogMC4yICsgMSkpLnJlcGVhdEZvcmV2ZXIoKSlcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8g5pys5Zyw5pe26Ze05oizLT4yMDE4LzgvOFxyXG4gICAgdG9EYXRlRm9ybWF0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICBtb250aDogKGRhdGUuZ2V0TW9udGgoKSArIDEpLFxyXG4gICAgICAgICAgICBkYXk6IGRhdGUuZ2V0RGF0ZSgpXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIOenki0+MDg6MDg6MDhcclxuICAgIHRvVGltZVN0cmluZzI6IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgaWYgKHMgPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIwMDowMDowMFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzID0gTWF0aC5mbG9vcihzKTtcclxuICAgICAgICBsZXQgaG91ciA9IE1hdGguZmxvb3IocyAvICg2MCAqIDYwKSk7XHJcbiAgICAgICAgcyAtPSBob3VyICogKDYwICogNjApO1xyXG4gICAgICAgIGxldCBtaW51dGUgPSBNYXRoLmZsb29yKHMgLyA2MCk7XHJcbiAgICAgICAgcyAtPSBtaW51dGUgKiA2MDtcclxuICAgICAgICBsZXQgcmV0ID0gJyc7XHJcbiAgICAgICAgaWYgKGhvdXIgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldCArPSBob3VyIDwgMTAgPyAnMCcgKyBob3VyIDogaG91clxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldCArPSAnMDAnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldCArPSAnOidcclxuICAgICAgICBpZiAobWludXRlID4gMCkge1xyXG4gICAgICAgICAgICByZXQgKz0gbWludXRlIDwgMTAgPyAnMCcgKyBtaW51dGUgOiBtaW51dGVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXQgKz0gJzAwJ1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXQgKz0gJzonXHJcbiAgICAgICAgaWYgKHMgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldCArPSBzIDwgMTAgPyAnMCcgKyBzIDogc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldCArPSAnMDAnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vcmV0dXJuIHJldDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBob3VyOiBob3VyLFxyXG4gICAgICAgICAgICBtaW51dGU6IG1pbnV0ZSxcclxuICAgICAgICAgICAgczogcyxcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvLyDnp5ItPjA4OjA4OjA4XHJcbiAgICB0b1RpbWVTdHJpbmc6IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgaWYgKHMgPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIwMDowMFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzID0gTWF0aC5mbG9vcihzKTtcclxuICAgICAgICBsZXQgaG91ciA9IE1hdGguZmxvb3IocyAvICg2MCAqIDYwKSk7XHJcbiAgICAgICAgcyAtPSBob3VyICogKDYwICogNjApO1xyXG4gICAgICAgIGxldCBtaW51dGUgPSBNYXRoLmZsb29yKHMgLyA2MCk7XHJcbiAgICAgICAgcyAtPSBtaW51dGUgKiA2MDtcclxuICAgICAgICBsZXQgcmV0ID0gJyc7XHJcbiAgICAgICAgLy8gaWYgKGhvdXIgPiAwKSB7XHJcbiAgICAgICAgLy8gICAgIHJldCArPSBob3VyIDwgMTAgPyAnMCcgKyBob3VyIDogaG91clxyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIHJldCArPSAnMDAnXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIHJldCArPSAnOidcclxuICAgICAgICBpZiAobWludXRlID4gMCkge1xyXG4gICAgICAgICAgICByZXQgKz0gbWludXRlIDwgMTAgPyAnMCcgKyBtaW51dGUgOiBtaW51dGVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXQgKz0gJzAwJ1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXQgKz0gJzonXHJcbiAgICAgICAgaWYgKHMgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldCArPSBzIDwgMTAgPyAnMCcgKyBzIDogc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldCArPSAnMDAnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIHtcclxuICAgICAgICAvLyAgICAgaG91cjogaG91cixcclxuICAgICAgICAvLyAgICAgbWludXRlOiBtaW51dGUsXHJcbiAgICAgICAgLy8gICAgIHM6IHMsXHJcbiAgICAgICAgLy8gfVxyXG4gICAgfSxcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgYWRkTmVnYXRpdmVDYWN1bGF0aW9uOiBmdW5jdGlvbiAoaXNOZWdhdGl2ZSwgbnVtLCByYXRlLCBzdHJOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzTmVnYXRpdmUgPyBcIi1cIiArIHRoaXMuY2FsY3VsYXRpb24obnVtLCByYXRlLCBzdHJOYW1lKSA6IHRoaXMuY2FsY3VsYXRpb24obnVtLCByYXRlLCBzdHJOYW1lKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsY3VsYXRpb24gbnVtYmVyXHJcbiAgICBjYWxjdWxhdGlvbjogZnVuY3Rpb24gKG51bSwgcmF0ZSwgc3RyTmFtZSkge1xyXG4gICAgICAgIHZhciBuMSA9IE1hdGguZmxvb3IobnVtIC8gcmF0ZSk7XHJcbiAgICAgICAgdmFyIG4yID0gTWF0aC5mbG9vcihudW0gJSByYXRlIC8gcmF0ZSAqIDEwKTtcclxuICAgICAgICBpZiAobjIgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG4xICsgc3RyTmFtZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbjEgKyBcIi5cIiArIG4yICsgc3RyTmFtZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59OyJdfQ==