
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui/SkinInfoPopup.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '906abQ6KhRK94jc8lii7QN9', 'SkinInfoPopup');
// scripts/ui/SkinInfoPopup.js

"use strict";

var Utils = require("Utils");

cc.Class({
  "extends": cc.Component,
  properties: {
    actorAnim: sp.Skeleton,
    nameUI: cc.Label,
    descUI: cc.Label,
    skinData: {
      "default": {}
    },
    methodUIGroup: [cc.Node],
    methodBtnGroup: [cc.Node],
    onceClick: {
      "default": true,
      visible: false
    }
  },
  onLoad: function onLoad() {
    GameApp.eventManager.on(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW, this.updateUnLockShow);
  },
  onDestroy: function onDestroy() {
    GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW, this.updateUnLockShow);
  },
  // update (dt) {},
  init: function init(_skinData) {
    this.skinData = _skinData;
    this.initNameShow();
    this.initSkinShow();
    this.updateMethodShow();
  },
  initNameShow: function initNameShow() {
    this.nameUI.string = this.skinData.name;
    var colorIndex = Math.floor((this.skinData.skinid - 1) / 5);
    this.nameUI.node.color = new cc.Color().fromHEX(NameColor[colorIndex]);
    this.descUI.string = this.skinData.des;
  },
  initSkinShow: function initSkinShow() {
    var _this = this;

    if (this.skinData.skinid < 21) {
      this.actorAnim.skeletonData = GameApp.uiManager.normalSkinData;
      this.actorAnim.setSkin(this.skinData.skinname);
    } else {
      this.actorAnim.skeletonData = GameApp.uiManager.advanceSkinDataGroup[this.skinData.skinid - 21];
    }

    if (this.skinData.skinid < 21) {
      this.actorAnim.setAnimation(0, 'await', true);
    } else {
      this.actorAnim.setAnimation(0, 'await_main_1', false);
      this.actorAnim.setCompleteListener(function () {
        _this.actorAnim.setAnimation(0, 'await_main_' + Tools.randomNum(1, 3), false);
      });
    }
  },
  updateMethodShow: function updateMethodShow() {
    if (this.skinData.skinid > 25) {
      this.methodUIGroup[2].children[0].getComponent(cc.Label).string = GameApp.dataManager.userData.havePieceNum[this.skinData.skinid] + '/' + this.skinData.needpiece;
      this.setpieceIcon(this.skinData.skinid);
    }

    this.updateUnLockShow(this);
  },
  updateUnLockShow: function updateUnLockShow(self) {
    self.methodUIGroup[0].active = self.methodBtnGroup[0].active = self.skinData.needcoin;
    self.methodUIGroup[1].active = self.methodBtnGroup[1].active = self.skinData.needgem;
    self.methodUIGroup[2].active = self.methodBtnGroup[2].active = self.skinData.needpiece;
    self.methodBtnGroup[3].active = false;
    self.methodUIGroup[0].children[0].getComponent(cc.Label).string = self.skinData.needcoin;
    self.methodUIGroup[1].children[0].getComponent(cc.Label).string = GameApp.dataManager.userData.playedVideoNum + '/' + self.skinData.needgem;
    var unlockarr = GameApp.dataManager.userData.unLockedSkinIdArr.concat();
    unlockarr.sort(function (a, b) {
      return a - b;
    });
    unlockarr.forEach(function (element) {
      if (element == self.skinData.skinid) {
        self.methodBtnGroup[0].active = false;
        self.methodBtnGroup[1].active = false;
        self.methodBtnGroup[2].active = false;
        self.methodBtnGroup[3].active = true;
        return;
      }
    });
    self.updateChoosedShow2(self);
  },
  updateChoosedShow2: function updateChoosedShow2(self) {
    if (GameApp.dataManager.getChoosedSkinId() == self.skinData.skinid) {
      self.methodBtnGroup[3].children[0].active = false;
      self.methodBtnGroup[3].children[1].active = true;
    } else {
      self.methodBtnGroup[3].children[0].active = true;
      self.methodBtnGroup[3].children[1].active = false;
    }
  },
  setpieceIcon: function setpieceIcon(id) {
    var self = this;
    cc.loader.loadRes("texture/skin_piece/card_p_" + id, cc.SpriteFrame, function (err, spriteFrame) {
      self.methodUIGroup[2].getComponent(cc.Sprite).spriteFrame = spriteFrame;
    });
  },
  selelctBtnClick: function selelctBtnClick() {
    GameApp.audioManager.playEffect('click');
    GameApp.dataManager.setChoosedSkinId(this.skinData.skinid);
    GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW, this);
  },
  coinBtnClick: function coinBtnClick() {
    GameApp.audioManager.playEffect('click');

    if (GameApp.dataManager.reduceCoin(this.skinData.needcoin)) {
      GameApp.uiManager.showToast("解锁成功");
      GameApp.dataManager.unLockSkin(this.skinData.skinid);
      GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW, this);
    } else {
      GameApp.uiManager.showToast("金币不足！");
    }
  },
  videoBtnClick: function videoBtnClick() {
    if (window.wx) {
      GameApp.uiManager.showToast("暂未开放！");
      return;
    }

    if (!this.onceClick) return;
    this.onceClick = false;
    GameApp.audioManager.playEffect('click');
    var self = this;

    if (window.tt) {
      Utils.addVideo("addVideo", function () {
        //看完了
        self.onceClick = true;
        GameApp.dataManager.addPlayedVideoNum();
        GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW, self);
      }, function (_info) {
        //没看完
        self.onceClick = true;
        _info ? GameApp.uiManager.showToast(_info) : GameApp.uiManager.showToast("未看完视频！");
      });
    } else {
      self.onceClick = true;
      GameApp.dataManager.addPlayedVideoNum();
      GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW, self);
    }
  },
  pieceBtnClick: function pieceBtnClick() {
    GameApp.audioManager.playEffect('click');
    GameApp.uiManager.showToast("碎片不足,请从" + "<color=#faf80d>黄金宝箱</color>" + "获取！");
  },
  onCloseBtnClick: function onCloseBtnClick() {
    GameApp.audioManager.playEffect('click');
    GameApp.uiManager.closePopup("SkinInfoPopup");
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlcXFNraW5JbmZvUG9wdXAuanMiXSwibmFtZXMiOlsiVXRpbHMiLCJyZXF1aXJlIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJhY3RvckFuaW0iLCJzcCIsIlNrZWxldG9uIiwibmFtZVVJIiwiTGFiZWwiLCJkZXNjVUkiLCJza2luRGF0YSIsIm1ldGhvZFVJR3JvdXAiLCJOb2RlIiwibWV0aG9kQnRuR3JvdXAiLCJvbmNlQ2xpY2siLCJ2aXNpYmxlIiwib25Mb2FkIiwiR2FtZUFwcCIsImV2ZW50TWFuYWdlciIsIm9uIiwiRXZlbnROYW1lcyIsIkVWRU5UX1VQREFURV9TSE9QX0NIT09TRURfU0hPVyIsInVwZGF0ZVVuTG9ja1Nob3ciLCJvbkRlc3Ryb3kiLCJyZW1vdmVMaXN0ZW5lciIsImluaXQiLCJfc2tpbkRhdGEiLCJpbml0TmFtZVNob3ciLCJpbml0U2tpblNob3ciLCJ1cGRhdGVNZXRob2RTaG93Iiwic3RyaW5nIiwibmFtZSIsImNvbG9ySW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJza2luaWQiLCJub2RlIiwiY29sb3IiLCJDb2xvciIsImZyb21IRVgiLCJOYW1lQ29sb3IiLCJkZXMiLCJza2VsZXRvbkRhdGEiLCJ1aU1hbmFnZXIiLCJub3JtYWxTa2luRGF0YSIsInNldFNraW4iLCJza2lubmFtZSIsImFkdmFuY2VTa2luRGF0YUdyb3VwIiwic2V0QW5pbWF0aW9uIiwic2V0Q29tcGxldGVMaXN0ZW5lciIsIlRvb2xzIiwicmFuZG9tTnVtIiwiY2hpbGRyZW4iLCJnZXRDb21wb25lbnQiLCJkYXRhTWFuYWdlciIsInVzZXJEYXRhIiwiaGF2ZVBpZWNlTnVtIiwibmVlZHBpZWNlIiwic2V0cGllY2VJY29uIiwic2VsZiIsImFjdGl2ZSIsIm5lZWRjb2luIiwibmVlZGdlbSIsInBsYXllZFZpZGVvTnVtIiwidW5sb2NrYXJyIiwidW5Mb2NrZWRTa2luSWRBcnIiLCJjb25jYXQiLCJzb3J0IiwiYSIsImIiLCJmb3JFYWNoIiwiZWxlbWVudCIsInVwZGF0ZUNob29zZWRTaG93MiIsImdldENob29zZWRTa2luSWQiLCJpZCIsImxvYWRlciIsImxvYWRSZXMiLCJTcHJpdGVGcmFtZSIsImVyciIsInNwcml0ZUZyYW1lIiwiU3ByaXRlIiwic2VsZWxjdEJ0bkNsaWNrIiwiYXVkaW9NYW5hZ2VyIiwicGxheUVmZmVjdCIsInNldENob29zZWRTa2luSWQiLCJlbWl0IiwiY29pbkJ0bkNsaWNrIiwicmVkdWNlQ29pbiIsInNob3dUb2FzdCIsInVuTG9ja1NraW4iLCJ2aWRlb0J0bkNsaWNrIiwid2luZG93Iiwid3giLCJ0dCIsImFkZFZpZGVvIiwiYWRkUGxheWVkVmlkZW9OdW0iLCJfaW5mbyIsInBpZWNlQnRuQ2xpY2siLCJvbkNsb3NlQnRuQ2xpY2siLCJjbG9zZVBvcHVwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBRUFDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxTQUFTLEVBQUVDLEVBQUUsQ0FBQ0MsUUFETjtBQUVSQyxJQUFBQSxNQUFNLEVBQUVQLEVBQUUsQ0FBQ1EsS0FGSDtBQUdSQyxJQUFBQSxNQUFNLEVBQUVULEVBQUUsQ0FBQ1EsS0FISDtBQUlSRSxJQUFBQSxRQUFRLEVBQUU7QUFDTixpQkFBUztBQURILEtBSkY7QUFPUkMsSUFBQUEsYUFBYSxFQUFFLENBQUNYLEVBQUUsQ0FBQ1ksSUFBSixDQVBQO0FBUVJDLElBQUFBLGNBQWMsRUFBRSxDQUFDYixFQUFFLENBQUNZLElBQUosQ0FSUjtBQVNSRSxJQUFBQSxTQUFTLEVBQUU7QUFDUCxpQkFBUyxJQURGO0FBRVBDLE1BQUFBLE9BQU8sRUFBRTtBQUZGO0FBVEgsR0FIUDtBQWtCTEMsRUFBQUEsTUFsQkssb0JBa0JJO0FBQ0xDLElB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IlV0aWxzXCIpXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGFjdG9yQW5pbTogc3AuU2tlbGV0b24sXHJcbiAgICAgICAgbmFtZVVJOiBjYy5MYWJlbCxcclxuICAgICAgICBkZXNjVUk6IGNjLkxhYmVsLFxyXG4gICAgICAgIHNraW5EYXRhOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHt9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXRob2RVSUdyb3VwOiBbY2MuTm9kZV0sXHJcbiAgICAgICAgbWV0aG9kQnRuR3JvdXA6IFtjYy5Ob2RlXSxcclxuICAgICAgICBvbmNlQ2xpY2s6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgdmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTG9hZCgpIHtcclxuICAgICAgICBHYW1lQXBwLmV2ZW50TWFuYWdlci5vbihFdmVudE5hbWVzLkVWRU5UX1VQREFURV9TSE9QX0NIT09TRURfU0hPVywgdGhpcy51cGRhdGVVbkxvY2tTaG93KVxyXG4gICAgfSxcclxuICAgIG9uRGVzdHJveSgpIHtcclxuICAgICAgICBHYW1lQXBwLmV2ZW50TWFuYWdlci5yZW1vdmVMaXN0ZW5lcihFdmVudE5hbWVzLkVWRU5UX1VQREFURV9TSE9QX0NIT09TRURfU0hPVywgdGhpcy51cGRhdGVVbkxvY2tTaG93KVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1cGRhdGUgKGR0KSB7fSxcclxuXHJcbiAgICBpbml0KF9za2luRGF0YSkge1xyXG4gICAgICAgIHRoaXMuc2tpbkRhdGEgPSBfc2tpbkRhdGFcclxuICAgICAgICB0aGlzLmluaXROYW1lU2hvdygpXHJcbiAgICAgICAgdGhpcy5pbml0U2tpblNob3coKVxyXG4gICAgICAgIHRoaXMudXBkYXRlTWV0aG9kU2hvdygpXHJcbiAgICB9LFxyXG4gICAgaW5pdE5hbWVTaG93KCkge1xyXG4gICAgICAgIHRoaXMubmFtZVVJLnN0cmluZyA9IHRoaXMuc2tpbkRhdGEubmFtZVxyXG4gICAgICAgIHZhciBjb2xvckluZGV4ID0gTWF0aC5mbG9vcigodGhpcy5za2luRGF0YS5za2luaWQgLSAxKSAvIDUpXHJcbiAgICAgICAgdGhpcy5uYW1lVUkubm9kZS5jb2xvciA9IG5ldyBjYy5Db2xvcigpLmZyb21IRVgoTmFtZUNvbG9yW2NvbG9ySW5kZXhdKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZXNjVUkuc3RyaW5nID0gdGhpcy5za2luRGF0YS5kZXNcclxuICAgIH0sXHJcbiAgICBpbml0U2tpblNob3coKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2tpbkRhdGEuc2tpbmlkIDwgMjEpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RvckFuaW0uc2tlbGV0b25EYXRhID0gR2FtZUFwcC51aU1hbmFnZXIubm9ybWFsU2tpbkRhdGFcclxuICAgICAgICAgICAgdGhpcy5hY3RvckFuaW0uc2V0U2tpbih0aGlzLnNraW5EYXRhLnNraW5uYW1lKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3JBbmltLnNrZWxldG9uRGF0YSA9IEdhbWVBcHAudWlNYW5hZ2VyLmFkdmFuY2VTa2luRGF0YUdyb3VwW3RoaXMuc2tpbkRhdGEuc2tpbmlkIC0gMjFdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNraW5EYXRhLnNraW5pZCA8IDIxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3JBbmltLnNldEFuaW1hdGlvbigwLCAnYXdhaXQnLCB0cnVlKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3JBbmltLnNldEFuaW1hdGlvbigwLCAnYXdhaXRfbWFpbl8xJywgZmFsc2UpXHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3JBbmltLnNldENvbXBsZXRlTGlzdGVuZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RvckFuaW0uc2V0QW5pbWF0aW9uKDAsICdhd2FpdF9tYWluXycgKyBUb29scy5yYW5kb21OdW0oMSwgMyksIGZhbHNlKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB1cGRhdGVNZXRob2RTaG93KCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5za2luRGF0YS5za2luaWQgPiAyNSkge1xyXG4gICAgICAgICAgICB0aGlzLm1ldGhvZFVJR3JvdXBbMl0uY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBHYW1lQXBwLmRhdGFNYW5hZ2VyLnVzZXJEYXRhLmhhdmVQaWVjZU51bVt0aGlzLnNraW5EYXRhLnNraW5pZF0gKyAnLycgKyB0aGlzLnNraW5EYXRhLm5lZWRwaWVjZVxyXG4gICAgICAgICAgICB0aGlzLnNldHBpZWNlSWNvbih0aGlzLnNraW5EYXRhLnNraW5pZClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlVW5Mb2NrU2hvdyh0aGlzKVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZVVuTG9ja1Nob3coc2VsZikge1xyXG4gICAgICAgIHNlbGYubWV0aG9kVUlHcm91cFswXS5hY3RpdmUgPSBzZWxmLm1ldGhvZEJ0bkdyb3VwWzBdLmFjdGl2ZSA9IHNlbGYuc2tpbkRhdGEubmVlZGNvaW5cclxuICAgICAgICBzZWxmLm1ldGhvZFVJR3JvdXBbMV0uYWN0aXZlID0gc2VsZi5tZXRob2RCdG5Hcm91cFsxXS5hY3RpdmUgPSBzZWxmLnNraW5EYXRhLm5lZWRnZW1cclxuICAgICAgICBzZWxmLm1ldGhvZFVJR3JvdXBbMl0uYWN0aXZlID0gc2VsZi5tZXRob2RCdG5Hcm91cFsyXS5hY3RpdmUgPSBzZWxmLnNraW5EYXRhLm5lZWRwaWVjZVxyXG4gICAgICAgIHNlbGYubWV0aG9kQnRuR3JvdXBbM10uYWN0aXZlID0gZmFsc2VcclxuICAgICAgICBzZWxmLm1ldGhvZFVJR3JvdXBbMF0uY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBzZWxmLnNraW5EYXRhLm5lZWRjb2luXHJcbiAgICAgICAgc2VsZi5tZXRob2RVSUdyb3VwWzFdLmNoaWxkcmVuWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gR2FtZUFwcC5kYXRhTWFuYWdlci51c2VyRGF0YS5wbGF5ZWRWaWRlb051bSArICcvJyArIHNlbGYuc2tpbkRhdGEubmVlZGdlbVxyXG5cclxuICAgICAgICB2YXIgdW5sb2NrYXJyID0gR2FtZUFwcC5kYXRhTWFuYWdlci51c2VyRGF0YS51bkxvY2tlZFNraW5JZEFyci5jb25jYXQoKVxyXG4gICAgICAgIHVubG9ja2Fyci5zb3J0KChhLCBiKSA9PiBhIC0gYik7XHJcbiAgICAgICAgdW5sb2NrYXJyLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09IHNlbGYuc2tpbkRhdGEuc2tpbmlkKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1ldGhvZEJ0bkdyb3VwWzBdLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tZXRob2RCdG5Hcm91cFsxXS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNlbGYubWV0aG9kQnRuR3JvdXBbMl0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1ldGhvZEJ0bkdyb3VwWzNdLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxmLnVwZGF0ZUNob29zZWRTaG93MihzZWxmKVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZUNob29zZWRTaG93MjogZnVuY3Rpb24gKHNlbGYpIHtcclxuICAgICAgICBpZiAoR2FtZUFwcC5kYXRhTWFuYWdlci5nZXRDaG9vc2VkU2tpbklkKCkgPT0gc2VsZi5za2luRGF0YS5za2luaWQpIHtcclxuICAgICAgICAgICAgc2VsZi5tZXRob2RCdG5Hcm91cFszXS5jaGlsZHJlblswXS5hY3RpdmUgPSBmYWxzZVxyXG4gICAgICAgICAgICBzZWxmLm1ldGhvZEJ0bkdyb3VwWzNdLmNoaWxkcmVuWzFdLmFjdGl2ZSA9IHRydWVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLm1ldGhvZEJ0bkdyb3VwWzNdLmNoaWxkcmVuWzBdLmFjdGl2ZSA9IHRydWVcclxuICAgICAgICAgICAgc2VsZi5tZXRob2RCdG5Hcm91cFszXS5jaGlsZHJlblsxXS5hY3RpdmUgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzZXRwaWVjZUljb24oaWQpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyhcInRleHR1cmUvc2tpbl9waWVjZS9jYXJkX3BfXCIgKyBpZCwgY2MuU3ByaXRlRnJhbWUsIGZ1bmN0aW9uIChlcnIsIHNwcml0ZUZyYW1lKSB7XHJcbiAgICAgICAgICAgIHNlbGYubWV0aG9kVUlHcm91cFsyXS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHNwcml0ZUZyYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2VsZWxjdEJ0bkNsaWNrKCkge1xyXG4gICAgICAgIEdhbWVBcHAuYXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoJ2NsaWNrJylcclxuICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLnNldENob29zZWRTa2luSWQodGhpcy5za2luRGF0YS5za2luaWQpXHJcbiAgICAgICAgR2FtZUFwcC5ldmVudE1hbmFnZXIuZW1pdChFdmVudE5hbWVzLkVWRU5UX1VQREFURV9TSE9QX0NIT09TRURfU0hPVywgdGhpcylcclxuICAgIH0sXHJcbiAgICBjb2luQnRuQ2xpY2soKSB7XHJcbiAgICAgICAgR2FtZUFwcC5hdWRpb01hbmFnZXIucGxheUVmZmVjdCgnY2xpY2snKVxyXG4gICAgICAgIGlmIChHYW1lQXBwLmRhdGFNYW5hZ2VyLnJlZHVjZUNvaW4odGhpcy5za2luRGF0YS5uZWVkY29pbikpIHtcclxuICAgICAgICAgICAgR2FtZUFwcC51aU1hbmFnZXIuc2hvd1RvYXN0KFwi6Kej6ZSB5oiQ5YqfXCIpXHJcbiAgICAgICAgICAgIEdhbWVBcHAuZGF0YU1hbmFnZXIudW5Mb2NrU2tpbih0aGlzLnNraW5EYXRhLnNraW5pZClcclxuICAgICAgICAgICAgR2FtZUFwcC5ldmVudE1hbmFnZXIuZW1pdChFdmVudE5hbWVzLkVWRU5UX1VQREFURV9TSE9QX0NIT09TRURfU0hPVywgdGhpcylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5zaG93VG9hc3QoXCLph5HluIHkuI3otrPvvIFcIilcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgdmlkZW9CdG5DbGljaygpIHtcclxuICAgICAgICBpZiAod2luZG93Lnd4KSB7XHJcbiAgICAgICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuaaguacquW8gOaUvu+8gVwiKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLm9uY2VDbGljaykgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMub25jZUNsaWNrID0gZmFsc2VcclxuICAgICAgICBHYW1lQXBwLmF1ZGlvTWFuYWdlci5wbGF5RWZmZWN0KCdjbGljaycpXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzXHJcblxyXG4gICAgICAgIGlmICh3aW5kb3cudHQpIHtcclxuICAgICAgICAgICAgVXRpbHMuYWRkVmlkZW8oXCJhZGRWaWRlb1wiLCBmdW5jdGlvbiAoKSB7IC8v55yL5a6M5LqGXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uY2VDbGljayA9IHRydWVcclxuICAgICAgICAgICAgICAgIEdhbWVBcHAuZGF0YU1hbmFnZXIuYWRkUGxheWVkVmlkZW9OdW0oKVxyXG4gICAgICAgICAgICAgICAgR2FtZUFwcC5ldmVudE1hbmFnZXIuZW1pdChFdmVudE5hbWVzLkVWRU5UX1VQREFURV9TSE9QX0NIT09TRURfU0hPVywgc2VsZilcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKF9pbmZvKSB7IC8v5rKh55yL5a6MXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uY2VDbGljayA9IHRydWVcclxuICAgICAgICAgICAgICAgIF9pbmZvID8gR2FtZUFwcC51aU1hbmFnZXIuc2hvd1RvYXN0KF9pbmZvKSA6IEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuacqueci+WujOinhumike+8gVwiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYub25jZUNsaWNrID0gdHJ1ZVxyXG4gICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmFkZFBsYXllZFZpZGVvTnVtKClcclxuICAgICAgICAgICAgR2FtZUFwcC5ldmVudE1hbmFnZXIuZW1pdChFdmVudE5hbWVzLkVWRU5UX1VQREFURV9TSE9QX0NIT09TRURfU0hPVywgc2VsZilcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBwaWVjZUJ0bkNsaWNrKCkge1xyXG4gICAgICAgIEdhbWVBcHAuYXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoJ2NsaWNrJylcclxuICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5zaG93VG9hc3QoXCLnoo7niYfkuI3otrMs6K+35LuOXCIgKyBcIjxjb2xvcj0jZmFmODBkPum7hOmHkeWuneeusTwvY29sb3I+XCIgKyBcIuiOt+WPlu+8gVwiKVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkNsb3NlQnRuQ2xpY2soKSB7XHJcbiAgICAgICAgR2FtZUFwcC5hdWRpb01hbmFnZXIucGxheUVmZmVjdCgnY2xpY2snKVxyXG4gICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLmNsb3NlUG9wdXAoXCJTa2luSW5mb1BvcHVwXCIpXHJcbiAgICB9LFxyXG5cclxufSk7XHJcbiJdfQ==