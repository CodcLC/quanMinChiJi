
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui/LoginUI.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '8f722V7x2lPAZMMnHF0xOA7', 'LoginUI');
// scripts/ui/LoginUI.js

"use strict";

var Utils = require("Utils");

cc.Class({
  "extends": cc.Component,
  properties: {
    coinUI: cc.Label,
    nameUI: cc.EditBox,
    curPlayerAnim: sp.Skeleton,
    onceClick: {
      "default": true,
      visible: false
    },
    moreBtn: cc.Node,
    moreSprites: [cc.SpriteFrame],
    spriteIndex: 0,
    activityBtnNode: cc.Node,
    originActivityBtnPos: null
  },
  onLoad: function onLoad() {
    GameApp.eventManager.on(EventNames.EVENT_SHOW_ACTIVITYBTN, this.showActivityBtn.bind(this));
    GameApp.eventManager.on(EventNames.EVENT_UPDATE_COIN_SHOW, this.updateCoinShow.bind(this)); // if (window.tt) {
    //     const systemInfo = tt.getSystemInfoSync();
    //     if (systemInfo.platform !== "ios" && systemInfo.appName != "XiGua") {
    //         this.moreBtn.active = true
    //         Tools.scaleUpAndDowm(this.moreBtn)
    //         this.moreBtn.runAction(cc.sequence(cc.callFunc(() => {
    //             this.moreBtn.children[0].getComponent(cc.Sprite).spriteFrame = this.moreSprites[this.spriteIndex]
    //             this.spriteIndex++
    //             if (this.spriteIndex == this.moreSprites.length) {
    //                 this.spriteIndex = 0
    //             }
    //         }), cc.delayTime(2)).repeatForever())
    //     } else {
    //         this.moreBtn.active = false
    //     }
    // } else {
    //     this.moreBtn.active = true
    //     Tools.scaleUpAndDowm(this.moreBtn)
    //     this.moreBtn.runAction(cc.sequence(cc.callFunc(() => {
    //         this.moreBtn.children[0].getComponent(cc.Sprite).spriteFrame = this.moreSprites[this.spriteIndex]
    //         this.spriteIndex++
    //         if (this.spriteIndex == this.moreSprites.length) {
    //             this.spriteIndex = 0
    //         }
    //     }), cc.delayTime(2)).repeatForever())
    // }

    GameApp.dataManager.initSomeAttr();
    GameApp.dataManager.setChoosedSkinId(GameApp.dataManager.userData.choosedSkinId);
    this.updateCoinShow();
    this.updateNameShow();
    this.initSkinShow();
    this.originActivityBtnPos = this.activityBtnNode.position;
    this.showActivityBtn(); // if (window.tt) {
    //     var phone = tt.getSystemInfoSync();
    //     var w = phone.screenWidth
    //     var h = phone.screenHeight;
    //     Utils.addBanner("addBanner", {
    //         top: h - (200 * 9 / 16),
    //         left: w / 2 - 100,
    //         width: 200
    //     }, null, null)
    // }

    var passDays = cc.sys.localStorage.getItem("EatChicken_passDays");

    if (passDays == null || passDays == undefined || passDays == "") {
      passDays = 0;
      cc.sys.localStorage.setItem("EatChicken_passDays", 0);
    } else {
      passDays = parseInt(passDays);
    }

    var days = 0;
    var date = new Date();
    date = parseInt(date.getTime() / 1000);
    var dailyDate = cc.sys.localStorage.getItem("EatChicken_dailyDate");

    if (dailyDate == null || dailyDate == undefined || dailyDate == "") {
      cc.sys.localStorage.setItem("EatChicken_dailyDate", date);
      days = 1;
    } else {
      dailyDate = parseInt(dailyDate);
      console.log(date);
      console.log(dailyDate);

      if (date >= dailyDate) {
        var newDate = date - dailyDate;
        var newtime = Tools.toTimeString2(newDate);
        days = Math.floor(newtime.hour / 24) + 1;
      } else {
        console.log("现在时间比之前时间早，调时间了？");
        cc.sys.localStorage.setItem("EatChicken_dailyDate", date);
        days = 1;
        cc.sys.localStorage.setItem("EatChicken_passDays", 0);
        passDays = 0;
      }
    }

    if (days - passDays > 0) {
      console.log("执行了天数加一");
      passDays += days - passDays;
      GameApp.dataManager.globalData.curDailyGot = false;
      cc.sys.localStorage.setItem("EatChicken_dailyGotState", false);
      GameApp.dataManager.globalData.activeValue = 0;
      cc.sys.localStorage.setItem("EatChicken_activeValue", GameApp.dataManager.globalData.activeValue);
      GameApp.dataManager.globalData.progressGifts = [0, 0, 0, 0];
      cc.sys.localStorage.setItem("EatChicken_progressGifts", JSON.stringify(GameApp.dataManager.globalData.progressGifts));
    }

    cc.sys.localStorage.setItem("EatChicken_passDays", passDays);
    var des = passDays;
    des = des % 7;

    if (des == 0) {
      des = 7;
    }

    GameApp.dataManager.globalData.days = des;
    console.log(GameApp.dataManager.globalData.curDailyGot);

    if (!GameApp.dataManager.globalData.curDailyGot) {
      GameApp.uiManager.showPopup('DailyPopup');
    } // GameApp.uiManager.showPopup('DailyPopup')


    if (GameApp.dataManager.globalData.recordState == RecordState.READY) {
      Utils.startRecord(function () {
        GameApp.dataManager.changeRecordState(RecordState.RECORD);
      }, function (res) {
        GameApp.uiManager.showToast("已到录屏最大时长!");

        if (res.videoPath != null && res.videoPath != '') {
          GameApp.dataManager.globalData.recordPath = res.videoPath;
          Utils.recorder.stop();
        }
      });
    }
  },
  onDestroy: function onDestroy() {
    GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_ACTIVITYBTN);
    GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_COIN_SHOW);
  },
  // update (dt) {},
  soloBtnClick: function soloBtnClick() {
    GameApp.audioManager.playEffect('click');
    GameApp.uiManager.showPopup('GiftPopup', function (node) {
      node.getComponent("GiftPopup").init("PrepareUI", 1);
    });
  },
  onNameChanged: function onNameChanged(event) {
    // GameApp.dataManager.setPlayerName(event.string)
    GameApp.dataManager.setPlayerName(Tools.getRandomElement(GameApp.dataManager.globalData.playerNameArr));
    this.updateNameShow();
  },
  updateCoinShow: function updateCoinShow() {
    this.coinUI.string = GameApp.dataManager.userData.coinNum;
  },
  updateNameShow: function updateNameShow() {
    // this.nameUI.string = GameApp.dataManager.userData.playerName
    this.nameUI.node.children[0].getComponent(cc.Label).string = GameApp.dataManager.userData.playerName;
  },
  initSkinShow: function initSkinShow() {
    var _this = this;

    if (GameApp.dataManager.userData.choosedSkinId < 21) {
      this.curPlayerAnim.skeletonData = GameApp.uiManager.normalSkinData;
      this.curPlayerAnim.setSkin(GameApp.dataManager.getSkinDataById(GameApp.dataManager.getChoosedSkinId()).skinname);
    } else {
      this.curPlayerAnim.skeletonData = GameApp.uiManager.advanceSkinDataGroup[GameApp.dataManager.userData.choosedSkinId - 21];
    }

    if (GameApp.dataManager.userData.choosedSkinId < 21) {
      this.curPlayerAnim.setAnimation(0, 'await', true);
    } else {
      this.curPlayerAnim.setAnimation(0, 'await_main_1', false);
      this.curPlayerAnim.setCompleteListener(function () {
        _this.curPlayerAnim.setAnimation(0, 'await_main_' + Tools.randomNum(1, 3), false);
      });
    }
  },
  coinBtnClick: function coinBtnClick() {
    if (window.wx) {
      GameApp.uiManager.showToast("暂未开放！");
      return;
    }

    if (!this.onceClick) return;
    this.onceClick = false;
    GameApp.audioManager.playEffect('click');
    var self = this;

    if (window.tt) {
      Utils.addVideo("addVideo", function () {
        //看完了
        self.onceClick = true;
        GameApp.uiManager.showToast("获得500金币");
        GameApp.dataManager.addCoin(500);
        self.updateCoinShow();
      }, function (_info) {
        //没看完
        self.onceClick = true;
        _info ? GameApp.uiManager.showToast(_info) : GameApp.uiManager.showToast("未看完视频！");
      });
    } else {
      self.onceClick = true;
      GameApp.uiManager.showToast("非真机,获得500金币");
      GameApp.dataManager.addCoin(500);
      self.updateCoinShow();
    }
  },
  skinBtnClick: function skinBtnClick() {
    GameApp.audioManager.playEffect('click');
    GameApp.uiManager.showUI('SkinUI');
  },
  boxBtnClick: function boxBtnClick() {
    GameApp.audioManager.playEffect('click');
    GameApp.uiManager.showUI('BoxUI');
  },
  rankBtnClick: function rankBtnClick() {
    GameApp.audioManager.playEffect('click');
    GameApp.uiManager.showUI('RankUI');
  },
  weaponBtnClick: function weaponBtnClick() {
    GameApp.audioManager.playEffect('click');
    GameApp.uiManager.showUI('GunUI');
  },
  shopBtnClick: function shopBtnClick() {
    GameApp.audioManager.playEffect('click');
  },
  shareBtnClick: function shareBtnClick() {
    GameApp.audioManager.playEffect('click');
    Utils.shareFromHomePage(function () {
      GameApp.uiManager.showToast("感谢您的支持，赠送50金币");
      GameApp.dataManager.addCoin(50);
    }, function () {
      GameApp.uiManager.showToast("分享失败!");
    });
  },
  moreGameBtnClick: function moreGameBtnClick() {
    this.showActivityBtn();

    if (window.tt) {
      var systemInfo = tt.getSystemInfoSync(); // iOS 不支持，建议先检测再使用

      if (systemInfo.platform !== "ios") {
        // 打开互跳弹窗
        tt.showMoreGamesModal({
          appLaunchOptions: [{
            appId: "ttXXXXXX",
            query: "foo=bar&baz=qux",
            extraData: {}
          } // {...}
          ],
          success: function success(res) {
            console.log("success", res.errMsg);
          },
          fail: function fail(res) {
            console.log("fail", res.errMsg);
          }
        });
      }
    }
  },
  showActivityBtn: function showActivityBtn() {
    var _this2 = this;

    this.activityBtnNode.getComponent(cc.Button).interactable = true;
    this.activityBtnNode.stopAllActions();
    this.activityBtnNode.runAction(cc.sequence(cc.moveTo(0.2, cc.v2(this.originActivityBtnPos).add(cc.v2(90, 0))).easing(cc.easeBackOut()), cc.callFunc(function () {
      _this2.activityBtnNode.runAction(cc.sequence(cc.moveBy(0.8, cc.v2(20, 0)).easing(cc.easeBounceOut(4)), cc.moveBy(0.2, cc.v2(-20, 0)), cc.moveBy(0.5, cc.v2(20, 0)).easing(cc.easeBounceOut(4)), cc.moveBy(0.2, cc.v2(-20, 0)), cc.delayTime(1)).repeatForever());
    })));
  },
  activityBtnClick: function activityBtnClick() {
    GameApp.audioManager.playEffect('click');
    this.activityBtnNode.getComponent(cc.Button).interactable = false;
    this.activityBtnNode.stopAllActions();
    this.activityBtnNode.runAction(cc.moveTo(0.2, this.originActivityBtnPos));
    GameApp.uiManager.showPopup("ActivityPopup");
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlcXExvZ2luVUkuanMiXSwibmFtZXMiOlsiVXRpbHMiLCJyZXF1aXJlIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJjb2luVUkiLCJMYWJlbCIsIm5hbWVVSSIsIkVkaXRCb3giLCJjdXJQbGF5ZXJBbmltIiwic3AiLCJTa2VsZXRvbiIsIm9uY2VDbGljayIsInZpc2libGUiLCJtb3JlQnRuIiwiTm9kZSIsIm1vcmVTcHJpdGVzIiwiU3ByaXRlRnJhbWUiLCJzcHJpdGVJbmRleCIsImFjdGl2aXR5QnRuTm9kZSIsIm9yaWdpbkFjdGl2aXR5QnRuUG9zIiwib25Mb2FkIiwiR2FtZUFwcCIsImV2ZW50TWFuYWdlciIsIm9uIiwiRXZlbnROYW1lcyIsIkVWRU5UX1NIT1dfQUNUSVZJVFlCVE4iLCJzaG93QWN0aXZpdHlCdG4iLCJiaW5kIiwiRVZFTlRfVVBEQVRFX0NPSU5fU0hPVyIsInVwZGF0ZUNvaW5TaG93IiwiZGF0YU1hbmFnZXIiLCJpbml0U29tZUF0dHIiLCJzZXRDaG9vc2VkU2tpbklkIiwidXNlckRhdGEiLCJjaG9vc2VkU2tpbklkIiwidXBkYXRlTmFtZVNob3ciLCJpbml0U2tpblNob3ciLCJwb3NpdGlvbiIsInBhc3NEYXlzIiwic3lzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInVuZGVmaW5lZCIsInNldEl0ZW0iLCJwYXJzZUludCIsImRheXMiLCJkYXRlIiwiRGF0ZSIsImdldFRpbWUiLCJkYWlseURhdGUiLCJjb25zb2xlIiwibG9nIiwibmV3RGF0ZSIsIm5ld3RpbWUiLCJUb29scyIsInRvVGltZVN0cmluZzIiLCJNYXRoIiwiZmxvb3IiLCJob3VyIiwiZ2xvYmFsRGF0YSIsImN1ckRhaWx5R290IiwiYWN0aXZlVmFsdWUiLCJwcm9ncmVzc0dpZnRzIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlcyIsInVpTWFuYWdlciIsInNob3dQb3B1cCIsInJlY29yZFN0YXRlIiwiUmVjb3JkU3RhdGUiLCJSRUFEWSIsInN0YXJ0UmVjb3JkIiwiY2hhbmdlUmVjb3JkU3RhdGUiLCJSRUNPUkQiLCJyZXMiLCJzaG93VG9hc3QiLCJ2aWRlb1BhdGgiLCJyZWNvcmRQYXRoIiwicmVjb3JkZXIiLCJzdG9wIiwib25EZXN0cm95IiwicmVtb3ZlTGlzdGVuZXIiLCJzb2xvQnRuQ2xpY2siLCJhdWRpb01hbmFnZXIiLCJwbGF5RWZmZWN0Iiwibm9kZSIsImdldENvbXBvbmVudCIsImluaXQiLCJvbk5hbWVDaGFuZ2VkIiwiZXZlbnQiLCJzZXRQbGF5ZXJOYW1lIiwiZ2V0UmFuZG9tRWxlbWVudCIsInBsYXllck5hbWVBcnIiLCJzdHJpbmciLCJjb2luTnVtIiwiY2hpbGRyZW4iLCJwbGF5ZXJOYW1lIiwic2tlbGV0b25EYXRhIiwibm9ybWFsU2tpbkRhdGEiLCJzZXRTa2luIiwiZ2V0U2tpbkRhdGFCeUlkIiwiZ2V0Q2hvb3NlZFNraW5JZCIsInNraW5uYW1lIiwiYWR2YW5jZVNraW5EYXRhR3JvdXAiLCJzZXRBbmltYXRpb24iLCJzZXRDb21wbGV0ZUxpc3RlbmVyIiwicmFuZG9tTnVtIiwiY29pbkJ0bkNsaWNrIiwid2luZG93Iiwid3giLCJzZWxmIiwidHQiLCJhZGRWaWRlbyIsImFkZENvaW4iLCJfaW5mbyIsInNraW5CdG5DbGljayIsInNob3dVSSIsImJveEJ0bkNsaWNrIiwicmFua0J0bkNsaWNrIiwid2VhcG9uQnRuQ2xpY2siLCJzaG9wQnRuQ2xpY2siLCJzaGFyZUJ0bkNsaWNrIiwic2hhcmVGcm9tSG9tZVBhZ2UiLCJtb3JlR2FtZUJ0bkNsaWNrIiwic3lzdGVtSW5mbyIsImdldFN5c3RlbUluZm9TeW5jIiwicGxhdGZvcm0iLCJzaG93TW9yZUdhbWVzTW9kYWwiLCJhcHBMYXVuY2hPcHRpb25zIiwiYXBwSWQiLCJxdWVyeSIsImV4dHJhRGF0YSIsInN1Y2Nlc3MiLCJlcnJNc2ciLCJmYWlsIiwiQnV0dG9uIiwiaW50ZXJhY3RhYmxlIiwic3RvcEFsbEFjdGlvbnMiLCJydW5BY3Rpb24iLCJzZXF1ZW5jZSIsIm1vdmVUbyIsInYyIiwiYWRkIiwiZWFzaW5nIiwiZWFzZUJhY2tPdXQiLCJjYWxsRnVuYyIsIm1vdmVCeSIsImVhc2VCb3VuY2VPdXQiLCJkZWxheVRpbWUiLCJyZXBlYXRGb3JldmVyIiwiYWN0aXZpdHlCdG5DbGljayJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBQyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsTUFBTSxFQUFFSixFQUFFLENBQUNLLEtBREg7QUFFUkMsSUFBQUEsTUFBTSxFQUFFTixFQUFFLENBQUNPLE9BRkg7QUFHUkMsSUFBQUEsYUFBYSxFQUFFQyxFQUFFLENBQUNDLFFBSFY7QUFJUkMsSUFBQUEsU0FBUyxFQUFFO0FBQ1AsaUJBQVMsSUFERjtBQUVQQyxNQUFBQSxPQUFPLEVBQUU7QUFGRixLQUpIO0FBUVJDLElBQUFBLE9BQU8sRUFBRWIsRUFBRSxDQUFDYyxJQVJKO0FBU1JDLElBQUFBLFdBQVcsRUFBRSxDQUFDZixFQUFFLENBQUNnQixXQUFKLENBVEw7QUFVUkMsSUFBQUEsV0FBVyxFQUFFLENBVkw7QUFXUkMsSUFBQUEsZUFBZSxFQUFFbEIsRUFBRSxDQUFDYyxJQVhaO0FBWVJLLElBQUFBLG9CQUFvQixFQUFFO0FBWmQsR0FIUDtBQW1CTEMsRUFBQUEsTUFuQkssb0JBbUJJO0FBQ0xDLElBQUFBLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsRUFBckIsQ0FBd0JDLFVBQVUsQ0FBQ0Msc0JBQW5DLEVBQTJELEtBQUtDLGVBQUwsQ0FBcUJDLElBQXJCLENBQTBCLElBQTFCLENBQTNEO0FBQ0FOLElBQUFBLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsRUFBckIsQ0FBd0JDLFVBQVUsQ0FBQ0ksc0JBQW5DLEVBQTJELEtBQUtDLGNBQUwsQ0FBb0JGLElB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Q0FBYixDQUE5TCxFQUErTUMsYUFBL00sRUFBL0I7QUFDSCxLQUZ1SSxDQUF6RyxDQUEvQjtBQUdILEdBN1FJO0FBOFFMQyxFQUFBQSxnQkE5UUssOEJBOFFjO0FBQ2ZqSSxJQUFBQSxPQUFPLENBQUM4RCxZQUFSLENBQXFCQyxVQUFyQixDQUFnQyxPQUFoQztBQUNBLFNBQUtsRSxlQUFMLENBQXFCb0UsWUFBckIsQ0FBa0N0RixFQUFFLENBQUN1SSxNQUFyQyxFQUE2Q0MsWUFBN0MsR0FBNEQsS0FBNUQ7QUFDQSxTQUFLdEgsZUFBTCxDQUFxQnVILGNBQXJCO0FBQ0EsU0FBS3ZILGVBQUwsQ0FBcUJ3SCxTQUFyQixDQUErQjFJLEVBQUUsQ0FBQzRJLE1BQUgsQ0FBVSxHQUFWLEVBQWUsS0FBS3pILG9CQUFwQixDQUEvQjtBQUNBRSxJQUFBQSxPQUFPLENBQUM2QyxTQUFSLENBQWtCQyxTQUFsQixDQUE0QixlQUE1QjtBQUNIO0FBcFJJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFV0aWxzID0gcmVxdWlyZShcIlV0aWxzXCIpXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgY29pblVJOiBjYy5MYWJlbCxcclxuICAgICAgICBuYW1lVUk6IGNjLkVkaXRCb3gsXHJcbiAgICAgICAgY3VyUGxheWVyQW5pbTogc3AuU2tlbGV0b24sXHJcbiAgICAgICAgb25jZUNsaWNrOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3JlQnRuOiBjYy5Ob2RlLFxyXG4gICAgICAgIG1vcmVTcHJpdGVzOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIHNwcml0ZUluZGV4OiAwLFxyXG4gICAgICAgIGFjdGl2aXR5QnRuTm9kZTogY2MuTm9kZSxcclxuICAgICAgICBvcmlnaW5BY3Rpdml0eUJ0blBvczogbnVsbCxcclxuICAgIH0sXHJcblxyXG5cclxuICAgIG9uTG9hZCgpIHtcclxuICAgICAgICBHYW1lQXBwLmV2ZW50TWFuYWdlci5vbihFdmVudE5hbWVzLkVWRU5UX1NIT1dfQUNUSVZJVFlCVE4sIHRoaXMuc2hvd0FjdGl2aXR5QnRuLmJpbmQodGhpcykpXHJcbiAgICAgICAgR2FtZUFwcC5ldmVudE1hbmFnZXIub24oRXZlbnROYW1lcy5FVkVOVF9VUERBVEVfQ09JTl9TSE9XLCB0aGlzLnVwZGF0ZUNvaW5TaG93LmJpbmQodGhpcykpXHJcblxyXG4gICAgICAgIC8vIGlmICh3aW5kb3cudHQpIHtcclxuICAgICAgICAvLyAgICAgY29uc3Qgc3lzdGVtSW5mbyA9IHR0LmdldFN5c3RlbUluZm9TeW5jKCk7XHJcbiAgICAgICAgLy8gICAgIGlmIChzeXN0ZW1JbmZvLnBsYXRmb3JtICE9PSBcImlvc1wiICYmIHN5c3RlbUluZm8uYXBwTmFtZSAhPSBcIlhpR3VhXCIpIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMubW9yZUJ0bi5hY3RpdmUgPSB0cnVlXHJcbiAgICAgICAgLy8gICAgICAgICBUb29scy5zY2FsZVVwQW5kRG93bSh0aGlzLm1vcmVCdG4pXHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLm1vcmVCdG4ucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmNhbGxGdW5jKCgpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLm1vcmVCdG4uY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLm1vcmVTcHJpdGVzW3RoaXMuc3ByaXRlSW5kZXhdXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5zcHJpdGVJbmRleCsrXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaWYgKHRoaXMuc3ByaXRlSW5kZXggPT0gdGhpcy5tb3JlU3ByaXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5zcHJpdGVJbmRleCA9IDBcclxuICAgICAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICB9KSwgY2MuZGVsYXlUaW1lKDIpKS5yZXBlYXRGb3JldmVyKCkpXHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLm1vcmVCdG4uYWN0aXZlID0gZmFsc2VcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubW9yZUJ0bi5hY3RpdmUgPSB0cnVlXHJcbiAgICAgICAgLy8gICAgIFRvb2xzLnNjYWxlVXBBbmREb3dtKHRoaXMubW9yZUJ0bilcclxuICAgICAgICAvLyAgICAgdGhpcy5tb3JlQnRuLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5jYWxsRnVuYygoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLm1vcmVCdG4uY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLm1vcmVTcHJpdGVzW3RoaXMuc3ByaXRlSW5kZXhdXHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnNwcml0ZUluZGV4KytcclxuICAgICAgICAvLyAgICAgICAgIGlmICh0aGlzLnNwcml0ZUluZGV4ID09IHRoaXMubW9yZVNwcml0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5zcHJpdGVJbmRleCA9IDBcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgfSksIGNjLmRlbGF5VGltZSgyKSkucmVwZWF0Rm9yZXZlcigpKVxyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgR2FtZUFwcC5kYXRhTWFuYWdlci5pbml0U29tZUF0dHIoKVxyXG4gICAgICAgIEdhbWVBcHAuZGF0YU1hbmFnZXIuc2V0Q2hvb3NlZFNraW5JZChHYW1lQXBwLmRhdGFNYW5hZ2VyLnVzZXJEYXRhLmNob29zZWRTa2luSWQpXHJcbiAgICAgICAgdGhpcy51cGRhdGVDb2luU2hvdygpXHJcbiAgICAgICAgdGhpcy51cGRhdGVOYW1lU2hvdygpXHJcbiAgICAgICAgdGhpcy5pbml0U2tpblNob3coKVxyXG4gICAgICAgIHRoaXMub3JpZ2luQWN0aXZpdHlCdG5Qb3MgPSB0aGlzLmFjdGl2aXR5QnRuTm9kZS5wb3NpdGlvblxyXG4gICAgICAgIHRoaXMuc2hvd0FjdGl2aXR5QnRuKClcclxuICAgICAgICAvLyBpZiAod2luZG93LnR0KSB7XHJcbiAgICAgICAgLy8gICAgIHZhciBwaG9uZSA9IHR0LmdldFN5c3RlbUluZm9TeW5jKCk7XHJcbiAgICAgICAgLy8gICAgIHZhciB3ID0gcGhvbmUuc2NyZWVuV2lkdGhcclxuICAgICAgICAvLyAgICAgdmFyIGggPSBwaG9uZS5zY3JlZW5IZWlnaHQ7XHJcbiAgICAgICAgLy8gICAgIFV0aWxzLmFkZEJhbm5lcihcImFkZEJhbm5lclwiLCB7XHJcbiAgICAgICAgLy8gICAgICAgICB0b3A6IGggLSAoMjAwICogOSAvIDE2KSxcclxuICAgICAgICAvLyAgICAgICAgIGxlZnQ6IHcgLyAyIC0gMTAwLFxyXG4gICAgICAgIC8vICAgICAgICAgd2lkdGg6IDIwMFxyXG4gICAgICAgIC8vICAgICB9LCBudWxsLCBudWxsKVxyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgdmFyIHBhc3NEYXlzID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiRWF0Q2hpY2tlbl9wYXNzRGF5c1wiKVxyXG4gICAgICAgIGlmIChwYXNzRGF5cyA9PSBudWxsIHx8IHBhc3NEYXlzID09IHVuZGVmaW5lZCB8fCBwYXNzRGF5cyA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHBhc3NEYXlzID0gMFxyXG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJFYXRDaGlja2VuX3Bhc3NEYXlzXCIsIDApXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFzc0RheXMgPSBwYXJzZUludChwYXNzRGF5cylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkYXlzID0gMFxyXG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBkYXRlID0gcGFyc2VJbnQoZGF0ZS5nZXRUaW1lKCkgLyAxMDAwKVxyXG4gICAgICAgIHZhciBkYWlseURhdGUgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJFYXRDaGlja2VuX2RhaWx5RGF0ZVwiKVxyXG4gICAgICAgIGlmIChkYWlseURhdGUgPT0gbnVsbCB8fCBkYWlseURhdGUgPT0gdW5kZWZpbmVkIHx8IGRhaWx5RGF0ZSA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkVhdENoaWNrZW5fZGFpbHlEYXRlXCIsIGRhdGUpXHJcbiAgICAgICAgICAgIGRheXMgPSAxXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGFpbHlEYXRlID0gcGFyc2VJbnQoZGFpbHlEYXRlKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRlKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYWlseURhdGUpXHJcbiAgICAgICAgICAgIGlmIChkYXRlID49IGRhaWx5RGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0RhdGUgPSBkYXRlIC0gZGFpbHlEYXRlXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3dGltZSA9IFRvb2xzLnRvVGltZVN0cmluZzIobmV3RGF0ZSlcclxuICAgICAgICAgICAgICAgIGRheXMgPSBNYXRoLmZsb29yKG5ld3RpbWUuaG91ciAvIDI0KSArIDFcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi546w5Zyo5pe26Ze05q+U5LmL5YmN5pe26Ze05pep77yM6LCD5pe26Ze05LqG77yfXCIpXHJcbiAgICAgICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJFYXRDaGlja2VuX2RhaWx5RGF0ZVwiLCBkYXRlKVxyXG4gICAgICAgICAgICAgICAgZGF5cyA9IDFcclxuICAgICAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkVhdENoaWNrZW5fcGFzc0RheXNcIiwgMClcclxuICAgICAgICAgICAgICAgIHBhc3NEYXlzID0gMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF5cyAtIHBhc3NEYXlzID4gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaJp+ihjOS6huWkqeaVsOWKoOS4gFwiKVxyXG4gICAgICAgICAgICBwYXNzRGF5cyArPSAoZGF5cyAtIHBhc3NEYXlzKVxyXG4gICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmdsb2JhbERhdGEuY3VyRGFpbHlHb3QgPSBmYWxzZVxyXG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJFYXRDaGlja2VuX2RhaWx5R290U3RhdGVcIiwgZmFsc2UpO1xyXG4gICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmdsb2JhbERhdGEuYWN0aXZlVmFsdWUgPSAwXHJcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkVhdENoaWNrZW5fYWN0aXZlVmFsdWVcIiwgR2FtZUFwcC5kYXRhTWFuYWdlci5nbG9iYWxEYXRhLmFjdGl2ZVZhbHVlKVxyXG4gICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmdsb2JhbERhdGEucHJvZ3Jlc3NHaWZ0cyA9IFswLCAwLCAwLCAwXVxyXG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJFYXRDaGlja2VuX3Byb2dyZXNzR2lmdHNcIiwgSlNPTi5zdHJpbmdpZnkoR2FtZUFwcC5kYXRhTWFuYWdlci5nbG9iYWxEYXRhLnByb2dyZXNzR2lmdHMpKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJFYXRDaGlja2VuX3Bhc3NEYXlzXCIsIHBhc3NEYXlzKVxyXG4gICAgICAgIHZhciBkZXMgPSBwYXNzRGF5c1xyXG4gICAgICAgIGRlcyA9IGRlcyAlIDdcclxuICAgICAgICBpZiAoZGVzID09IDApIHtcclxuICAgICAgICAgICAgZGVzID0gN1xyXG4gICAgICAgIH1cclxuICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmdsb2JhbERhdGEuZGF5cyA9IGRlc1xyXG4gICAgICAgIGNvbnNvbGUubG9nKEdhbWVBcHAuZGF0YU1hbmFnZXIuZ2xvYmFsRGF0YS5jdXJEYWlseUdvdClcclxuICAgICAgICBpZiAoIUdhbWVBcHAuZGF0YU1hbmFnZXIuZ2xvYmFsRGF0YS5jdXJEYWlseUdvdCkge1xyXG4gICAgICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5zaG93UG9wdXAoJ0RhaWx5UG9wdXAnKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBHYW1lQXBwLnVpTWFuYWdlci5zaG93UG9wdXAoJ0RhaWx5UG9wdXAnKVxyXG5cclxuICAgICAgICBpZiAoR2FtZUFwcC5kYXRhTWFuYWdlci5nbG9iYWxEYXRhLnJlY29yZFN0YXRlID09IFJlY29yZFN0YXRlLlJFQURZKSB7XHJcbiAgICAgICAgICAgIFV0aWxzLnN0YXJ0UmVjb3JkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIEdhbWVBcHAuZGF0YU1hbmFnZXIuY2hhbmdlUmVjb3JkU3RhdGUoUmVjb3JkU3RhdGUuUkVDT1JEKVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5zaG93VG9hc3QoXCLlt7LliLDlvZXlsY/mnIDlpKfml7bplb8hXCIpXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnZpZGVvUGF0aCAhPSBudWxsICYmIHJlcy52aWRlb1BhdGggIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmdsb2JhbERhdGEucmVjb3JkUGF0aCA9IHJlcy52aWRlb1BhdGhcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5yZWNvcmRlci5zdG9wKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgb25EZXN0cm95KCkge1xyXG4gICAgICAgIEdhbWVBcHAuZXZlbnRNYW5hZ2VyLnJlbW92ZUxpc3RlbmVyKEV2ZW50TmFtZXMuRVZFTlRfU0hPV19BQ1RJVklUWUJUTilcclxuICAgICAgICBHYW1lQXBwLmV2ZW50TWFuYWdlci5yZW1vdmVMaXN0ZW5lcihFdmVudE5hbWVzLkVWRU5UX1VQREFURV9DT0lOX1NIT1cpXHJcbiAgICB9LFxyXG4gICAgLy8gdXBkYXRlIChkdCkge30sXHJcblxyXG4gICAgc29sb0J0bkNsaWNrKCkge1xyXG4gICAgICAgIEdhbWVBcHAuYXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoJ2NsaWNrJyk7XHJcbiAgICAgICAgR2FtZUFwcC51aU1hbmFnZXIuc2hvd1BvcHVwKCdHaWZ0UG9wdXAnLCAobm9kZSkgPT4ge1xyXG4gICAgICAgICAgICBub2RlLmdldENvbXBvbmVudChcIkdpZnRQb3B1cFwiKS5pbml0KFwiUHJlcGFyZVVJXCIsIDEpXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBvbk5hbWVDaGFuZ2VkKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gR2FtZUFwcC5kYXRhTWFuYWdlci5zZXRQbGF5ZXJOYW1lKGV2ZW50LnN0cmluZylcclxuICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLnNldFBsYXllck5hbWUoVG9vbHMuZ2V0UmFuZG9tRWxlbWVudChHYW1lQXBwLmRhdGFNYW5hZ2VyLmdsb2JhbERhdGEucGxheWVyTmFtZUFycikpXHJcbiAgICAgICAgdGhpcy51cGRhdGVOYW1lU2hvdygpXHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZUNvaW5TaG93KCkge1xyXG4gICAgICAgIHRoaXMuY29pblVJLnN0cmluZyA9IEdhbWVBcHAuZGF0YU1hbmFnZXIudXNlckRhdGEuY29pbk51bVxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVOYW1lU2hvdygpIHtcclxuICAgICAgICAvLyB0aGlzLm5hbWVVSS5zdHJpbmcgPSBHYW1lQXBwLmRhdGFNYW5hZ2VyLnVzZXJEYXRhLnBsYXllck5hbWVcclxuICAgICAgICB0aGlzLm5hbWVVSS5ub2RlLmNoaWxkcmVuWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gR2FtZUFwcC5kYXRhTWFuYWdlci51c2VyRGF0YS5wbGF5ZXJOYW1lXHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRTa2luU2hvdygpIHtcclxuICAgICAgICBpZiAoR2FtZUFwcC5kYXRhTWFuYWdlci51c2VyRGF0YS5jaG9vc2VkU2tpbklkIDwgMjEpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXJBbmltLnNrZWxldG9uRGF0YSA9IEdhbWVBcHAudWlNYW5hZ2VyLm5vcm1hbFNraW5EYXRhO1xyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllckFuaW0uc2V0U2tpbihHYW1lQXBwLmRhdGFNYW5hZ2VyLmdldFNraW5EYXRhQnlJZChHYW1lQXBwLmRhdGFNYW5hZ2VyLmdldENob29zZWRTa2luSWQoKSkuc2tpbm5hbWUpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXJBbmltLnNrZWxldG9uRGF0YSA9IEdhbWVBcHAudWlNYW5hZ2VyLmFkdmFuY2VTa2luRGF0YUdyb3VwW0dhbWVBcHAuZGF0YU1hbmFnZXIudXNlckRhdGEuY2hvb3NlZFNraW5JZCAtIDIxXVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoR2FtZUFwcC5kYXRhTWFuYWdlci51c2VyRGF0YS5jaG9vc2VkU2tpbklkIDwgMjEpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXJBbmltLnNldEFuaW1hdGlvbigwLCAnYXdhaXQnLCB0cnVlKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyQW5pbS5zZXRBbmltYXRpb24oMCwgJ2F3YWl0X21haW5fMScsIGZhbHNlKVxyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllckFuaW0uc2V0Q29tcGxldGVMaXN0ZW5lcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllckFuaW0uc2V0QW5pbWF0aW9uKDAsICdhd2FpdF9tYWluXycgKyBUb29scy5yYW5kb21OdW0oMSwgMyksIGZhbHNlKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNvaW5CdG5DbGljaygpIHtcclxuICAgICAgICBpZiAod2luZG93Lnd4KSB7XHJcbiAgICAgICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuaaguacquW8gOaUvu+8gVwiKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoIXRoaXMub25jZUNsaWNrKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5vbmNlQ2xpY2sgPSBmYWxzZVxyXG4gICAgICAgIEdhbWVBcHAuYXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoJ2NsaWNrJylcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXNcclxuXHJcbiAgICAgICAgaWYgKHdpbmRvdy50dCkge1xyXG4gICAgICAgICAgICBVdGlscy5hZGRWaWRlbyhcImFkZFZpZGVvXCIsIGZ1bmN0aW9uICgpIHsgLy/nnIvlrozkuoZcclxuICAgICAgICAgICAgICAgIHNlbGYub25jZUNsaWNrID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgR2FtZUFwcC51aU1hbmFnZXIuc2hvd1RvYXN0KFwi6I635b6XNTAw6YeR5biBXCIpXHJcbiAgICAgICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmFkZENvaW4oNTAwKVxyXG4gICAgICAgICAgICAgICAgc2VsZi51cGRhdGVDb2luU2hvdygpXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChfaW5mbykgeyAvL+ayoeeci+WujFxyXG4gICAgICAgICAgICAgICAgc2VsZi5vbmNlQ2xpY2sgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBfaW5mbyA/IEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChfaW5mbykgOiBHYW1lQXBwLnVpTWFuYWdlci5zaG93VG9hc3QoXCLmnKrnnIvlrozop4bpopHvvIFcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLm9uY2VDbGljayA9IHRydWVcclxuICAgICAgICAgICAgR2FtZUFwcC51aU1hbmFnZXIuc2hvd1RvYXN0KFwi6Z2e55yf5py6LOiOt+W+lzUwMOmHkeW4gVwiKVxyXG4gICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmFkZENvaW4oNTAwKVxyXG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUNvaW5TaG93KClcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIHNraW5CdG5DbGljaygpIHtcclxuICAgICAgICBHYW1lQXBwLmF1ZGlvTWFuYWdlci5wbGF5RWZmZWN0KCdjbGljaycpXHJcbiAgICAgICAgR2FtZUFwcC51aU1hbmFnZXIuc2hvd1VJKCdTa2luVUknKVxyXG4gICAgfSxcclxuICAgIGJveEJ0bkNsaWNrKCkge1xyXG4gICAgICAgIEdhbWVBcHAuYXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoJ2NsaWNrJylcclxuICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5zaG93VUkoJ0JveFVJJylcclxuICAgIH0sXHJcbiAgICByYW5rQnRuQ2xpY2soKSB7XHJcbiAgICAgICAgR2FtZUFwcC5hdWRpb01hbmFnZXIucGxheUVmZmVjdCgnY2xpY2snKVxyXG4gICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dVSSgnUmFua1VJJylcclxuICAgIH0sXHJcbiAgICB3ZWFwb25CdG5DbGljaygpIHtcclxuICAgICAgICBHYW1lQXBwLmF1ZGlvTWFuYWdlci5wbGF5RWZmZWN0KCdjbGljaycpXHJcbiAgICAgICAgR2FtZUFwcC51aU1hbmFnZXIuc2hvd1VJKCdHdW5VSScpXHJcbiAgICB9LFxyXG4gICAgc2hvcEJ0bkNsaWNrKCkge1xyXG4gICAgICAgIEdhbWVBcHAuYXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoJ2NsaWNrJylcclxuICAgIH0sXHJcbiAgICBzaGFyZUJ0bkNsaWNrKCkge1xyXG4gICAgICAgIEdhbWVBcHAuYXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoJ2NsaWNrJylcclxuICAgICAgICBVdGlscy5zaGFyZUZyb21Ib21lUGFnZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuaEn+iwouaCqOeahOaUr+aMge+8jOi1oOmAgTUw6YeR5biBXCIpXHJcbiAgICAgICAgICAgIEdhbWVBcHAuZGF0YU1hbmFnZXIuYWRkQ29pbig1MClcclxuICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuWIhuS6q+Wksei0pSFcIilcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIG1vcmVHYW1lQnRuQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5zaG93QWN0aXZpdHlCdG4oKVxyXG4gICAgICAgIGlmICh3aW5kb3cudHQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtSW5mbyA9IHR0LmdldFN5c3RlbUluZm9TeW5jKCk7XHJcbiAgICAgICAgICAgIC8vIGlPUyDkuI3mlK/mjIHvvIzlu7rorq7lhYjmo4DmtYvlho3kvb/nlKhcclxuICAgICAgICAgICAgaWYgKHN5c3RlbUluZm8ucGxhdGZvcm0gIT09IFwiaW9zXCIpIHtcclxuICAgICAgICAgICAgICAgIC8vIOaJk+W8gOS6kui3s+W8ueeql1xyXG4gICAgICAgICAgICAgICAgdHQuc2hvd01vcmVHYW1lc01vZGFsKHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBMYXVuY2hPcHRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcElkOiBcInR0WFhYWFhYXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogXCJmb289YmFyJmJhej1xdXhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhRGF0YToge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB7Li4ufVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWNjZXNzXCIsIHJlcy5lcnJNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmYWlsXCIsIHJlcy5lcnJNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNob3dBY3Rpdml0eUJ0bigpIHtcclxuICAgICAgICB0aGlzLmFjdGl2aXR5QnRuTm9kZS5nZXRDb21wb25lbnQoY2MuQnV0dG9uKS5pbnRlcmFjdGFibGUgPSB0cnVlXHJcbiAgICAgICAgdGhpcy5hY3Rpdml0eUJ0bk5vZGUuc3RvcEFsbEFjdGlvbnMoKVxyXG4gICAgICAgIHRoaXMuYWN0aXZpdHlCdG5Ob2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5tb3ZlVG8oMC4yLCBjYy52Mih0aGlzLm9yaWdpbkFjdGl2aXR5QnRuUG9zKS5hZGQoY2MudjIoOTAsIDApKSkuZWFzaW5nKGNjLmVhc2VCYWNrT3V0KCkpLCBjYy5jYWxsRnVuYygoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZpdHlCdG5Ob2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5tb3ZlQnkoMC44LCBjYy52MigyMCwgMCkpLmVhc2luZyhjYy5lYXNlQm91bmNlT3V0KDQpKSwgY2MubW92ZUJ5KDAuMiwgY2MudjIoLTIwLCAwKSksIGNjLm1vdmVCeSgwLjUsIGNjLnYyKDIwLCAwKSkuZWFzaW5nKGNjLmVhc2VCb3VuY2VPdXQoNCkpLCBjYy5tb3ZlQnkoMC4yLCBjYy52MigtMjAsIDApKSwgY2MuZGVsYXlUaW1lKDEpKS5yZXBlYXRGb3JldmVyKCkpXHJcbiAgICAgICAgfSkpKVxyXG4gICAgfSxcclxuICAgIGFjdGl2aXR5QnRuQ2xpY2soKSB7XHJcbiAgICAgICAgR2FtZUFwcC5hdWRpb01hbmFnZXIucGxheUVmZmVjdCgnY2xpY2snKVxyXG4gICAgICAgIHRoaXMuYWN0aXZpdHlCdG5Ob2RlLmdldENvbXBvbmVudChjYy5CdXR0b24pLmludGVyYWN0YWJsZSA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5hY3Rpdml0eUJ0bk5vZGUuc3RvcEFsbEFjdGlvbnMoKVxyXG4gICAgICAgIHRoaXMuYWN0aXZpdHlCdG5Ob2RlLnJ1bkFjdGlvbihjYy5tb3ZlVG8oMC4yLCB0aGlzLm9yaWdpbkFjdGl2aXR5QnRuUG9zKSlcclxuICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5zaG93UG9wdXAoXCJBY3Rpdml0eVBvcHVwXCIpXHJcbiAgICB9LFxyXG59KTtcclxuIl19