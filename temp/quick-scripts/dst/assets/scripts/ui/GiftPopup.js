
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui/GiftPopup.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '97122PwMglKv7Cq3WJKcLoh', 'GiftPopup');
// scripts/ui/GiftPopup.js

"use strict";

var Utils = require("Utils");

cc.Class({
  "extends": cc.Component,
  properties: {
    closeBtnNode: cc.Node,
    sureBtnNode: cc.Node,
    nextUIName: "",
    _popupType: 1,
    titleUI: cc.Label,
    coinSp: cc.Node,
    coinInfo: cc.Node,
    speedSp: cc.Node,
    speedInfo: cc.Node,
    onceClick: {
      "default": true,
      visible: false
    }
  },
  onLoad: function onLoad() {
    var _this = this;

    this.node.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(function () {
      _this.closeBtnNode.active = true;
    })));
    Tools.scaleUpAndDowm(this.sureBtnNode);
  },
  init: function init(_name, _type) {
    this.nextUIName = _name;
    this._popupType = _type;

    if (_type == 1) {
      this.titleUI.string = "金币大礼包";
      this.coinSp.active = true;
      this.coinInfo.active = true;
    } else if (_type == 2) {
      this.titleUI.string = "加速大礼包";
      this.speedSp.active = true;
      this.speedInfo.active = true;
    }
  },
  sureBtnClick: function sureBtnClick() {
    if (!this.onceClick) return;
    this.onceClick = false;
    GameApp.audioManager.playEffect('click');
    var self = this;

    if (window.tt) {
      Utils.addVideo("addVideo", function () {
        //看完了
        self.onceClick = true;

        if (self._popupType == 1) {
          GameApp.uiManager.showToast("获得500金币");
          GameApp.dataManager.addCoin(500);
          self.closeBtnClick();
        } else if (self._popupType == 2) {
          GameApp.uiManager.showToast("获得加速");
          self.closeBtnClick2(true);
        }
      }, function (_info) {
        //没看完
        self.onceClick = true;
        _info ? GameApp.uiManager.showToast(_info) : GameApp.uiManager.showToast("未看完视频！");
      });
    } else {
      if (self._popupType == 1) {
        if (window.wx) {
          GameApp.uiManager.showToast("暂未开放！");
          self.closeBtnClick();
          return;
        }

        GameApp.uiManager.showToast("福利,获得500金币");
        GameApp.dataManager.addCoin(500);
        self.closeBtnClick();
      } else if (self._popupType == 2) {
        if (window.wx) {
          GameApp.uiManager.showToast("暂未开放！");
          self.closeBtnClick2(true);
          return;
        }

        GameApp.uiManager.showToast("福利,获得加速");
        self.closeBtnClick2(true);
      }
    }
  },
  closeBtnClick: function closeBtnClick() {
    if (this._popupType == 1) {
      GameApp.audioManager.playEffect('click');
      GameApp.uiManager.closePopup("GiftPopup");
      GameApp.uiManager.showUI(this.nextUIName);
    } else if (this._popupType == 2) {
      this.closeBtnClick2(false);
    }
  },
  closeBtnClick2: function closeBtnClick2(_speedUp) {
    GameApp.audioManager.playEffect('click');
    GameApp.uiManager.closePopup("GiftPopup");
    GameApp.uiManager.getUI("PrepareUI").getComponent("PrepareUI").showPlaneUI(_speedUp);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlcXEdpZnRQb3B1cC5qcyJdLCJuYW1lcyI6WyJVdGlscyIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImNsb3NlQnRuTm9kZSIsIk5vZGUiLCJzdXJlQnRuTm9kZSIsIm5leHRVSU5hbWUiLCJfcG9wdXBUeXBlIiwidGl0bGVVSSIsIkxhYmVsIiwiY29pblNwIiwiY29pbkluZm8iLCJzcGVlZFNwIiwic3BlZWRJbmZvIiwib25jZUNsaWNrIiwidmlzaWJsZSIsIm9uTG9hZCIsIm5vZGUiLCJydW5BY3Rpb24iLCJzZXF1ZW5jZSIsImRlbGF5VGltZSIsImNhbGxGdW5jIiwiYWN0aXZlIiwiVG9vbHMiLCJzY2FsZVVwQW5kRG93bSIsImluaXQiLCJfbmFtZSIsIl90eXBlIiwic3RyaW5nIiwic3VyZUJ0bkNsaWNrIiwiR2FtZUFwcCIsImF1ZGlvTWFuYWdlciIsInBsYXlFZmZlY3QiLCJzZWxmIiwid2luZG93IiwidHQiLCJhZGRWaWRlbyIsInVpTWFuYWdlciIsInNob3dUb2FzdCIsImRhdGFNYW5hZ2VyIiwiYWRkQ29pbiIsImNsb3NlQnRuQ2xpY2siLCJjbG9zZUJ0bkNsaWNrMiIsIl9pbmZvIiwid3giLCJjbG9zZVBvcHVwIiwic2hvd1VJIiwiX3NwZWVkVXAiLCJnZXRVSSIsImdldENvbXBvbmVudCIsInNob3dQbGFuZVVJIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0FDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxZQUFZLEVBQUVKLEVBQUUsQ0FBQ0ssSUFEVDtBQUVSQyxJQUFBQSxXQUFXLEVBQUVOLEVBQUUsQ0FBQ0ssSUFGUjtBQUdSRSxJQUFBQSxVQUFVLEVBQUUsRUFI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ZixNQUFBQSxPQUFPLENBQUNPLFNBQVIsQ0FBa0JTLE1BQWxCLENBQXlCLEtBQUt4QyxVQUE5QjtBQUNILEtBSkQsTUFJTyxJQUFJLEtBQUtDLFVBQUwsSUFBbUIsQ0FBdkIsRUFBMEI7QUFDN0IsV0FBS21DLGNBQUwsQ0FBb0IsS0FBcEI7QUFDSDtBQUNKLEdBOUZJO0FBK0ZMQSxFQUFBQSxjQS9GSywwQkErRlVLLFFBL0ZWLEVBK0ZvQjtBQUNyQmpCLElBQUFBLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsVUFBckIsQ0FBZ0MsT0FBaEM7QUFDQUYsSUFBQUEsT0FBTyxDQUFDTyxTQUFSLENBQWtCUSxVQUFsQixDQUE2QixXQUE3QjtBQUNBZixJQUFBQSxPQUFPLENBQUNPLFNBQVIsQ0FBa0JXLEtBQWxCLENBQXdCLFdBQXhCLEVBQXFDQyxZQUFyQyxDQUFrRCxXQUFsRCxFQUErREMsV0FBL0QsQ0FBMkVILFFBQTNFO0FBQ0g7QUFuR0ksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVXRpbHMgPSByZXF1aXJlKFwiVXRpbHNcIilcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBjbG9zZUJ0bk5vZGU6IGNjLk5vZGUsXHJcbiAgICAgICAgc3VyZUJ0bk5vZGU6IGNjLk5vZGUsXHJcbiAgICAgICAgbmV4dFVJTmFtZTogXCJcIixcclxuICAgICAgICBfcG9wdXBUeXBlOiAxLFxyXG5cclxuICAgICAgICB0aXRsZVVJOiBjYy5MYWJlbCxcclxuICAgICAgICBjb2luU3A6IGNjLk5vZGUsXHJcbiAgICAgICAgY29pbkluZm86IGNjLk5vZGUsXHJcbiAgICAgICAgc3BlZWRTcDogY2MuTm9kZSxcclxuICAgICAgICBzcGVlZEluZm86IGNjLk5vZGUsXHJcbiAgICAgICAgb25jZUNsaWNrOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgb25Mb2FkKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKDMpLCBjYy5jYWxsRnVuYygoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VCdG5Ob2RlLmFjdGl2ZSA9IHRydWVcclxuICAgICAgICB9KSkpXHJcbiAgICAgICAgVG9vbHMuc2NhbGVVcEFuZERvd20odGhpcy5zdXJlQnRuTm9kZSlcclxuICAgIH0sXHJcbiAgICBpbml0KF9uYW1lLCBfdHlwZSkge1xyXG4gICAgICAgIHRoaXMubmV4dFVJTmFtZSA9IF9uYW1lXHJcbiAgICAgICAgdGhpcy5fcG9wdXBUeXBlID0gX3R5cGVcclxuICAgICAgICBpZiAoX3R5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpdGxlVUkuc3RyaW5nID0gXCLph5HluIHlpKfnpLzljIVcIlxyXG4gICAgICAgICAgICB0aGlzLmNvaW5TcC5hY3RpdmUgPSB0cnVlXHJcbiAgICAgICAgICAgIHRoaXMuY29pbkluZm8uYWN0aXZlID0gdHJ1ZVxyXG4gICAgICAgIH0gZWxzZSBpZiAoX3R5cGUgPT0gMikge1xyXG4gICAgICAgICAgICB0aGlzLnRpdGxlVUkuc3RyaW5nID0gXCLliqDpgJ/lpKfnpLzljIVcIlxyXG4gICAgICAgICAgICB0aGlzLnNwZWVkU3AuYWN0aXZlID0gdHJ1ZVxyXG4gICAgICAgICAgICB0aGlzLnNwZWVkSW5mby5hY3RpdmUgPSB0cnVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgc3VyZUJ0bkNsaWNrKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5vbmNlQ2xpY2spIHJldHVybjtcclxuICAgICAgICB0aGlzLm9uY2VDbGljayA9IGZhbHNlXHJcbiAgICAgICAgR2FtZUFwcC5hdWRpb01hbmFnZXIucGxheUVmZmVjdCgnY2xpY2snKVxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpc1xyXG5cclxuICAgICAgICBpZiAod2luZG93LnR0KSB7XHJcbiAgICAgICAgICAgIFV0aWxzLmFkZFZpZGVvKFwiYWRkVmlkZW9cIiwgZnVuY3Rpb24gKCkgeyAvL+eci+WujOS6hlxyXG4gICAgICAgICAgICAgICAgc2VsZi5vbmNlQ2xpY2sgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fcG9wdXBUeXBlID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5zaG93VG9hc3QoXCLojrflvpc1MDDph5HluIFcIilcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmFkZENvaW4oNTAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VCdG5DbGljaygpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuX3BvcHVwVHlwZSA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZUFwcC51aU1hbmFnZXIuc2hvd1RvYXN0KFwi6I635b6X5Yqg6YCfXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZUJ0bkNsaWNrMih0cnVlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKF9pbmZvKSB7IC8v5rKh55yL5a6MXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uY2VDbGljayA9IHRydWVcclxuICAgICAgICAgICAgICAgIF9pbmZvID8gR2FtZUFwcC51aU1hbmFnZXIuc2hvd1RvYXN0KF9pbmZvKSA6IEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuacqueci+WujOinhumike+8gVwiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLl9wb3B1cFR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy53eCkge1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuaaguacquW8gOaUvu+8gVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VCdG5DbGljaygpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5zaG93VG9hc3QoXCLnpo/liKks6I635b6XNTAw6YeR5biBXCIpXHJcbiAgICAgICAgICAgICAgICBHYW1lQXBwLmRhdGFNYW5hZ2VyLmFkZENvaW4oNTAwKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5jbG9zZUJ0bkNsaWNrKClcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3B1cFR5cGUgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy53eCkge1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuaaguacquW8gOaUvu+8gVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VCdG5DbGljazIodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dUb2FzdChcIuemj+WIqSzojrflvpfliqDpgJ9cIilcclxuICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VCdG5DbGljazIodHJ1ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gICAgY2xvc2VCdG5DbGljaygpIHtcclxuICAgICAgICBpZiAodGhpcy5fcG9wdXBUeXBlID09IDEpIHtcclxuICAgICAgICAgICAgR2FtZUFwcC5hdWRpb01hbmFnZXIucGxheUVmZmVjdCgnY2xpY2snKVxyXG4gICAgICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5jbG9zZVBvcHVwKFwiR2lmdFBvcHVwXCIpXHJcbiAgICAgICAgICAgIEdhbWVBcHAudWlNYW5hZ2VyLnNob3dVSSh0aGlzLm5leHRVSU5hbWUpXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9wb3B1cFR5cGUgPT0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlQnRuQ2xpY2syKGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjbG9zZUJ0bkNsaWNrMihfc3BlZWRVcCkge1xyXG4gICAgICAgIEdhbWVBcHAuYXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoJ2NsaWNrJylcclxuICAgICAgICBHYW1lQXBwLnVpTWFuYWdlci5jbG9zZVBvcHVwKFwiR2lmdFBvcHVwXCIpXHJcbiAgICAgICAgR2FtZUFwcC51aU1hbmFnZXIuZ2V0VUkoXCJQcmVwYXJlVUlcIikuZ2V0Q29tcG9uZW50KFwiUHJlcGFyZVVJXCIpLnNob3dQbGFuZVVJKF9zcGVlZFVwKVxyXG4gICAgfVxyXG59KTtcclxuIl19