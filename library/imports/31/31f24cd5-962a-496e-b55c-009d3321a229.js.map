{"version":3,"sources":["assets\\scripts\\ui\\PlaneUI.js"],"names":["cc","Class","Component","properties","planeNode","Node","mapNode","_chooseType","_speedUp","onLoad","init","angleArr","posIndex","Tools","randomNum","setPosition","node","children","convertToNodeSpaceAR","convertToWorldSpaceAR","v2","angle","runAction","moveTo","position","GameApp","audioManager","playEffect","jumpBtnClick","stopAllActions","uiManager","showUI","allL","curL","sub","mag","bili","getComponent"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        planeNode: cc.Node,\r\n        mapNode: cc.Node,\r\n        _chooseType: 0, //0是左对角,1是右对角\r\n        _speedUp: false,\r\n    },\r\n\r\n    onLoad() {\r\n\r\n    },\r\n    init(_speedUp) {\r\n        this._speedUp = _speedUp\r\n        var angleArr = [-135, 135, 45, -45]\r\n        var posIndex = Tools.randomNum(0, 3)\r\n        this._chooseType = posIndex % 2\r\n        this.planeNode.setPosition(this.node.children[0].convertToNodeSpaceAR(this.mapNode.children[posIndex].convertToWorldSpaceAR(cc.v2(0, 0))))\r\n        this.planeNode.angle = angleArr[posIndex]\r\n        switch (posIndex) {\r\n            case 0: this.planeNode.runAction(cc.moveTo(5, this.mapNode.children[2].position)); break;\r\n            case 1: this.planeNode.runAction(cc.moveTo(5, this.mapNode.children[3].position)); break;\r\n            case 2: this.planeNode.runAction(cc.moveTo(5, this.mapNode.children[0].position)); break;\r\n            case 3: this.planeNode.runAction(cc.moveTo(5, this.mapNode.children[1].position)); break;\r\n        }\r\n        GameApp.audioManager.playEffect('plane', 1, 2)\r\n    },\r\n    // update (dt) {},\r\n    jumpBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        this.planeNode.stopAllActions()\r\n        GameApp.uiManager.showUI('GameUI', (node) => {\r\n            var allL = 0\r\n            var curL = 0\r\n            // var tempChooseType = this._chooseType % 2\r\n            if (this._chooseType == 0) {\r\n                allL = cc.v2(this.mapNode.children[0].position).sub(this.mapNode.children[2].position).mag()\r\n                curL = cc.v2(this.planeNode.position).sub(this.mapNode.children[0].position).mag()\r\n            } else {\r\n                allL = cc.v2(this.mapNode.children[1].position).sub(this.mapNode.children[3].position).mag()\r\n                curL = cc.v2(this.planeNode.position).sub(this.mapNode.children[3].position).mag()\r\n            }\r\n            var bili = curL / allL\r\n            node.getComponent(\"GameUI\").init(this._chooseType, bili, this._speedUp)\r\n        })\r\n    },\r\n\r\n});\r\n"]}