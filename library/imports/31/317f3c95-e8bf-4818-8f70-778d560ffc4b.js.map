{"version":3,"sources":["assets\\scripts\\manager\\AudioManager.js"],"names":["cc","Class","name","properties","_musicOn","_musicAudioID","_musicName","_effectOn","_effectAudioID","_Audios","ctor","game","on","EVENT_HIDE","console","log","audioEngine","pauseAll","EVENT_SHOW","resumeAll","tempSound","sys","localStorage","getItem","undefined","getMusicName","AudioClip","raw","getEffectName","playMusic","restart","stopMusic","loader","loadRes","err","clip","setMusic","setItem","stop","playEffect","_volume","_loop","a","play","setEffect"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    name: \"AudioManager\",\r\n\r\n    properties: {\r\n        _musicOn: true,\r\n        _musicAudioID: null,\r\n        _musicName: '',\r\n\r\n        _effectOn: true,\r\n        _effectAudioID: null,\r\n\r\n        _Audios: {\r\n            default: {},\r\n        },\r\n    },\r\n\r\n    ctor() {\r\n        cc.game.on(cc.game.EVENT_HIDE, function () {\r\n            console.log(\"cc.audioEngine.pauseAll\");\r\n            cc.audioEngine.pauseAll();\r\n        });\r\n        cc.game.on(cc.game.EVENT_SHOW, function () {\r\n            console.log(\"cc.audioEngine.resumeAll\");\r\n            cc.audioEngine.resumeAll();\r\n        });\r\n        // var tempMusic = cc.sys.localStorage.getItem('CrushAnt_Music');\r\n        var tempSound = cc.sys.localStorage.getItem('EatChicken_Sound');\r\n        // if (tempMusic != null && tempMusic != '' && tempMusic != undefined) {\r\n        //     tempMusic = (tempMusic == \"true\" ? true : false)\r\n        //     this._musicOn = tempMusic\r\n        //     this._effectOn = tempMusic\r\n        // }\r\n        if (tempSound != null && tempSound != '' && tempSound != undefined) {\r\n            tempSound = (tempSound == \"true\" ? true : false)\r\n            this._effectOn = tempSound\r\n        }\r\n    },\r\n\r\n    getMusicName(name) {\r\n        return cc.AudioClip.raw('resources/audio/music/' + name + '.mp3')\r\n    },\r\n\r\n    getEffectName(name) {\r\n        return cc.AudioClip.raw('resources/audio/effect/' + name + '.mp3')\r\n    },\r\n\r\n    playMusic(name, restart) {\r\n        if (name === '' || this._musicName === name && !restart) {\r\n            return;\r\n        }\r\n        this._musicName = name;\r\n        if (this._musicOn) {\r\n            cc.audioEngine.stopMusic(this._musicAudioID);\r\n\r\n            cc.loader.loadRes('audio/music/' + name + '.mp3', cc.AudioClip, (err, clip) => {\r\n                this._musicAudioID = cc.audioEngine.playMusic(clip, true, true)\r\n            });\r\n            // this._musicAudioID = cc.audioEngine.play(this.getMusicName(name), true, 1);\r\n        }\r\n    },\r\n\r\n    setMusic(on) {\r\n        this._musicOn = on;\r\n        cc.sys.localStorage.setItem('MUSIC_ON', '' + on);\r\n        if (on) {\r\n            this.playMusic(this._musicName, true);\r\n        } else {\r\n            cc.audioEngine.stop(this._musicAudioID);\r\n        }\r\n    },\r\n\r\n    playEffect(name, _volume, _loop) {//_loop=1为清除上次的循环音效,_loop=2为循环此次音效\r\n        if (this._effectOn) {\r\n            _loop == 1 && cc.audioEngine.stop(this._effectAudioID);\r\n            cc.loader.loadRes('audio/effect/' + name, cc.AudioClip, (err, clip) => {\r\n                var a = cc.audioEngine.play(clip, _loop == 2, _volume || 1);\r\n                // cc.audioEngine.setVolume(_volume)\r\n                // console.log(cc.audioEngine)\r\n                if (_loop == 2) {\r\n                    this._effectAudioID = a\r\n                }\r\n            });\r\n\r\n\r\n            // this._effectAudioID = cc.audioEngine.play(this.getEffectName(name), _loop == 2, _volume);\r\n        }\r\n    },\r\n\r\n    setEffect(on) {\r\n        this._effectOn = on;\r\n        cc.sys.localStorage.setItem('EatChicken_Sound', '' + on);\r\n        if (!on) {\r\n            cc.audioEngine.stop(this._effectAudioID);\r\n        }\r\n    },\r\n});\r\n"]}