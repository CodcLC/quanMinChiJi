{"version":3,"sources":["assets\\scripts\\ui\\PrepareUI.js"],"names":["cc","Class","Component","properties","joystick","type","Node","tooltip","soundNode","shootBtn","reloadBtnNode","amoUI","Label","allRoleNumUI","weaponBtnNode","prepareTopNode","countDownSpGroup","SpriteFrame","_shootFlag","_shootTimer","_reloadFlag","_reloadTimer","_timeCountDown","_onceCountDownAnim","_onceExecute","onLoad","GameApp","dataManager","globalData","isInGame","eventManager","on","EventNames","EVENT_UPDATE_AMO_SHOW","updateAmoShow","bind","EVENT_SHOW_GUN_UI","updateGunUIShow","EVENT_SHOW_RELOAD_UI","updateReloadUIShow","EVENT_SHOW_ALLROLENUM_UI","updateAllRoleNumUIShow","EventType","TOUCH_START","onTouchBegin","TOUCH_END","onTouchLeave","TOUCH_CANCEL","uiManager","showGame","children","runAction","rotateBy","repeatForever","sequence","callFunc","active","delayTime","inGameKillNum","push","_killNum","_belongName","userData","playerName","updateSoundBtnShow","onDestroy","removeListener","update","dt","shootInterval","shoot","reloadAmo","countDownAnim","getComponent","Sprite","spriteFrame","Math","floor","showPopup","node","init","showPlaneUI","_speedUp","showUI","log","audioManager","playEffect","seq","scaleTo","event","emit","EVENT_AIM","EVENT_PLAYER_SHOOT","string","curAmoNum","EVENT_UPDATE_TOPBAR_SHOW","_gunData","console","commonAtlas","getSpriteFrame","weaponid","name","scaleX","scaleY","easing","easeBackOut","allRoleArr","length","reloadBtnClick","reloadInterval","EVENT_PLAYER_RELOAD","weaponBtnClick","EVENT_PICKUP_WEAPON","backBtnClick","soundBtnClick","onoff","_effectOn","setEffect"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAE;AACN,iBAAS,IADH;AAENC,MAAAA,IAAI,EAAEL,EAAE,CAACM,IAFH;AAGNC,MAAAA,OAAO,EAAE;AAHH,KADF;AAMRC,IAAAA,SAAS,EAAER,EAAE,CAACM,IANN;AAORG,IAAAA,QAAQ,EAAET,EAAE,CAACM,IAPL;AAQRI,IAAAA,aAAa,EAAEV,EAAE,CAACM,IARV;AASRK,IAAAA,KAAK,EAAEX,EAAE,CAACY,KATF;AAURC,IAAAA,YAAY,EAAEb,EAAE,CAACY,KAVT;AAWRE,IAAAA,aAAa,EAAEd,EAAE,CAACM,IAXV;AAYRS,IAAAA,cAAc,EAAEf,EAAE,CAACM,IAZX;AAaRU,IAAAA,gBAAgB,EAAE,CAAChB,EAAE,CAACiB,WAAJ,CAbV;AAeRC,IAAAA,UAAU,EAAE,KAfJ;AAgBRC,IAAAA,WAAW,EAAE,CAhBL;AAiBRC,IAAAA,WAAW,EAAE,KAjBL;AAkBRC,IAAAA,YAAY,EAAE,CAlBN;AAoBRC,IAAAA,cAAc,EAAE,EApBR;AAqBRC,IAAAA,kBAAkB,EAAE,KArBZ;AAsBRC,IAAAA,YAAY,EAAE;AAtBN,GAHP;AA4BLC,EAAAA,MA5BK,oBA4BI;AAAA;;AACLC,IAAAA,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+BC,QAA/B,GAA0C,KAA1C;AACAH,IAAAA,OAAO,CAACI,YAAR,CAAqBC,EAArB,CAAwBC,UAAU,CAACC,qBAAnC,EAA0D,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAA1D;AACAT,IAAAA,OAAO,CAACI,YAAR,CAAqBC,EAArB,CAAwBC,UAAU,CAACI,iBAAnC,EAAsD,KAAKC,eAAL,CAAqBF,IAArB,CAA0B,IAA1B,CAAtD;AACAT,IAAAA,OAAO,CAACI,YAAR,CAAqBC,EAArB,CAAwBC,UAAU,CAACM,oBAAnC,EAAyD,KAAKC,kBAAL,CAAwBJ,IAAxB,CAA6B,IAA7B,CAAzD;AACAT,IAAAA,OAAO,CAACI,YAAR,CAAqBC,EAArB,CAAwBC,UAAU,CAACQ,wBAAnC,EAA6D,KAAKC,sBAAL,CAA4BN,IAA5B,CAAiC,IAAjC,CAA7D;AACA,SAAK1B,QAAL,CAAcsB,EAAd,CAAiB/B,EAAE,CAACM,IAAH,CAAQoC,SAAR,CAAkBC,WAAnC,EAAgD,KAAKC,YAArD,EAAmE,IAAnE;AACA,SAAKnC,QAAL,CAAcsB,EAAd,CAAiB/B,EAAE,CAACM,IAAH,CAAQoC,SAAR,CAAkBG,SAAnC,EAA8C,KAAKC,YAAnD,EAAiE,IAAjE;AACA,SAAKrC,QAAL,CAAcsB,EAAd,CAAiB/B,EAAE,CAACM,IAAH,CAAQoC,SAAR,CAAkBK,YAAnC,EAAiD,KAAKD,YAAtD,EAAoE,IAApE;AACApB,IAAAA,OAAO,CAACsB,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B;AACA,SAAKnC,aAAL,CAAmBoC,QAAnB,CAA4B,CAA5B,EAA+BC,SAA/B,CAAyCnD,EAAE,CAACoD,QAAH,CAAY,GAAZ,EAAiB,EAAjB,EAAqBC,aAArB,EAAzC;AACA,SAAKtC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCC,SAAhC,CAA0CnD,EAAE,CAACsD,QAAH,CAAYtD,EAAE,CAACuD,QAAH,CAAY,YAAM;AACpE,MAAA,KAAI,CAACxC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCA,QAAhC,CAAyC,CAAzC,EAA4CM,MAA5C,GAAqD,IAArD;AACH,KAFqD,CAAZ,EAEtCxD,EAAE,CAACyD,SAAH,CAAa,GAAb,CAFsC,EAEnBzD,EAAE,CAACuD,QAAH,CAAY,YAAM;AACrC,MAAA,KAAI,CAACxC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCA,QAAhC,CAAyC,CAAzC,EAA4CM,MAA5C,GAAqD,IAArD;AACH,KAFsB,CAFmB,EAItCxD,EAAE,CAACyD,SAAH,CAAa,GAAb,CAJsC,EAInBzD,EAAE,CAACuD,QAAH,CAAY,YAAM;AACrC,MAAA,KAAI,CAACxC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCA,QAAhC,CAAyC,CAAzC,EAA4CM,MAA5C,GAAqD,IAArD;AACH,KAFsB,CAJmB,EAMtCxD,EAAE,CAACyD,SAAH,CAAa,GAAb,CANsC,EAMnBzD,EAAE,CAACuD,QAAH,CAAY,YAAM;AACrC,MAAA,KAAI,CAACxC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCA,QAAhC,CAAyC,CAAzC,EAA4CM,MAA5C,GAAqD,KAArD;AACA,MAAA,KAAI,CAACzC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCA,QAAhC,CAAyC,CAAzC,EAA4CM,MAA5C,GAAqD,KAArD;AACA,MAAA,KAAI,CAACzC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCA,QAAhC,CAAyC,CAAzC,EAA4CM,MAA5C,GAAqD,KAArD;AACH,KAJsB,CANmB,EAUtCxD,EAAE,CAACyD,SAAH,CAAa,GAAb,CAVsC,EAUnBJ,aAVmB,EAA1C;AAWA,SAAK/B,cAAL,GAAsB,EAAtB;AAEAI,IAAAA,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+B8B,aAA/B,CAA6CC,IAA7C,CAAkD;AAC9CC,MAAAA,QAAQ,EAAE,CADoC;AAE9CC,MAAAA,WAAW,EAAEnC,OAAO,CAACC,WAAR,CAAoBmC,QAApB,CAA6BC;AAFI,KAAlD;AAIA,SAAKC,kBAAL;AACH,GAzDI;AA0DLC,EAAAA,SA1DK,uBA0DO;AACRvC,IAAAA,OAAO,CAACI,YAAR,CAAqBoC,cAArB,CAAoClC,UAAU,CAACC,qBAA/C;AACAP,IAAAA,OAAO,CAACI,YAAR,CAAqBoC,cAArB,CAAoClC,UAAU,CAACI,iBAA/C;AACAV,IAAAA,OAAO,CAACI,YAAR,CAAqBoC,cAArB,CAAoClC,UAAU,CAACM,oBAA/C;AACAZ,IAAAA,OAAO,CAACI,YAAR,CAAqBoC,cAArB,CAAoClC,UAAU,CAACQ,wBAA/C;AAEH,GAhEI;AAiEL2B,EAAAA,MAjEK,kBAiEEC,EAjEF,EAiEM;AACP,SAAKjD,WAAL,IAAoBiD,EAApB;;AACA,QAAI,KAAKlD,UAAL,IAAmB,KAAKC,WAAL,GAAmB,CAAtC,IAA2C,CAAC,KAAKC,WAArD,EAAkE;AAC9D,WAAKD,WAAL,GAAmBO,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+ByC,aAAlD;AACA,WAAKC,KAAL;AACH;;AACD,QAAI,KAAKlD,WAAT,EAAsB;AAClB,WAAKC,YAAL,IAAqB+C,EAArB;;AACA,UAAI,KAAKhD,WAAL,IAAoB,KAAKC,YAAL,GAAoB,CAA5C,EAA+C;AAC3C,aAAKD,WAAL,GAAmB,KAAnB;AACAM,QAAAA,OAAO,CAACC,WAAR,CAAoB4C,SAApB;AACH;AACJ;;AAED,SAAKjD,cAAL,IAAuB8C,EAAvB;;AACA,QAAI,KAAK9C,cAAL,GAAsB,CAA1B,EAA6B;AACzB,WAAKP,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCM,MAAhC,GAAyC,KAAzC;AACA,WAAKzC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCM,MAAhC,GAAyC,IAAzC;AACA,WAAKzC,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCM,MAAhC,GAAyC,IAAzC;AACA,WAAKgB,aAAL;AACA,WAAKzD,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCuB,YAAhC,CAA6CzE,EAAE,CAAC0E,MAAhD,EAAwDC,WAAxD,GAAsE,KAAK3D,gBAAL,CAAsB4D,IAAI,CAACC,KAAL,CAAW,KAAKvD,cAAL,GAAsB,CAAjC,CAAtB,CAAtE;AACH;;AACD,QAAIsD,IAAI,CAACC,KAAL,CAAW,KAAKvD,cAAhB,KAAmC,CAAvC,EAA0C;AACtC,UAAI,CAAC,KAAKE,YAAV,EAAwB;AACxB,WAAKA,YAAL,GAAoB,KAApB;AACAE,MAAAA,OAAO,CAACsB,SAAR,CAAkB8B,SAAlB,CAA4B,WAA5B,EAAyC,UAACC,IAAD,EAAU;AAC/CA,QAAAA,IAAI,CAACN,YAAL,CAAkB,WAAlB,EAA+BO,IAA/B,CAAoC,QAApC,EAA8C,CAA9C;AACH,OAFD;AAIH;AACJ,GA/FI;AAgGLC,EAAAA,WAhGK,uBAgGOC,QAhGP,EAgGiB;AAClBxD,IAAAA,OAAO,CAACsB,SAAR,CAAkBmC,MAAlB,CAAyB,SAAzB,EAAoC,UAACJ,IAAD,EAAU;AAC1CA,MAAAA,IAAI,CAACN,YAAL,CAAkB,SAAlB,EAA6BO,IAA7B,CAAkCE,QAAlC;AACH,KAFD;AAGH,GApGI;AAqGLV,EAAAA,aArGK,2BAqGW;AAAA;;AACZ,QAAI,KAAKjD,kBAAT,EAA6B;AAC7B,SAAKA,kBAAL,GAA0B,IAA1B;AACAvB,IAAAA,EAAE,CAACoF,GAAH,CAAO,KAAP;AACA1D,IAAAA,OAAO,CAAC2D,YAAR,CAAqBC,UAArB,CAAgC,kBAAhC;AACA,QAAIC,GAAG,GAAGvF,EAAE,CAACsD,QAAH,CAAYtD,EAAE,CAACwF,OAAH,CAAW,GAAX,EAAgB,GAAhB,CAAZ,EAAkCxF,EAAE,CAACwF,OAAH,CAAW,GAAX,EAAgB,CAAhB,CAAlC,EAAsDxF,EAAE,CAACyD,SAAH,CAAa,GAAb,CAAtD,EAAyEzD,EAAE,CAACuD,QAAH,CAAY,YAAM;AACjG,MAAA,MAAI,CAAChC,kBAAL,GAA0B,KAA1B;AACH,KAFkF,CAAzE,CAAV;AAGA,SAAKR,cAAL,CAAoBmC,QAApB,CAA6B,CAA7B,EAAgCC,SAAhC,CAA0CoC,GAA1C;AACH,GA9GI;AA+GL3C,EAAAA,YA/GK,wBA+GQ6C,KA/GR,EA+Ge;AAChB,SAAKvE,UAAL,GAAkB,IAAlB;AAEH,GAlHI;AAmHL4B,EAAAA,YAnHK,wBAmHQ2C,KAnHR,EAmHe;AAChB,SAAKvE,UAAL,GAAkB,KAAlB;AACAQ,IAAAA,OAAO,CAACI,YAAR,CAAqB4D,IAArB,CAA0B1D,UAAU,CAAC2D,SAArC,EAAgD,KAAhD;AACH,GAtHI;AAuHLrB,EAAAA,KAvHK,mBAuHG;AACJ5C,IAAAA,OAAO,CAACI,YAAR,CAAqB4D,IAArB,CAA0B1D,UAAU,CAAC2D,SAArC,EAAgD,IAAhD;AACAjE,IAAAA,OAAO,CAACI,YAAR,CAAqB4D,IAArB,CAA0B1D,UAAU,CAAC4D,kBAArC;AACH,GA1HI;AA2HL1D,EAAAA,aA3HK,2BA2HW;AACZ,SAAKvB,KAAL,CAAWkF,MAAX,GAAoBnE,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+BkE,SAAnD;AACApE,IAAAA,OAAO,CAACI,YAAR,CAAqB4D,IAArB,CAA0B1D,UAAU,CAAC+D,wBAArC;AACH,GA9HI;AA+HL1D,EAAAA,eA/HK,2BA+HWoD,KA/HX,EA+HkBO,QA/HlB,EA+H4B;AAC7B,QAAIA,QAAJ,EAAc;AACVC,MAAAA,OAAO,CAACb,GAAR,CAAYY,QAAZ;AACA,WAAKlF,aAAL,CAAmB2D,YAAnB,CAAgCzE,EAAE,CAAC0E,MAAnC,EAA2CC,WAA3C,GAAyDjD,OAAO,CAACsB,SAAR,CAAkBkD,WAAlB,CAA8BC,cAA9B,CAA6C,eAAeH,QAAQ,CAACI,QAArE,CAAzD;AACA,WAAKtF,aAAL,CAAmBoC,QAAnB,CAA4B,CAA5B,EAA+BA,QAA/B,CAAwC,CAAxC,EAA2CuB,YAA3C,CAAwDzE,EAAE,CAACY,KAA3D,EAAkEiF,MAAlE,GAA2EG,QAAQ,CAACK,IAApF;AACH;;AACD,SAAKvF,aAAL,CAAmB0C,MAAnB,GAA4BiC,KAA5B;;AACA,QAAIA,KAAJ,EAAW;AACP,WAAK3E,aAAL,CAAmBwF,MAAnB,GAA4B,CAA5B;AACA,WAAKxF,aAAL,CAAmByF,MAAnB,GAA4B,CAA5B;AACA,WAAKzF,aAAL,CAAmBqC,SAAnB,CAA6BnD,EAAE,CAACwF,OAAH,CAAW,GAAX,EAAgB,CAAhB,EAAmBgB,MAAnB,CAA0BxG,EAAE,CAACyG,WAAH,EAA1B,CAA7B;AACH;AACJ,GA3II;AA4ILlE,EAAAA,kBA5IK,8BA4IckD,KA5Id,EA4IqB;AACtB,SAAK/E,aAAL,CAAmB8C,MAAnB,GAA4BiC,KAA5B;AACH,GA9II;AA+ILhD,EAAAA,sBA/IK,oCA+IoB;AACrB,SAAK5B,YAAL,CAAkBgF,MAAlB,GAA2BnE,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+B8E,UAA/B,CAA0CC,MAArE;AACH,GAjJI;AAkJLC,EAAAA,cAlJK,4BAkJY;AACblF,IAAAA,OAAO,CAAC2D,YAAR,CAAqBC,UAArB,CAAgC,OAAhC;AACA,QAAI,KAAKlE,WAAT,EAAsB;AACtB,SAAKC,YAAL,GAAoBK,OAAO,CAACC,WAAR,CAAoBC,UAApB,CAA+BiF,cAAnD;AACA,SAAKzF,WAAL,GAAmB,IAAnB;AACAM,IAAAA,OAAO,CAACI,YAAR,CAAqB4D,IAArB,CAA0B1D,UAAU,CAAC8E,mBAArC;AACH,GAxJI;AAyJLC,EAAAA,cAzJK,4BAyJY;AACbrF,IAAAA,OAAO,CAAC2D,YAAR,CAAqBC,UAArB,CAAgC,OAAhC;AACA5D,IAAAA,OAAO,CAACI,YAAR,CAAqB4D,IAArB,CAA0B1D,UAAU,CAACgF,mBAArC;AACH,GA5JI;AA6JLC,EAAAA,YA7JK,0BA6JU;AACXvF,IAAAA,OAAO,CAAC2D,YAAR,CAAqBC,UAArB,CAAgC,OAAhC;AACA5D,IAAAA,OAAO,CAACsB,SAAR,CAAkBmC,MAAlB,CAAyB,SAAzB;AACH,GAhKI;AAiKL+B,EAAAA,aAjKK,2BAiKW;AACZxF,IAAAA,OAAO,CAAC2D,YAAR,CAAqBC,UAArB,CAAgC,OAAhC;AACA,QAAI6B,KAAK,GAAG,CAACzF,OAAO,CAAC2D,YAAR,CAAqB+B,SAAlC;AACA1F,IAAAA,OAAO,CAAC2D,YAAR,CAAqBgC,SAArB,CAA+BF,KAA/B,EAHY,CAIZ;;AACA,SAAKnD,kBAAL;AACH,GAvKI;AAwKLA,EAAAA,kBAxKK,gCAwKgB;AACjB,SAAKxD,SAAL,CAAe0C,QAAf,CAAwB,CAAxB,EAA2BM,MAA3B,GAAoC9B,OAAO,CAAC2D,YAAR,CAAqB+B,SAAzD;AACA,SAAK5G,SAAL,CAAe0C,QAAf,CAAwB,CAAxB,EAA2BM,MAA3B,GAAoC,CAAC9B,OAAO,CAAC2D,YAAR,CAAqB+B,SAA1D;AACH,GA3KI,CA4KL;;AA5KK,CAAT","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        joystick: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '摇杆的脚本'\r\n        },\r\n        soundNode: cc.Node,\r\n        shootBtn: cc.Node,\r\n        reloadBtnNode: cc.Node,\r\n        amoUI: cc.Label,\r\n        allRoleNumUI: cc.Label,\r\n        weaponBtnNode: cc.Node,\r\n        prepareTopNode: cc.Node,\r\n        countDownSpGroup: [cc.SpriteFrame],\r\n\r\n        _shootFlag: false,\r\n        _shootTimer: 0,\r\n        _reloadFlag: false,\r\n        _reloadTimer: 0,\r\n\r\n        _timeCountDown: 20,\r\n        _onceCountDownAnim: false,\r\n        _onceExecute: true,\r\n    },\r\n\r\n    onLoad() {\r\n        GameApp.dataManager.globalData.isInGame = false\r\n        GameApp.eventManager.on(EventNames.EVENT_UPDATE_AMO_SHOW, this.updateAmoShow.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_SHOW_GUN_UI, this.updateGunUIShow.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_SHOW_RELOAD_UI, this.updateReloadUIShow.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_SHOW_ALLROLENUM_UI, this.updateAllRoleNumUIShow.bind(this))\r\n        this.shootBtn.on(cc.Node.EventType.TOUCH_START, this.onTouchBegin, this);\r\n        this.shootBtn.on(cc.Node.EventType.TOUCH_END, this.onTouchLeave, this);\r\n        this.shootBtn.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchLeave, this);\r\n        GameApp.uiManager.showGame('PrepareMap')\r\n        this.weaponBtnNode.children[0].runAction(cc.rotateBy(0.2, 90).repeatForever())\r\n        this.prepareTopNode.children[0].runAction(cc.sequence(cc.callFunc(() => {\r\n            this.prepareTopNode.children[0].children[0].active = true\r\n        }), cc.delayTime(0.4), cc.callFunc(() => {\r\n            this.prepareTopNode.children[0].children[1].active = true\r\n        }), cc.delayTime(0.4), cc.callFunc(() => {\r\n            this.prepareTopNode.children[0].children[2].active = true\r\n        }), cc.delayTime(0.4), cc.callFunc(() => {\r\n            this.prepareTopNode.children[0].children[0].active = false\r\n            this.prepareTopNode.children[0].children[1].active = false\r\n            this.prepareTopNode.children[0].children[2].active = false\r\n        }), cc.delayTime(0.4)).repeatForever())\r\n        this._timeCountDown = 20\r\n\r\n        GameApp.dataManager.globalData.inGameKillNum.push({\r\n            _killNum: 0,\r\n            _belongName: GameApp.dataManager.userData.playerName\r\n        })\r\n        this.updateSoundBtnShow()\r\n    },\r\n    onDestroy() {\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_AMO_SHOW)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_GUN_UI)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_RELOAD_UI)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_ALLROLENUM_UI)\r\n\r\n    },\r\n    update(dt) {\r\n        this._shootTimer -= dt\r\n        if (this._shootFlag && this._shootTimer < 0 && !this._reloadFlag) {\r\n            this._shootTimer = GameApp.dataManager.globalData.shootInterval\r\n            this.shoot()\r\n        }\r\n        if (this._reloadFlag) {\r\n            this._reloadTimer -= dt\r\n            if (this._reloadFlag && this._reloadTimer < 0) {\r\n                this._reloadFlag = false\r\n                GameApp.dataManager.reloadAmo()\r\n            }\r\n        }\r\n\r\n        this._timeCountDown -= dt\r\n        if (this._timeCountDown < 6) {\r\n            this.prepareTopNode.children[0].active = false\r\n            this.prepareTopNode.children[1].active = true\r\n            this.prepareTopNode.children[2].active = true\r\n            this.countDownAnim()\r\n            this.prepareTopNode.children[2].getComponent(cc.Sprite).spriteFrame = this.countDownSpGroup[Math.floor(this._timeCountDown - 1)]\r\n        }\r\n        if (Math.floor(this._timeCountDown) <= 0) {\r\n            if (!this._onceExecute) return\r\n            this._onceExecute = false\r\n            GameApp.uiManager.showPopup('GiftPopup', (node) => {\r\n                node.getComponent(\"GiftPopup\").init(\"GameUI\", 2)\r\n            })\r\n\r\n        }\r\n    },\r\n    showPlaneUI(_speedUp) {\r\n        GameApp.uiManager.showUI('PlaneUI', (node) => {\r\n            node.getComponent('PlaneUI').init(_speedUp)\r\n        })\r\n    },\r\n    countDownAnim() {\r\n        if (this._onceCountDownAnim) return\r\n        this._onceCountDownAnim = true\r\n        cc.log(\"播放了\")\r\n        GameApp.audioManager.playEffect('waitSceneCutDown')\r\n        var seq = cc.sequence(cc.scaleTo(0.2, 1.5), cc.scaleTo(0.3, 1), cc.delayTime(0.5), cc.callFunc(() => {\r\n            this._onceCountDownAnim = false\r\n        }))\r\n        this.prepareTopNode.children[2].runAction(seq)\r\n    },\r\n    onTouchBegin(event) {\r\n        this._shootFlag = true\r\n\r\n    },\r\n    onTouchLeave(event) {\r\n        this._shootFlag = false\r\n        GameApp.eventManager.emit(EventNames.EVENT_AIM, false)\r\n    },\r\n    shoot() {\r\n        GameApp.eventManager.emit(EventNames.EVENT_AIM, true)\r\n        GameApp.eventManager.emit(EventNames.EVENT_PLAYER_SHOOT)\r\n    },\r\n    updateAmoShow() {\r\n        this.amoUI.string = GameApp.dataManager.globalData.curAmoNum\r\n        GameApp.eventManager.emit(EventNames.EVENT_UPDATE_TOPBAR_SHOW)\r\n    },\r\n    updateGunUIShow(event, _gunData) {\r\n        if (_gunData) {\r\n            console.log(_gunData)\r\n            this.weaponBtnNode.getComponent(cc.Sprite).spriteFrame = GameApp.uiManager.commonAtlas.getSpriteFrame(\"ui_weapon_\" + _gunData.weaponid)\r\n            this.weaponBtnNode.children[1].children[0].getComponent(cc.Label).string = _gunData.name\r\n        }\r\n        this.weaponBtnNode.active = event\r\n        if (event) {\r\n            this.weaponBtnNode.scaleX = 0\r\n            this.weaponBtnNode.scaleY = 0\r\n            this.weaponBtnNode.runAction(cc.scaleTo(0.3, 1).easing(cc.easeBackOut()))\r\n        }\r\n    },\r\n    updateReloadUIShow(event) {\r\n        this.reloadBtnNode.active = event\r\n    },\r\n    updateAllRoleNumUIShow() {\r\n        this.allRoleNumUI.string = GameApp.dataManager.globalData.allRoleArr.length\r\n    },\r\n    reloadBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        if (this._reloadFlag) return;\r\n        this._reloadTimer = GameApp.dataManager.globalData.reloadInterval\r\n        this._reloadFlag = true\r\n        GameApp.eventManager.emit(EventNames.EVENT_PLAYER_RELOAD)\r\n    },\r\n    weaponBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.eventManager.emit(EventNames.EVENT_PICKUP_WEAPON)\r\n    },\r\n    backBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.uiManager.showUI('LoginUI')\r\n    },\r\n    soundBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        var onoff = !GameApp.audioManager._effectOn\r\n        GameApp.audioManager.setEffect(onoff)\r\n        // GameApp.audioManager.setEffect(onoff)\r\n        this.updateSoundBtnShow()\r\n    },\r\n    updateSoundBtnShow() {\r\n        this.soundNode.children[0].active = GameApp.audioManager._effectOn\r\n        this.soundNode.children[1].active = !GameApp.audioManager._effectOn\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}