{"version":3,"sources":["assets\\scripts\\ui\\LoginUI.js"],"names":["Utils","require","cc","Class","Component","properties","coinUI","Label","nameUI","EditBox","curPlayerAnim","sp","Skeleton","onceClick","visible","moreBtn","Node","moreSprites","SpriteFrame","spriteIndex","activityBtnNode","originActivityBtnPos","onLoad","GameApp","eventManager","on","EventNames","EVENT_SHOW_ACTIVITYBTN","showActivityBtn","bind","EVENT_UPDATE_COIN_SHOW","updateCoinShow","dataManager","initSomeAttr","setChoosedSkinId","userData","choosedSkinId","updateNameShow","initSkinShow","position","passDays","sys","localStorage","getItem","undefined","setItem","parseInt","days","date","Date","getTime","dailyDate","console","log","newDate","newtime","Tools","toTimeString2","Math","floor","hour","globalData","curDailyGot","activeValue","progressGifts","JSON","stringify","des","uiManager","showPopup","recordState","RecordState","READY","startRecord","changeRecordState","RECORD","res","showToast","videoPath","recordPath","recorder","stop","onDestroy","removeListener","soloBtnClick","audioManager","playEffect","node","getComponent","init","onNameChanged","event","setPlayerName","getRandomElement","playerNameArr","string","coinNum","children","playerName","skeletonData","normalSkinData","setSkin","getSkinDataById","getChoosedSkinId","skinname","advanceSkinDataGroup","setAnimation","setCompleteListener","randomNum","coinBtnClick","window","wx","self","tt","addVideo","addCoin","_info","skinBtnClick","showUI","boxBtnClick","rankBtnClick","weaponBtnClick","shopBtnClick","shareBtnClick","shareFromHomePage","moreGameBtnClick","systemInfo","getSystemInfoSync","platform","showMoreGamesModal","appLaunchOptions","appId","query","extraData","success","errMsg","fail","Button","interactable","stopAllActions","runAction","sequence","moveTo","v2","add","easing","easeBackOut","callFunc","moveBy","easeBounceOut","delayTime","repeatForever","activityBtnClick"],"mappings":"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","sourceRoot":"/","sourcesContent":["const Utils = require(\"Utils\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        coinUI: cc.Label,\r\n        nameUI: cc.EditBox,\r\n        curPlayerAnim: sp.Skeleton,\r\n        onceClick: {\r\n            default: true,\r\n            visible: false\r\n        },\r\n        moreBtn: cc.Node,\r\n        moreSprites: [cc.SpriteFrame],\r\n        spriteIndex: 0,\r\n        activityBtnNode: cc.Node,\r\n        originActivityBtnPos: null,\r\n    },\r\n\r\n\r\n    onLoad() {\r\n        GameApp.eventManager.on(EventNames.EVENT_SHOW_ACTIVITYBTN, this.showActivityBtn.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_UPDATE_COIN_SHOW, this.updateCoinShow.bind(this))\r\n\r\n        // if (window.tt) {\r\n        //     const systemInfo = tt.getSystemInfoSync();\r\n        //     if (systemInfo.platform !== \"ios\" && systemInfo.appName != \"XiGua\") {\r\n        //         this.moreBtn.active = true\r\n        //         Tools.scaleUpAndDowm(this.moreBtn)\r\n        //         this.moreBtn.runAction(cc.sequence(cc.callFunc(() => {\r\n        //             this.moreBtn.children[0].getComponent(cc.Sprite).spriteFrame = this.moreSprites[this.spriteIndex]\r\n        //             this.spriteIndex++\r\n        //             if (this.spriteIndex == this.moreSprites.length) {\r\n        //                 this.spriteIndex = 0\r\n        //             }\r\n        //         }), cc.delayTime(2)).repeatForever())\r\n        //     } else {\r\n        //         this.moreBtn.active = false\r\n        //     }\r\n        // } else {\r\n        //     this.moreBtn.active = true\r\n        //     Tools.scaleUpAndDowm(this.moreBtn)\r\n        //     this.moreBtn.runAction(cc.sequence(cc.callFunc(() => {\r\n        //         this.moreBtn.children[0].getComponent(cc.Sprite).spriteFrame = this.moreSprites[this.spriteIndex]\r\n        //         this.spriteIndex++\r\n        //         if (this.spriteIndex == this.moreSprites.length) {\r\n        //             this.spriteIndex = 0\r\n        //         }\r\n        //     }), cc.delayTime(2)).repeatForever())\r\n        // }\r\n\r\n        GameApp.dataManager.initSomeAttr()\r\n        GameApp.dataManager.setChoosedSkinId(GameApp.dataManager.userData.choosedSkinId)\r\n        this.updateCoinShow()\r\n        this.updateNameShow()\r\n        this.initSkinShow()\r\n        this.originActivityBtnPos = this.activityBtnNode.position\r\n        this.showActivityBtn()\r\n        // if (window.tt) {\r\n        //     var phone = tt.getSystemInfoSync();\r\n        //     var w = phone.screenWidth\r\n        //     var h = phone.screenHeight;\r\n        //     Utils.addBanner(\"addBanner\", {\r\n        //         top: h - (200 * 9 / 16),\r\n        //         left: w / 2 - 100,\r\n        //         width: 200\r\n        //     }, null, null)\r\n        // }\r\n\r\n        var passDays = cc.sys.localStorage.getItem(\"EatChicken_passDays\")\r\n        if (passDays == null || passDays == undefined || passDays == \"\") {\r\n            passDays = 0\r\n            cc.sys.localStorage.setItem(\"EatChicken_passDays\", 0)\r\n        } else {\r\n            passDays = parseInt(passDays)\r\n        }\r\n\r\n        var days = 0\r\n        let date = new Date();\r\n        date = parseInt(date.getTime() / 1000)\r\n        var dailyDate = cc.sys.localStorage.getItem(\"EatChicken_dailyDate\")\r\n        if (dailyDate == null || dailyDate == undefined || dailyDate == \"\") {\r\n            cc.sys.localStorage.setItem(\"EatChicken_dailyDate\", date)\r\n            days = 1\r\n        } else {\r\n            dailyDate = parseInt(dailyDate)\r\n            console.log(date)\r\n            console.log(dailyDate)\r\n            if (date >= dailyDate) {\r\n                var newDate = date - dailyDate\r\n                var newtime = Tools.toTimeString2(newDate)\r\n                days = Math.floor(newtime.hour / 24) + 1\r\n            } else {\r\n                console.log(\"现在时间比之前时间早，调时间了？\")\r\n                cc.sys.localStorage.setItem(\"EatChicken_dailyDate\", date)\r\n                days = 1\r\n                cc.sys.localStorage.setItem(\"EatChicken_passDays\", 0)\r\n                passDays = 0\r\n            }\r\n        }\r\n\r\n        if (days - passDays > 0) {\r\n            console.log(\"执行了天数加一\")\r\n            passDays += (days - passDays)\r\n            GameApp.dataManager.globalData.curDailyGot = false\r\n            cc.sys.localStorage.setItem(\"EatChicken_dailyGotState\", false);\r\n            GameApp.dataManager.globalData.activeValue = 0\r\n            cc.sys.localStorage.setItem(\"EatChicken_activeValue\", GameApp.dataManager.globalData.activeValue)\r\n            GameApp.dataManager.globalData.progressGifts = [0, 0, 0, 0]\r\n            cc.sys.localStorage.setItem(\"EatChicken_progressGifts\", JSON.stringify(GameApp.dataManager.globalData.progressGifts))\r\n        }\r\n        cc.sys.localStorage.setItem(\"EatChicken_passDays\", passDays)\r\n        var des = passDays\r\n        des = des % 7\r\n        if (des == 0) {\r\n            des = 7\r\n        }\r\n        GameApp.dataManager.globalData.days = des\r\n        console.log(GameApp.dataManager.globalData.curDailyGot)\r\n        if (!GameApp.dataManager.globalData.curDailyGot) {\r\n            GameApp.uiManager.showPopup('DailyPopup')\r\n        }\r\n        // GameApp.uiManager.showPopup('DailyPopup')\r\n\r\n        if (GameApp.dataManager.globalData.recordState == RecordState.READY) {\r\n            Utils.startRecord(function () {\r\n                GameApp.dataManager.changeRecordState(RecordState.RECORD)\r\n            }, function (res) {\r\n                GameApp.uiManager.showToast(\"已到录屏最大时长!\")\r\n                if (res.videoPath != null && res.videoPath != '') {\r\n                    GameApp.dataManager.globalData.recordPath = res.videoPath\r\n                    Utils.recorder.stop()\r\n                }\r\n            })\r\n        }\r\n    },\r\n    onDestroy() {\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_ACTIVITYBTN)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_COIN_SHOW)\r\n    },\r\n    // update (dt) {},\r\n\r\n    soloBtnClick() {\r\n        GameApp.audioManager.playEffect('click');\r\n        GameApp.uiManager.showPopup('GiftPopup', (node) => {\r\n            node.getComponent(\"GiftPopup\").init(\"PrepareUI\", 1)\r\n        })\r\n    },\r\n    onNameChanged(event) {\r\n        // GameApp.dataManager.setPlayerName(event.string)\r\n        GameApp.dataManager.setPlayerName(Tools.getRandomElement(GameApp.dataManager.globalData.playerNameArr))\r\n        this.updateNameShow()\r\n    },\r\n\r\n    updateCoinShow() {\r\n        this.coinUI.string = GameApp.dataManager.userData.coinNum\r\n    },\r\n\r\n    updateNameShow() {\r\n        // this.nameUI.string = GameApp.dataManager.userData.playerName\r\n        this.nameUI.node.children[0].getComponent(cc.Label).string = GameApp.dataManager.userData.playerName\r\n    },\r\n\r\n    initSkinShow() {\r\n        if (GameApp.dataManager.userData.choosedSkinId < 21) {\r\n            this.curPlayerAnim.skeletonData = GameApp.uiManager.normalSkinData;\r\n            this.curPlayerAnim.setSkin(GameApp.dataManager.getSkinDataById(GameApp.dataManager.getChoosedSkinId()).skinname)\r\n        } else {\r\n            this.curPlayerAnim.skeletonData = GameApp.uiManager.advanceSkinDataGroup[GameApp.dataManager.userData.choosedSkinId - 21]\r\n        }\r\n        if (GameApp.dataManager.userData.choosedSkinId < 21) {\r\n            this.curPlayerAnim.setAnimation(0, 'await', true)\r\n        } else {\r\n            this.curPlayerAnim.setAnimation(0, 'await_main_1', false)\r\n            this.curPlayerAnim.setCompleteListener(() => {\r\n                this.curPlayerAnim.setAnimation(0, 'await_main_' + Tools.randomNum(1, 3), false)\r\n            })\r\n        }\r\n    },\r\n    \r\n    coinBtnClick() {\r\n        if (window.wx) {\r\n            GameApp.uiManager.showToast(\"暂未开放！\")\r\n            return\r\n        }\r\n\r\n\r\n        if (!this.onceClick) return;\r\n        this.onceClick = false\r\n        GameApp.audioManager.playEffect('click')\r\n        var self = this\r\n\r\n        if (window.tt) {\r\n            Utils.addVideo(\"addVideo\", function () { //看完了\r\n                self.onceClick = true\r\n                GameApp.uiManager.showToast(\"获得500金币\")\r\n                GameApp.dataManager.addCoin(500)\r\n                self.updateCoinShow()\r\n            }, function (_info) { //没看完\r\n                self.onceClick = true\r\n                _info ? GameApp.uiManager.showToast(_info) : GameApp.uiManager.showToast(\"未看完视频！\")\r\n            })\r\n        } else {\r\n            self.onceClick = true\r\n            GameApp.uiManager.showToast(\"非真机,获得500金币\")\r\n            GameApp.dataManager.addCoin(500)\r\n            self.updateCoinShow()\r\n        }\r\n\r\n    },\r\n    skinBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.uiManager.showUI('SkinUI')\r\n    },\r\n    boxBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.uiManager.showUI('BoxUI')\r\n    },\r\n    rankBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.uiManager.showUI('RankUI')\r\n    },\r\n    weaponBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        GameApp.uiManager.showUI('GunUI')\r\n    },\r\n    shopBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n    },\r\n    shareBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        Utils.shareFromHomePage(() => {\r\n            GameApp.uiManager.showToast(\"感谢您的支持，赠送50金币\")\r\n            GameApp.dataManager.addCoin(50)\r\n        }, () => {\r\n            GameApp.uiManager.showToast(\"分享失败!\")\r\n        })\r\n    },\r\n    moreGameBtnClick() {\r\n        this.showActivityBtn()\r\n        if (window.tt) {\r\n            const systemInfo = tt.getSystemInfoSync();\r\n            // iOS 不支持，建议先检测再使用\r\n            if (systemInfo.platform !== \"ios\") {\r\n                // 打开互跳弹窗\r\n                tt.showMoreGamesModal({\r\n                    appLaunchOptions: [\r\n                        {\r\n                            appId: \"ttXXXXXX\",\r\n                            query: \"foo=bar&baz=qux\",\r\n                            extraData: {}\r\n                        }\r\n                        // {...}\r\n                    ],\r\n                    success(res) {\r\n                        console.log(\"success\", res.errMsg);\r\n                    },\r\n                    fail(res) {\r\n                        console.log(\"fail\", res.errMsg);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    },\r\n    showActivityBtn() {\r\n        this.activityBtnNode.getComponent(cc.Button).interactable = true\r\n        this.activityBtnNode.stopAllActions()\r\n        this.activityBtnNode.runAction(cc.sequence(cc.moveTo(0.2, cc.v2(this.originActivityBtnPos).add(cc.v2(90, 0))).easing(cc.easeBackOut()), cc.callFunc(() => {\r\n            this.activityBtnNode.runAction(cc.sequence(cc.moveBy(0.8, cc.v2(20, 0)).easing(cc.easeBounceOut(4)), cc.moveBy(0.2, cc.v2(-20, 0)), cc.moveBy(0.5, cc.v2(20, 0)).easing(cc.easeBounceOut(4)), cc.moveBy(0.2, cc.v2(-20, 0)), cc.delayTime(1)).repeatForever())\r\n        })))\r\n    },\r\n    activityBtnClick() {\r\n        GameApp.audioManager.playEffect('click')\r\n        this.activityBtnNode.getComponent(cc.Button).interactable = false\r\n        this.activityBtnNode.stopAllActions()\r\n        this.activityBtnNode.runAction(cc.moveTo(0.2, this.originActivityBtnPos))\r\n        GameApp.uiManager.showPopup(\"ActivityPopup\")\r\n    },\r\n});\r\n"]}