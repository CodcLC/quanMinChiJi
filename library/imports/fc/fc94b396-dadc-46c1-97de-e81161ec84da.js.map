{"version":3,"sources":["assets\\scripts\\ui\\GameMap.js"],"names":["cc","Class","Component","properties","tiledMap","TiledMap","objectPrefab","Prefab","colliderPrefab","groundItemPrefab","allObjectNode","Node","allColliderNode","allGunNode","otherGunPos","enemySpawnPosGroupNode","paratrooperNode","cloudNode","mapAtlas","SpriteAtlas","_timer0","_timer","readyToSort","gasPanel","dropPanel","boomPanel","safeCircle","safePosition","v2","_gasState","_dropTime","_mipBoxGroup","onLoad","GameApp","eventManager","on","EventNames","EVENT_UPDATE_GAS_SHOW","updateGasShow","bind","EVENT_DROP_BOX","dropBox","EVENT_NOTYFY_BOX_DISMISS","notifyBoxDismiss","EVENT_DROP_BOOM","dropBoom","initMapShow","onDestroy","removeListener","init","_chooseType","_bili","_speedUpJump","showCloud","showParatrooperPlayer","schedule","showParatrooperEnemy","Tools","randomNum","initGas","update","dt","gasCountDown","sortAll","children","width","height","runAction","sequence","fadeTo","repeatForever","_state","event","x","y","dataManager","globalData","gasConfig","position","gasCircle","delt","isIntersect","Math","abs","k","x_off","parseFloat","sqrt","_thePos","_index","div","mul","uiManager","showGameObject","node","push","allBoxArr","setPosition","getComponent","getIndex","emit","EVENT_NOTIFY_ENEMY_MAPBOX","removeArray","parseInt","destroy","_theWidth","boomArr","i","pointOfRandom","dropItBoom","length","EVENT_NOTYFY_BOOM_DISMISS","_delay","delayTime","callFunc","sp","Skeleton","setAnimation","moveBy","fadeOut","audioManager","playEffect","coli","PhysicsBoxCollider","enabled","theAnim","setCompleteListener","allRoleArr","allGunArr","wallLayer","getLayer","getObjectGroup","_objects","forEach","element","obj","instantiate","Sprite","spriteFrame","getSpriteFrame","name","split","parent","desPos","getPositionAt","getTilePos","ddd","convertToNodeSpaceAR","convertToWorldSpaceAR","size","offset","apply","addChild","tag","Tags","collider","pC","getUI","joystick","player","theX","theY","desDir","rotate","misc","radiansToDegrees","_jumpTime","mapCamera","zoomRatio","each0_05","act","active","gameBegin","isInGame","EVENT_GAME_BEGIN","landUpPos","destroyAllChildren","showGun","showPlayer","showEnemy","_param","_type","ItemType","weapon","_kind","posNode","posInPixel","mapSize","getContentSize","tileSize","getTileSize","floor","c","tempPosArr","standardArr","tagNum","enemy","userData","choosedSkinId","jsonData","RobotName","inGameKillNum","_killNum","_belongName","EVENT_SHOW_ALLROLENUM_UI","EVENT_UPDATE_RANK_SHOW","cloneObjArr","concat","tempDict","tempIndex","isInMapSight","index","sort","a","b","setSiblingIndex"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        tiledMap: cc.TiledMap,\r\n        objectPrefab: cc.Prefab,\r\n        colliderPrefab: cc.Prefab,\r\n        groundItemPrefab: cc.Prefab,\r\n\r\n        allObjectNode: cc.Node,\r\n        allColliderNode: cc.Node,\r\n        allGunNode: cc.Node,\r\n        otherGunPos: cc.Node,\r\n        enemySpawnPosGroupNode: cc.Node,\r\n        paratrooperNode: cc.Node,\r\n        cloudNode: cc.Node,\r\n\r\n        mapAtlas: cc.SpriteAtlas,\r\n\r\n        _timer0: 0.1,\r\n        _timer: 0.1,\r\n        readyToSort: false,\r\n\r\n        gasPanel: cc.Node,\r\n        dropPanel: cc.Node,\r\n        boomPanel: cc.Node,\r\n        safeCircle: 10240,\r\n        safePosition: cc.v2(0, 0),\r\n        _gasState: 0,\r\n        safeCircle: 0,\r\n        _dropTime: 0,\r\n        _mipBoxGroup: [],\r\n    },\r\n    onLoad() {\r\n        GameApp.eventManager.on(EventNames.EVENT_UPDATE_GAS_SHOW, this.updateGasShow.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_DROP_BOX, this.dropBox.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_NOTYFY_BOX_DISMISS, this.notifyBoxDismiss.bind(this))\r\n        GameApp.eventManager.on(EventNames.EVENT_DROP_BOOM, this.dropBoom.bind(this))\r\n\r\n        this.initMapShow()\r\n        // this.showCloud()\r\n        // this.showPlayer()\r\n        // this.showEnemy()\r\n    },\r\n    onDestroy() {\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_GAS_SHOW)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_DROP_BOX)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_NOTYFY_BOX_DISMISS)\r\n        GameApp.eventManager.removeListener(EventNames.EVENT_DROP_BOOM)\r\n\r\n    },\r\n    init(_chooseType, _bili, _speedUpJump) {\r\n        this.showCloud(_speedUpJump)\r\n        this.showParatrooperPlayer(_chooseType, _bili)\r\n        this.schedule(() => {\r\n            this.showParatrooperEnemy(_chooseType, Tools.randomNum(0, 100) / 100)\r\n        }, 0.1, 29, 0.5)\r\n        this.initGas()\r\n    },\r\n    update(dt) {\r\n        this.gasCountDown(dt)\r\n        if (!this.readyToSort) return;\r\n        this._timer -= dt\r\n        if (this._timer < 0) {\r\n            this._timer = this._timer0\r\n            this.sortAll()\r\n        }\r\n    },\r\n    initGas() {\r\n        this.gasPanel.children[1].width = this.gasPanel.children[1].height = 10240 * (300 / 204)\r\n        // this.gasPanel.children[0].width = this.gasPanel.children[0].height = this.gasPanel.children[1].width / 0.98\r\n        this.gasPanel.children[1].runAction(cc.sequence(cc.fadeTo(1, 200), cc.fadeTo(0.8, 255)).repeatForever())\r\n    },\r\n    updateGasShow(_state, event) {\r\n        this._gasState = _state\r\n        this.safeCircle = 10240 * (event.safeCircle / 204)\r\n        this.safePosition.x = 10240 * (event.safePosition.x / 204)\r\n        this.safePosition.y = 10240 * (event.safePosition.y / 204)\r\n\r\n        GameApp.dataManager.globalData.gasConfig = {\r\n            safePosition: this.gasPanel.children[1].position,\r\n            gasCircle: this.gasPanel.children[1].width\r\n        }\r\n    },\r\n    gasCountDown(dt) {\r\n        if (this.safeCircle < 0) {\r\n            return\r\n        }\r\n        if (this._gasState == 2) {\r\n            // console.log(this.gasPanel.children[1].width)\r\n            if (this.gasPanel.children[1].width <= this.safeCircle) {\r\n                this.gasPanel.children[1].width = this.gasPanel.children[1].height = this.safeCircle\r\n                // this.gasPanel.children[0].width = this.gasPanel.children[0].height = this.safeCircle / 0.98\r\n                if (this.safeCircle <= 0) {\r\n                    this.safeCircle -= 50//为了变成负数\r\n                    return\r\n                }\r\n                return\r\n            }\r\n\r\n            let delt = dt * ((10 / 204) * 10240)\r\n            this.gasPanel.children[1].width -= delt\r\n            this.gasPanel.children[1].height -= delt\r\n            // this.gasPanel.children[0].width -= delt\r\n            // this.gasPanel.children[0].height -= delt\r\n            GameApp.dataManager.globalData.gasConfig = {\r\n                safePosition: this.gasPanel.children[1].position,\r\n                gasCircle: this.gasPanel.children[1].width\r\n            }\r\n            if (this.safeCircle == 50) return\r\n            if (!Tools.isIntersect(this.gasPanel.children[1].position, this.gasPanel.children[1].width / 2, this.safePosition, this.safeCircle / 2)) {\r\n\r\n            } else {\r\n                if (Math.abs(this.gasPanel.children[1].width - this.safeCircle) > 0.01)  //外圈和内圈圆心重合,半径相同\r\n                {\r\n                    // k = y/x\r\n                    // y = kx\r\n                    // x^2+y^2 = 1\r\n                    // x^2 = 1/(k^2+1)\r\n                    var k = (this.gasPanel.children[1].y - this.safePosition.y) / (this.gasPanel.children[1].x - this.safePosition.x);\r\n\r\n                    var x_off = delt * parseFloat(Math.sqrt(1 / (k * k + 1)))\r\n\r\n                    // 通过mPoint_outer和mPoint_inner的x坐标来判断此时外圆圆心要移动的是该 + x_off（x轴偏移量）还是 -x_off\r\n                    this.gasPanel.children[1].x += 1 * (this.gasPanel.children[1].x < this.safePosition.x ? 1 : -1) * x_off;\r\n                    // 知道变化后的外圈圆心的x坐标，和直线方程来求对应的y坐标\r\n                    this.gasPanel.children[1].y = k * (this.gasPanel.children[1].x - this.safePosition.x) + this.safePosition.y;\r\n                    // // 通过mPoint_outer和mPoint_inner的x坐标来判断此时外圆圆心要移动的是该 + x_off（x轴偏移量）还是 -x_off\r\n                    // this.gasPanel.children[0].x += 1 * (this.gasPanel.children[1].x < this.safePosition.x ? 1 : -1) * x_off;\r\n                    // // 知道变化后的外圈圆心的x坐标，和直线方程来求对应的y坐标\r\n                    // this.gasPanel.children[0].y = k * (this.gasPanel.children[1].x - this.safePosition.x) + this.safePosition.y;\r\n\r\n                    GameApp.dataManager.globalData.gasConfig = {\r\n                        safePosition: this.gasPanel.children[1].position,\r\n                        gasCircle: this.gasPanel.children[1].width\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    dropBox(_thePos, _index) {\r\n        _thePos = (_thePos.div(204)).mul(10240)\r\n        GameApp.uiManager.showGameObject(\"DropBox\", (node) => {\r\n            this._mipBoxGroup.push(node)\r\n            GameApp.dataManager.globalData.allBoxArr.push(node)\r\n            node.setPosition(_thePos)\r\n            node.getComponent(\"DropBox\").init(Tools.getIndex(this._mipBoxGroup, node))\r\n            GameApp.eventManager.emit(EventNames.EVENT_NOTIFY_ENEMY_MAPBOX)\r\n        }, this.dropPanel)\r\n    },\r\n    notifyBoxDismiss(_index) {\r\n        Tools.removeArray(GameApp.dataManager.globalData.allBoxArr, this._mipBoxGroup[parseInt(_index)])\r\n        this._mipBoxGroup[parseInt(_index)].destroy()\r\n    },\r\n    dropBoom(_thePos, _theWidth) {\r\n        _thePos = (_thePos.div(204)).mul(10240)\r\n        _theWidth = 10240 * _theWidth / 204\r\n        let boomArr = []\r\n        for (let i = 0; i < 10; i++) {\r\n            boomArr.push(Tools.pointOfRandom(_thePos, _theWidth / 2, 0))\r\n        }\r\n        this.dropItBoom(boomArr, 0)\r\n    },\r\n    dropItBoom(boomArr, _index) {\r\n        if (_index >= boomArr.length) {\r\n            GameApp.eventManager.emit(EventNames.EVENT_NOTYFY_BOOM_DISMISS)\r\n            return\r\n        }\r\n        var _delay = Tools.randomNum(0, 2, true)\r\n        this.node.runAction(cc.sequence(cc.delayTime(_delay), cc.callFunc(() => {\r\n            GameApp.uiManager.showGameObject(\"Boom\", (node) => {\r\n                // console.log(boomArr[_index])\r\n                node.setPosition(boomArr[_index])\r\n                node.children[0].getComponent(sp.Skeleton).setAnimation(0, \"animation\", true)\r\n                node.children[0].runAction(cc.sequence(cc.moveBy(1, cc.v2(0, -220)), cc.fadeOut(0)))\r\n                node.children[1].runAction(cc.sequence(cc.delayTime(1), cc.callFunc(() => {\r\n                    GameApp.audioManager.playEffect('boom')\r\n                    var coli = node.getComponent(cc.PhysicsBoxCollider)\r\n                    coli.enabled = true\r\n                    var theAnim = node.children[1].getComponent(sp.Skeleton)\r\n                    theAnim.setAnimation(0, \"boom1\", false)\r\n                    theAnim.setCompleteListener(() => {\r\n                        coli.enabled = false\r\n                        node.destroy()\r\n                    })\r\n                })))\r\n            }, this.boomPanel)\r\n            this.dropItBoom(boomArr, ++_index)\r\n        })))\r\n\r\n    },\r\n    initMapShow() {\r\n        GameApp.dataManager.globalData.allRoleArr = []\r\n        GameApp.dataManager.globalData.allGunArr = []\r\n        // this.node.children[2].active = true\r\n        let wallLayer = this.tiledMap.getLayer(\"wall\")\r\n        this.tiledMap.getObjectGroup(\"dynamic\")._objects.forEach(element => {\r\n            let obj = cc.instantiate(this.objectPrefab)\r\n            obj.getComponent(cc.Sprite).spriteFrame = this.mapAtlas.getSpriteFrame(element.name.split('.')[0])\r\n            obj.parent = this.allColliderNode\r\n            let desPos = wallLayer.getPositionAt(this.getTilePos(cc.v2(element.x, element.y)))\r\n            obj.setPosition(desPos)\r\n            let ddd = this.allObjectNode.convertToNodeSpaceAR(obj.convertToWorldSpaceAR(cc.v2(0, 0)))\r\n            obj.parent = this.allObjectNode\r\n            obj.setPosition(ddd)\r\n        });\r\n        this.tiledMap.getObjectGroup(\"collision\")._objects.forEach(element => {\r\n            let obj = cc.instantiate(this.colliderPrefab)\r\n            let coli = obj.getComponent(cc.PhysicsBoxCollider)\r\n            coli.size = cc.size(element.width, element.height)\r\n            coli.offset = cc.v2(element.width / 2, -element.height / 2)\r\n            coli.apply()\r\n            this.allColliderNode.addChild(obj)\r\n            obj.setPosition(cc.v2(element.x, element.y))\r\n            coli.tag = Tags.collider\r\n        });\r\n    },\r\n    showParatrooperPlayer(_chooseType, _bili) {\r\n        GameApp.uiManager.showGameObject('ParatrooperPlayer', (node) => {\r\n            var pC = node.getComponent('ParatrooperPlayer')\r\n            pC.init(this.enemySpawnPosGroupNode.children)\r\n            GameApp.uiManager.getUI(\"GameUI\").getComponent(\"GameUI\").joystick.getComponent(\"Joystick\").player = pC\r\n            var theX = 0\r\n            var theY = 0\r\n            if (_chooseType == 0) {\r\n                theX = (this.enemySpawnPosGroupNode.children[3].x - this.enemySpawnPosGroupNode.children[0].x) * _bili - this.enemySpawnPosGroupNode.children[3].x\r\n                theY = (this.enemySpawnPosGroupNode.children[3].y - this.enemySpawnPosGroupNode.children[0].y) * _bili - this.enemySpawnPosGroupNode.children[3].y\r\n            } else {\r\n                theX = (this.enemySpawnPosGroupNode.children[1].x - this.enemySpawnPosGroupNode.children[2].x) * _bili - this.enemySpawnPosGroupNode.children[1].x\r\n                theY = (this.enemySpawnPosGroupNode.children[1].y - this.enemySpawnPosGroupNode.children[2].y) * _bili - this.enemySpawnPosGroupNode.children[1].y\r\n            }\r\n            node.setPosition(theX, theY)\r\n        }, this.paratrooperNode)\r\n    },\r\n    showParatrooperEnemy(_chooseType, _bili) {\r\n        GameApp.uiManager.showGameObject('ParatrooperEnemy', (node) => {\r\n            node.getComponent('ParatrooperEnemy').init(this.enemySpawnPosGroupNode.children)\r\n            var theX = 0\r\n            var theY = 0\r\n            if (_chooseType == 0) {\r\n                theX = (this.enemySpawnPosGroupNode.children[3].x - this.enemySpawnPosGroupNode.children[0].x) * _bili - this.enemySpawnPosGroupNode.children[3].x\r\n                theY = (this.enemySpawnPosGroupNode.children[0].y - this.enemySpawnPosGroupNode.children[3].y) * _bili - this.enemySpawnPosGroupNode.children[0].y\r\n            } else {\r\n                theX = (this.enemySpawnPosGroupNode.children[1].x - this.enemySpawnPosGroupNode.children[2].x) * _bili - this.enemySpawnPosGroupNode.children[1].x\r\n                theY = (this.enemySpawnPosGroupNode.children[1].y - this.enemySpawnPosGroupNode.children[2].y) * _bili - this.enemySpawnPosGroupNode.children[1].y\r\n            }\r\n            node.setPosition(theX, theY)\r\n            var desDir = cc.v2(0, 10).rotate(cc.misc.radiansToDegrees(Tools.randomNum(0, 360)))\r\n            // var randTime = Tools.randomNum(2, 4)\r\n            node.runAction(cc.repeatForever(cc.moveBy(0.1, desDir)))\r\n\r\n        }, this.paratrooperNode)\r\n    },\r\n    showCloud(_speedUpJump) {\r\n        var _jumpTime = 2\r\n        if (_speedUpJump) {\r\n            _jumpTime = 1\r\n        }\r\n        GameApp.uiManager.mapCamera.zoomRatio = 0.3\r\n        var each0_05 = 0.3 / (3.6 + _jumpTime * 3) / 100 * 5\r\n        var act = cc.sequence(cc.callFunc(() => {\r\n            if (GameApp.uiManager.mapCamera.zoomRatio >= 0.8) {\r\n                GameApp.uiManager.mapCamera.zoomRatio = 0.8\r\n                return\r\n            }\r\n            GameApp.uiManager.mapCamera.zoomRatio += each0_05//0.0015625\r\n        }), cc.delayTime(0.05)).repeatForever()\r\n        this.cloudNode.runAction(act)\r\n        _jumpTime = _jumpTime ? _jumpTime : 2\r\n        this.cloudNode.runAction(cc.sequence(cc.callFunc(() => {\r\n            this.cloudNode.children[0].active = true\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            GameApp.audioManager.playEffect('skydivingBegin', null, 1)\r\n            this.cloudNode.children[1].active = true\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[2].active = true\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[3].active = true\r\n        }), cc.delayTime(_jumpTime), cc.callFunc(() => {\r\n            GameApp.audioManager.playEffect('skydivingWind', null, 2)\r\n            this.cloudNode.children[0].active = false\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[1].active = true\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[2].active = true\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[3].active = true\r\n        }), cc.delayTime(_jumpTime), cc.callFunc(() => {\r\n            this.cloudNode.children[0].active = false\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[1].active = false\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[2].active = true\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[3].active = true\r\n        }), cc.delayTime(_jumpTime), cc.callFunc(() => {\r\n            this.cloudNode.children[0].active = false\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[1].active = false\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[2].active = false\r\n        }), cc.delayTime(0.3), cc.callFunc(() => {\r\n            this.cloudNode.children[3].active = true\r\n        }), cc.delayTime(_jumpTime), cc.callFunc(() => {\r\n            // console.log(GameApp.uiManager.mapCamera.zoomRatio)\r\n            this.gameBegin(_speedUpJump)\r\n        })))\r\n    },\r\n    gameBegin(_speedUpJump) {\r\n        GameApp.dataManager.globalData.isInGame = true\r\n        this.cloudNode.destroy()\r\n        GameApp.uiManager.mapCamera.zoomRatio = 0.8\r\n        GameApp.audioManager.playEffect('skydivingToGround', null, 1)\r\n        GameApp.eventManager.emit(EventNames.EVENT_GAME_BEGIN)\r\n        var landUpPos = this.paratrooperNode.children[0].position\r\n        this.paratrooperNode.destroyAllChildren()\r\n        this.showGun()\r\n        this.showPlayer(landUpPos)\r\n        if (_speedUpJump) {\r\n            this.node.runAction(cc.sequence(cc.delayTime(5), cc.callFunc(() => {\r\n                this.showEnemy()\r\n            })))\r\n        } else {\r\n            this.showEnemy()\r\n        }\r\n\r\n    },\r\n    showGun() {\r\n        let wallLayer = this.tiledMap.getLayer(\"wall\")\r\n        this.tiledMap.getObjectGroup(\"grass\")._objects.forEach(element => {\r\n            // var element = this.tiledMap.getObjectGroup(\"gun\")._objects[0]\r\n            let obj = cc.instantiate(this.groundItemPrefab)\r\n            obj.parent = this.allColliderNode\r\n            let desPos = wallLayer.getPositionAt(this.getTilePos(cc.v2(element.x, element.y)))\r\n            obj.setPosition(desPos)\r\n            let ddd = this.allGunNode.convertToNodeSpaceAR(obj.convertToWorldSpaceAR(cc.v2(0, 0)))\r\n            obj.parent = this.allGunNode\r\n            obj.setPosition(ddd)\r\n            let _param = {\r\n                _type: ItemType.weapon,\r\n                _kind: Tools.randomNum(0, 5)\r\n            }\r\n            obj.getComponent('GroundItem').init(_param)\r\n            GameApp.dataManager.globalData.allGunArr.push(obj)\r\n        });\r\n        this.otherGunPos.children.forEach(posNode => {\r\n            let obj = cc.instantiate(this.groundItemPrefab)\r\n            let ddd = this.allGunNode.convertToNodeSpaceAR(posNode.convertToWorldSpaceAR(cc.v2(0, 0)))\r\n            obj.parent = this.allGunNode\r\n            obj.setPosition(ddd)\r\n            let _param = {\r\n                _type: ItemType.weapon,\r\n                _kind: Tools.randomNum(0, 5)\r\n            }\r\n            obj.getComponent('GroundItem').init(_param)\r\n            GameApp.dataManager.globalData.allGunArr.push(obj)\r\n        });\r\n    },\r\n    //将像素坐标转化为瓦片坐标，posInPixel：目标节点的position\r\n    getTilePos(posInPixel) {\r\n        var mapSize = this.tiledMap.node.getContentSize();\r\n        var tileSize = this.tiledMap.getTileSize();\r\n        var x = Math.floor(posInPixel.x / tileSize.width);\r\n        var y = Math.floor((mapSize.height - posInPixel.y) / tileSize.height);\r\n        return cc.v2(x, y);\r\n    },\r\n\r\n    showPlayer(landUpPos) {\r\n        GameApp.uiManager.showGameObject('Player', (node) => {\r\n            // GameApp.dataManager.globalData.allRoleArr.push(node)\r\n            node.setPosition(landUpPos)\r\n            var c = node.getComponent(\"Player\")\r\n            GameApp.uiManager.getUI(\"GameUI\").getComponent(\"GameUI\").joystick.getComponent(\"Joystick\").player = c\r\n            c.init()\r\n\r\n            GameApp.dataManager.globalData.allRoleArr.push(c)\r\n            // this.readyToSort = true\r\n        }, this.allObjectNode)\r\n    },\r\n    showEnemy() {\r\n        var tempPosArr = []\r\n        var standardArr = this.enemySpawnPosGroupNode.children\r\n        // var xRangeArr = []\r\n        // var eachSpaceX = (standardArr[1].x - standardArr[0].x) / 6\r\n        // for (let i = 0; i < 7; i++) {\r\n        //     xRangeArr.push(standardArr[0].x + eachSpaceX * i)\r\n        // }\r\n        // var yRangeArr = []\r\n        // var eachSpaceY = (standardArr[2].y - standardArr[0].y) / 5\r\n        // for (let i = 0; i < 6; i++) {\r\n        //     yRangeArr.push(standardArr[0].y + eachSpaceY * i)\r\n        // }\r\n        // for (let i = 0; i < xRangeArr.length; i++) {\r\n        //     for (let j = 0; j < yRangeArr.length; j++) {\r\n        //         tempPosArr.push(cc.v2(xRangeArr[i], yRangeArr[j]))\r\n        //     }\r\n        // }\r\n        for (let i = 0; i < 30; i++) {\r\n            tempPosArr.push(cc.v2(Tools.randomNum(standardArr[0].x, standardArr[1].x), Tools.randomNum(standardArr[2].y, standardArr[0].y)))\r\n        }\r\n        // tempPosArr = Tools.getRandomAmountElementUnRepeat(tempPosArr, 30)\r\n        var tagNum = Tags.enemy\r\n        for (var i = 0; i < tempPosArr.length; i++) {\r\n            if (i + 1 == GameApp.dataManager.userData.choosedSkinId) {\r\n                continue;\r\n            }\r\n            GameApp.uiManager.showGameObject('Enemy', (node) => {\r\n                // GameApp.dataManager.globalData.allRoleArr.push(node)\r\n                node.getComponent(cc.PhysicsBoxCollider).tag = tagNum++\r\n                node.setPosition(tempPosArr[i])\r\n                var c = node.getComponent(\"Enemy\")\r\n                c.init(i + 1, GameApp.dataManager.jsonData.RobotName[i])\r\n                GameApp.dataManager.globalData.inGameKillNum.push({\r\n                    _killNum: 0,\r\n                    _belongName: GameApp.dataManager.jsonData.RobotName[i]\r\n                })\r\n                GameApp.dataManager.globalData.allRoleArr.push(c)\r\n                this.readyToSort = true\r\n            }, this.allObjectNode)\r\n        }\r\n\r\n        GameApp.eventManager.emit(EventNames.EVENT_SHOW_ALLROLENUM_UI)\r\n        GameApp.eventManager.emit(EventNames.EVENT_UPDATE_RANK_SHOW)\r\n    },\r\n    sortAll() {\r\n        var cloneObjArr = this.allObjectNode.children.concat()\r\n        var tempDict = []\r\n        var tempIndex = []\r\n        for (let i in cloneObjArr) {\r\n            if (GameApp.uiManager.isInMapSight(cloneObjArr[i])) {\r\n                tempDict.push({\r\n                    y: cloneObjArr[i].y,\r\n                    index: i\r\n                })\r\n                tempIndex.push(i)\r\n            }\r\n        }\r\n        tempDict.sort((a, b) => b.y - a.y)\r\n        for (let i in tempDict) {\r\n            cloneObjArr[tempDict[i].index].setSiblingIndex(tempDict[i])\r\n        }\r\n        // console.log(tempDict)\r\n        // console.log(this.allObjectNode.children)\r\n    }\r\n});\r\n"]}